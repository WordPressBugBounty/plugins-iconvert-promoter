(()=>{var e={5251:(e,t,n)=>{"use strict";var i=n(9196),r=Symbol.for("react.element"),s=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,a=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var i,s={},c=null,d=null;for(i in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(d=t.ref),t)o.call(t,i)&&!l.hasOwnProperty(i)&&(s[i]=t[i]);if(e&&e.defaultProps)for(i in t=e.defaultProps)void 0===s[i]&&(s[i]=t[i]);return{$$typeof:r,type:e,key:c,ref:d,props:s,_owner:a.current}}t.Fragment=s,t.jsx=c,t.jsxs=c},5893:(e,t,n)=>{"use strict";e.exports=n(5251)},9196:e=>{"use strict";e.exports=window.React},3967:(e,t)=>{var n;!function(){"use strict";var i={}.hasOwnProperty;function r(){for(var e="",t=0;t<arguments.length;t++){var n=arguments[t];n&&(e=o(e,s(n)))}return e}function s(e){if("string"==typeof e||"number"==typeof e)return e;if("object"!=typeof e)return"";if(Array.isArray(e))return r.apply(null,e);if(e.toString!==Object.prototype.toString&&!e.toString.toString().includes("[native code]"))return e.toString();var t="";for(var n in e)i.call(e,n)&&e[n]&&(t=o(t,n));return t}function o(e,t){return t?e?e+" "+t:e+t:e}e.exports?(r.default=r,e.exports=r):void 0===(n=function(){return r}.apply(t,[]))||(e.exports=n)}()}},t={};function n(i){var r=t[i];if(void 0!==r)return r.exports;var s=t[i]={exports:{}};return e[i](s,s.exports,n),s.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var i in t)n.o(t,i)&&!n.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var i={};(()=>{"use strict";n.r(i),n.d(i,{SidebarArea:()=>u.SidebarArea,SubSidebarArea:()=>u.SubSidebarArea,initialize:()=>lt,registerSubSidebarArea:()=>u.registerSubSidebarArea});var e={};n.r(e),n.d(e,{disableComplementaryArea:()=>M,enableComplementaryArea:()=>F,pinItem:()=>D,setDefaultComplementaryArea:()=>B,setFeatureDefaults:()=>Y,setFeatureValue:()=>K,toggleFeature:()=>G,unpinItem:()=>V});var t={};n.r(t),n.d(t,{getActiveComplementaryArea:()=>H,isFeatureActive:()=>$,isItemPinned:()=>U});const r=window.kubio.core,s=window.wp.blockLibrary,o=window.wp.element,a=(window.wp.notices,window.lodash);var l=n.n(a);const c=window.wp.hooks,d=window.kubio.blockPatterns,p=window.kubio.constants,u=window.kubio.editor,m=window.kubio.editorData,g=window.kubio.globalData,b=window.kubio.wpGlobalStyles,v=window.wp.blockEditor,f=window.wp.components,h=window.wp.compose,_=window.wp.coreData,x=window.wp.data,S=window.wp.editor,w=window.wp.i18n;function E(){return E=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)({}).hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},E.apply(null,arguments)}var y=n(3967),j=n.n(y),k=n(9196);const I=window.wp.primitives,T=(0,k.createElement)(I.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,k.createElement)(I.Path,{d:"M16.7 7.1l-6.3 8.5-3.3-2.5-.9 1.2 4.5 3.4L17.9 8z"})),O=(0,k.createElement)(I.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,k.createElement)(I.Path,{d:"M11.776 4.454a.25.25 0 01.448 0l2.069 4.192a.25.25 0 00.188.137l4.626.672a.25.25 0 01.139.426l-3.348 3.263a.25.25 0 00-.072.222l.79 4.607a.25.25 0 01-.362.263l-4.138-2.175a.25.25 0 00-.232 0l-4.138 2.175a.25.25 0 01-.363-.263l.79-4.607a.25.25 0 00-.071-.222L4.754 9.881a.25.25 0 01.139-.426l4.626-.672a.25.25 0 00.188-.137l2.069-4.192z"})),N=(0,k.createElement)(I.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,k.createElement)(I.Path,{fillRule:"evenodd",d:"M9.706 8.646a.25.25 0 01-.188.137l-4.626.672a.25.25 0 00-.139.427l3.348 3.262a.25.25 0 01.072.222l-.79 4.607a.25.25 0 00.362.264l4.138-2.176a.25.25 0 01.233 0l4.137 2.175a.25.25 0 00.363-.263l-.79-4.607a.25.25 0 01.072-.222l3.347-3.262a.25.25 0 00-.139-.427l-4.626-.672a.25.25 0 01-.188-.137l-2.069-4.192a.25.25 0 00-.448 0L9.706 8.646zM12 7.39l-.948 1.921a1.75 1.75 0 01-1.317.957l-2.12.308 1.534 1.495c.412.402.6.982.503 1.55l-.362 2.11 1.896-.997a1.75 1.75 0 011.629 0l1.895.997-.362-2.11a1.75 1.75 0 01.504-1.55l1.533-1.495-2.12-.308a1.75 1.75 0 01-1.317-.957L12 7.39z",clipRule:"evenodd"})),P=window.wp.viewport,A=(0,k.createElement)(I.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,k.createElement)(I.Path,{d:"M12 13.06l3.712 3.713 1.061-1.06L13.061 12l3.712-3.712-1.06-1.06L12 10.938 8.288 7.227l-1.061 1.06L10.939 12l-3.712 3.712 1.06 1.061L12 13.061z"})),C=window.wp.deprecated;var L=n.n(C);const R=window.wp.preferences,B=(e,t)=>({type:"SET_DEFAULT_COMPLEMENTARY_AREA",scope:e,area:t}),F=(e,t)=>n=>{let{registry:i,dispatch:r}=n;t&&(i.select(R.store).get(e,"isComplementaryAreaVisible")||i.dispatch(R.store).set(e,"isComplementaryAreaVisible",!0),r({type:"ENABLE_COMPLEMENTARY_AREA",scope:e,area:t}))},M=e=>t=>{let{registry:n}=t;n.select(R.store).get(e,"isComplementaryAreaVisible")&&n.dispatch(R.store).set(e,"isComplementaryAreaVisible",!1)},D=(e,t)=>n=>{let{registry:i}=n;if(!t)return;const r=i.select(R.store).get(e,"pinnedItems");!0!==(null==r?void 0:r[t])&&i.dispatch(R.store).set(e,"pinnedItems",{...r,[t]:!0})},V=(e,t)=>n=>{let{registry:i}=n;if(!t)return;const r=i.select(R.store).get(e,"pinnedItems");i.dispatch(R.store).set(e,"pinnedItems",{...r,[t]:!1})};function G(e,t){return function(n){let{registry:i}=n;L()("dispatch( 'core/interface' ).toggleFeature",{since:"6.0",alternative:"dispatch( 'core/preferences' ).toggle"}),i.dispatch(R.store).toggle(e,t)}}function K(e,t,n){return function(i){let{registry:r}=i;L()("dispatch( 'core/interface' ).setFeatureValue",{since:"6.0",alternative:"dispatch( 'core/preferences' ).set"}),r.dispatch(R.store).set(e,t,!!n)}}function Y(e,t){return function(n){let{registry:i}=n;L()("dispatch( 'core/interface' ).setFeatureDefaults",{since:"6.0",alternative:"dispatch( 'core/preferences' ).setDefaults"}),i.dispatch(R.store).setDefaults(e,t)}}const H=(0,x.createRegistrySelector)((e=>(t,n)=>{var i;const r=e(R.store).get(n,"isComplementaryAreaVisible");if(void 0!==r)return r?null==t||null===(i=t.complementaryAreas)||void 0===i?void 0:i[n]:null})),U=(0,x.createRegistrySelector)((e=>(t,n,i)=>{var r;const s=e(R.store).get(n,"pinnedItems");return null===(r=null==s?void 0:s[i])||void 0===r||r})),$=(0,x.createRegistrySelector)((e=>(t,n,i)=>(L()("select( 'core/interface' ).isFeatureActive( scope, featureName )",{since:"6.0",alternative:"select( 'core/preferences' ).get( scope, featureName )"}),!!e(R.store).get(n,i)))),z=(0,x.combineReducers)({complementaryAreas:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_DEFAULT_COMPLEMENTARY_AREA":{const{scope:n,area:i}=t;return e[n]?e:{...e,[n]:i}}case"ENABLE_COMPLEMENTARY_AREA":{const{scope:n,area:i}=t;return{...e,[n]:i}}}return e}}),q=(0,x.createReduxStore)("core/interface",{reducer:z,actions:e,selectors:t});(0,x.register)(q);const Z=window.wp.plugins,W=(0,Z.withPluginContext)(((e,t)=>({icon:t.icon||e.icon,identifier:t.identifier||`${e.name}/${t.name}`}))),J=W((function(e){let{as:t=f.Button,scope:n,identifier:i,icon:r,selectedIcon:s,name:a,...l}=e;const c=t,d=(0,x.useSelect)((e=>e(q).getActiveComplementaryArea(n)===i),[i]),{enableComplementaryArea:p,disableComplementaryArea:u}=(0,x.useDispatch)(q);return(0,o.createElement)(c,E({icon:s&&d?s:r,onClick:()=>{d?u(n):p(n,i)}},l))})),Q=e=>{let{smallScreenTitle:t,children:n,className:i,toggleButtonProps:r}=e;const s=(0,o.createElement)(J,E({icon:A},r));return(0,o.createElement)(o.Fragment,null,(0,o.createElement)("div",{className:"components-panel__header interface-complementary-area-header__small"},t&&(0,o.createElement)("span",{className:"interface-complementary-area-header__small-title"},t),s),(0,o.createElement)("div",{className:j()("components-panel__header","interface-complementary-area-header",i),tabIndex:-1},n,s))},X=()=>{};function ee(e){let{name:t,as:n=f.Button,onClick:i,...r}=e;return(0,o.createElement)(f.Fill,{name:t},(e=>{let{onClick:t}=e;return(0,o.createElement)(n,E({onClick:i||t?function(){(i||X)(...arguments),(t||X)(...arguments)}:void 0},r))}))}ee.Slot=function(e){let{name:t,as:n=f.ButtonGroup,fillProps:i={},bubblesVirtually:r,...s}=e;return(0,o.createElement)(f.Slot,{name:t,bubblesVirtually:r,fillProps:i},(e=>{if(!o.Children.toArray(e).length)return null;const t=[];o.Children.forEach(e,(e=>{let{props:{__unstableExplicitMenuItem:n,__unstableTarget:i}}=e;i&&n&&t.push(i)}));const i=o.Children.map(e,(e=>!e.props.__unstableExplicitMenuItem&&t.includes(e.props.__unstableTarget)?null:e));return(0,o.createElement)(n,s,i)}))};const te=ee,ne=e=>{let{__unstableExplicitMenuItem:t,__unstableTarget:n,...i}=e;return(0,o.createElement)(f.MenuItem,i)};function ie(e){let{scope:t,target:n,__unstableExplicitMenuItem:i,...r}=e;return(0,o.createElement)(J,E({as:e=>(0,o.createElement)(te,E({__unstableExplicitMenuItem:i,__unstableTarget:`${t}/${n}`,as:ne,name:`${t}/plugin-more-menu`},e)),role:"menuitemcheckbox",selectedIcon:T,name:n,scope:t},r))}function re(e){let{scope:t,...n}=e;return(0,o.createElement)(f.Fill,E({name:`PinnedItems/${t}`},n))}re.Slot=function(e){let{scope:t,className:n,...i}=e;return(0,o.createElement)(f.Slot,E({name:`PinnedItems/${t}`},i),(e=>(null==e?void 0:e.length)>0&&(0,o.createElement)("div",{className:j()(n,"interface-pinned-items")},e)))};const se=re;function oe(e){let{scope:t,children:n,className:i}=e;return(0,o.createElement)(f.Fill,{name:`ComplementaryArea/${t}`},(0,o.createElement)("div",{className:i},n))}const ae=W((function(e){let{children:t,className:n,closeLabel:i=(0,w.__)("Close plugin"),identifier:r,header:s,headerClassName:a,icon:l,isPinnable:c=!0,panelClassName:d,scope:p,name:u,smallScreenTitle:m,title:g,toggleShortcut:b,isActiveByDefault:v,showIconLabels:h=!1}=e;const{isActive:_,isPinned:S,activeArea:E,isSmall:y,isLarge:k}=(0,x.useSelect)((e=>{const{getActiveComplementaryArea:t,isItemPinned:n}=e(q),i=t(p);return{isActive:i===r,isPinned:n(p,r),activeArea:i,isSmall:e(P.store).isViewportMatch("< medium"),isLarge:e(P.store).isViewportMatch("large")}}),[r,p]);!function(e,t,n,i,r){const s=(0,o.useRef)(!1),a=(0,o.useRef)(!1),{enableComplementaryArea:l,disableComplementaryArea:c}=(0,x.useDispatch)(q);(0,o.useEffect)((()=>{i&&r&&!s.current?(c(e),a.current=!0):a.current&&!r&&s.current?(a.current=!1,l(e,t)):a.current&&n&&n!==t&&(a.current=!1),r!==s.current&&(s.current=r)}),[i,r,e,t,n])}(p,r,E,_,y);const{enableComplementaryArea:I,disableComplementaryArea:A,pinItem:C,unpinItem:L}=(0,x.useDispatch)(q);return(0,o.useEffect)((()=>{v&&void 0===E&&!y&&I(p,r)}),[E,v,p,r,y]),(0,o.createElement)(o.Fragment,null,c&&(0,o.createElement)(se,{scope:p},S&&(0,o.createElement)(J,{scope:p,identifier:r,isPressed:_&&(!h||k),"aria-expanded":_,label:g,icon:h?T:l,showTooltip:!h,variant:h?"tertiary":void 0})),u&&c&&(0,o.createElement)(ie,{target:u,scope:p,icon:l},g),_&&(0,o.createElement)(oe,{className:j()("interface-complementary-area",n),scope:p},(0,o.createElement)(Q,{className:a,closeLabel:i,onClose:()=>A(p),smallScreenTitle:m,toggleButtonProps:{label:i,shortcut:b,scope:p,identifier:r}},s||(0,o.createElement)(o.Fragment,null,(0,o.createElement)("strong",null,g),c&&(0,o.createElement)(f.Button,{className:"interface-complementary-area__pin-unpin-item",icon:S?O:N,label:S?(0,w.__)("Unpin from toolbar"):(0,w.__)("Pin to toolbar"),onClick:()=>(S?L:C)(p,r),isPressed:S,"aria-expanded":S}))),(0,o.createElement)(f.Panel,{className:d},t)))}));ae.Slot=function(e){let{scope:t,...n}=e;return(0,o.createElement)(f.Slot,E({name:`ComplementaryArea/${t}`},n))};const le=ae,ce=e=>{let{isActive:t}=e;return(0,o.useEffect)((()=>{let e=!1;return document.body.classList.contains("sticky-menu")&&(e=!0,document.body.classList.remove("sticky-menu")),()=>{e&&document.body.classList.add("sticky-menu")}}),[]),(0,o.useEffect)((()=>(t?document.body.classList.add("is-fullscreen-mode"):document.body.classList.remove("is-fullscreen-mode"),()=>{t&&document.body.classList.remove("is-fullscreen-mode")})),[t]),null},de=(0,o.forwardRef)((function(e,t){let{footer:n,header:i,sidebar:r,secondarySidebar:s,notices:a,content:l,drawer:c,actions:d,labels:p,className:u,shortcuts:m}=e;const g=(0,f.__unstableUseNavigateRegions)(m);!function(e){(0,o.useEffect)((()=>{const t=document&&document.querySelector(`html:not(.${e})`);if(t)return t.classList.toggle(e),()=>{t.classList.toggle(e)}}),[e])}("interface-interface-skeleton__html-container");const b={/* translators: accessibility text for the nav bar landmark region. */drawer:(0,w.__)("Drawer"),/* translators: accessibility text for the top bar landmark region. */header:(0,w.__)("Header"),/* translators: accessibility text for the content landmark region. */body:(0,w.__)("Content"),/* translators: accessibility text for the secondary sidebar landmark region. */secondarySidebar:(0,w.__)("Block Library"),/* translators: accessibility text for the settings landmark region. */sidebar:(0,w.__)("Settings"),/* translators: accessibility text for the publish landmark region. */actions:(0,w.__)("Publish"),/* translators: accessibility text for the footer landmark region. */footer:(0,w.__)("Footer"),...p};return(0,o.createElement)("div",E({},g,{ref:(0,h.useMergeRefs)([t,g.ref]),className:j()(u,"interface-interface-skeleton",g.className,!!n&&"has-footer")}),!!c&&(0,o.createElement)("div",{className:"interface-interface-skeleton__drawer",role:"region","aria-label":b.drawer,tabIndex:"-1"},c),(0,o.createElement)("div",{className:"interface-interface-skeleton__editor"},!!i&&(0,o.createElement)("div",{className:"interface-interface-skeleton__header",role:"region","aria-label":b.header,tabIndex:"-1"},i),(0,o.createElement)("div",{className:"interface-interface-skeleton__body"},!!s&&(0,o.createElement)("div",{className:"interface-interface-skeleton__secondary-sidebar",role:"region","aria-label":b.secondarySidebar,tabIndex:"-1"},s),!!a&&(0,o.createElement)("div",{className:"interface-interface-skeleton__notices"},a),(0,o.createElement)("div",{className:"interface-interface-skeleton__content",role:"region","aria-label":b.body,tabIndex:"-1"},l),!!r&&(0,o.createElement)("div",{className:"interface-interface-skeleton__sidebar",role:"region","aria-label":b.sidebar,tabIndex:"-1"},r),!!d&&(0,o.createElement)("div",{className:"interface-interface-skeleton__actions",role:"region","aria-label":b.actions,tabIndex:"-1"},d))),!!n&&(0,o.createElement)("div",{className:"interface-interface-skeleton__footer",role:"region","aria-label":b.footer,tabIndex:"-1"},n))})),pe=window.wp.keyboardShortcuts,ue=window.kubio.utils;var me=n(5893);const ge=(0,me.jsx)(I.SVG,{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,me.jsx)(I.Path,{d:"M3 6h11v1.5H3V6Zm3.5 5.5h11V13h-11v-1.5ZM21 17H10v1.5h11V17Z"})}),be=(0,me.jsx)(I.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,me.jsx)(I.Path,{fillRule:"evenodd",d:"M10.289 4.836A1 1 0 0111.275 4h1.306a1 1 0 01.987.836l.244 1.466c.787.26 1.503.679 2.108 1.218l1.393-.522a1 1 0 011.216.437l.653 1.13a1 1 0 01-.23 1.273l-1.148.944a6.025 6.025 0 010 2.435l1.149.946a1 1 0 01.23 1.272l-.653 1.13a1 1 0 01-1.216.437l-1.394-.522c-.605.54-1.32.958-2.108 1.218l-.244 1.466a1 1 0 01-.987.836h-1.306a1 1 0 01-.986-.836l-.244-1.466a5.995 5.995 0 01-2.108-1.218l-1.394.522a1 1 0 01-1.217-.436l-.653-1.131a1 1 0 01.23-1.272l1.149-.946a6.026 6.026 0 010-2.435l-1.148-.944a1 1 0 01-.23-1.272l.653-1.131a1 1 0 011.217-.437l1.393.522a5.994 5.994 0 012.108-1.218l.244-1.466zM14.929 12a3 3 0 11-6 0 3 3 0 016 0z",clipRule:"evenodd"})}),ve=window.wp.htmlEntities,fe=window.kubio.blockLibrary,he=(0,me.jsx)(I.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,me.jsx)(I.Path,{d:"M12 13.06l3.712 3.713 1.061-1.06L13.061 12l3.712-3.712-1.06-1.06L12 10.938 8.288 7.227l-1.061 1.06L10.939 12l-3.712 3.712 1.06 1.061L12 13.061z"})}),_e=(0,me.jsx)(I.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,me.jsx)(I.Path,{d:"M11 12.5V17.5H12.5V12.5H17.5V11H12.5V6H11V11H6V12.5H11Z"})}),xe=(0,fe.getNamesOfBlocks)(),Se=["cspromo/promopopup","core/column","core/post-content","core/template-part",xe.HEADER,xe.FOOTER,xe.SIDEBAR,xe.COLUMN,xe.LOOP_ITEM,xe.SLIDER_CONTENT],we=()=>{const{rootClientId:e,isInserterOpen:t,insertionIndex:n}=(0,x.useSelect)((e=>{var t;const{getBlockListSettings:n,getSelectedBlockClientId:i,getBlockRootClientId:r,getBlock:s,getBlockIndex:o}=e("core/block-editor");let l,c=i(),d=n(c);((0,a.isUndefined)(d)||d.templateLock)&&(l=o(c),c=r(c),d=n(c));const u=c&&Se.includes(null===(t=s(c))||void 0===t?void 0:t.name)&&((0,a.isUndefined)(d)||!d.templateLock);return{isInserterOpen:e(p.STORE_KEY).getOpenedInserter(),rootClientId:u?c:null,insertionIndex:l}}),[]),{setOpenInserter:i}=(0,x.useDispatch)(p.STORE_KEY),{selectBlock:r}=(0,x.useDispatch)("core/block-editor"),s=(0,o.useRef)(),l=(0,o.useCallback)((n=>{const o=!t&&"block-inserter";console.log("rootClientId",e),o?r(e):(s.current.focus(),n.preventDefault(),n.stopPropagation()),i(o,e)}),[t,e]);return(0,me.jsx)(me.Fragment,{children:(0,me.jsx)(f.Button,{ref:s,isSecondary:!0,isPressed:t,className:"edit-site-header-toolbar__inserter-toggle",onClick:l,icon:t?he:_e,onMouseDown:e=>{e.preventDefault()},label:(0,w._x)((e=>e?"Close":"Add block")(t),"Generic label for block inserter button","iconvert-promoter")})})},{MoreMenu:Ee,MediaControls:ye,PreviewOptions:je,RedoButton:ke,UndoButton:Ie}=u.HeaderComponents,{MENU_ROOT:Te}=u.NavigationSidebarConstants;function Oe({openEntitiesSavedStates:e}){const{deviceType:t,isEditorSidebarOpened:n,shortcut:i,getBlockSelectionStart:r,isListViewOpen:s,listViewShortcut:a}=(0,x.useSelect)((e=>{const{__experimentalGetPreviewDeviceType:t,isFeatureActive:n,getEditedPostType:i,getEditedPostId:r,isInserterOpened:s,getTemplateId:o,getTemplatePartId:a,getEntity:l,getPage:c,getShowOnFront:d,isListViewOpened:p}=e(u.STORE_KEY),{getEntityRecord:m}=e("core"),{__experimentalGetTemplateInfo:g}=e("core/editor"),b=o(),v=a(),f=i(),h=m("postType",f,r());let _;var x;_="wp_template"===f?null!=h&&h.title?null==h||null===(x=h.title)||void 0===x?void 0:x.raw:g(h).title:null==h?void 0:h.slug;const{getShortcutRepresentation:S}=e("core/keyboard-shortcuts");return{isListViewOpen:p(),deviceType:t(),entityTitle:_,hasFixedToolbar:n("fixedToolbar"),template:h,templateType:f,isInserterOpen:s(),templateId:b,templatePartId:v,entity:l(),page:c(),showOnFront:d(),isEditorSidebarOpened:e(u.STORE_KEY).isEditorSidebarOpened(),shortcut:S("core/edit-post/toggle-sidebar"),getBlockSelectionStart:e("core/block-editor").getBlockSelectionStart,listViewShortcut:S("kubio/edit-site/toggle-list-view")}}),[]),{__experimentalSetPreviewDeviceType:l,openSidebar:c,closeSidebar:d}=(0,x.useDispatch)(u.STORE_KEY),p=(0,h.useViewportMatch)("medium"),m=n?()=>{d(),S(!1)}:()=>{c(r()?"block-inspector":"document"),S(!1)},g=(0,u.usePageTitle)(),{isNavigationOpened:b}=(0,x.useSelect)(u.STORE_KEY),{setIsNavigationPanelOpened:v,openNavigationPanelToMenu:_,setIsListViewOpened:S}=(0,x.useDispatch)(u.STORE_KEY),E=(0,o.useCallback)((()=>{S(!s)}),[S,s]);return(0,me.jsxs)("div",{className:"edit-site-header",children:[(0,me.jsx)("div",{className:"edit-site-header_start",children:(0,me.jsxs)("div",{className:"edit-site-header__toolbar",children:[p&&(0,me.jsxs)(me.Fragment,{children:[(0,me.jsx)(we,{}),(0,me.jsx)(Ie,{}),(0,me.jsx)(ke,{}),(0,me.jsx)(f.Button,{className:"edit-site-header-toolbar__list-view-toggle",icon:ge,isPressed:s/* translators: button label text should, if possible, be under 16 characters. */,label:(0,w.__)("List View","iconvert-promoter"),onClick:E,shortcut:a})]}),!1]})}),(0,me.jsx)("div",{className:"edit-site-header_center",children:(0,me.jsx)("div",{className:"edit-site-document-actions",children:(0,me.jsx)("div",{className:"edit-site-document-actions__title-wrapper",children:(0,me.jsx)(f.Flex,{align:"center",children:(0,me.jsx)(f.FlexItem,{children:(0,me.jsx)("span",{children:(0,ve.decodeEntities)(null!=g?g:(0,w.__)("Page","iconvert-promoter"))})})})})})}),(0,me.jsx)("div",{className:"edit-site-header_end",children:(0,me.jsxs)("div",{className:"edit-site-header__actions",children:[(0,me.jsx)(ye,{deviceType:t,setDeviceType:l}),(0,me.jsx)(je,{}),(0,me.jsx)(u.SaveButton,{openEntitiesSavedStates:e}),(0,me.jsx)(f.Button,{icon:be,label:(0,w.__)("Settings","iconvert-promoter"),onClick:m,isPressed:n,"aria-expanded":n,className:"kubio-secondary-panel-toggler",shortcut:i}),(0,me.jsx)(se.Slot,{scope:"kubio/edit-site"}),(0,me.jsx)(Ee,{})]})})]})}const Ne=(0,me.jsx)(I.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,me.jsx)(I.Path,{d:"m13.06 12 6.47-6.47-1.06-1.06L12 10.94 5.53 4.47 4.47 5.53 10.94 12l-6.47 6.47 1.06 1.06L12 13.06l6.47 6.47 1.06-1.06L13.06 12Z"})}),Pe=window.wp.keycodes,Ae="root",{ContentNavigationItem:Ce,SearchResults:Le,useDebouncedSearch:Re}=(window.wp.url,u.NavigationSidebarComponents);function Be({onActivateMenu:e}){const[t,n]=(0,o.useState)("root"),{page:i}=(0,x.useSelect)((e=>({page:e(u.STORE_KEY).getPage()})),[]);return(0,me.jsx)(f.__experimentalNavigation,{activeItem:i&&`content-${i.path}`,activeMenu:t,onActivateMenu:t=>{n(t),e(t)},children:t===Ae&&(0,me.jsxs)(me.Fragment,{children:[(0,me.jsx)(u.MainDashboardButton.Slot,{children:(0,me.jsx)(f.__experimentalNavigationBackButton,{backButtonLabel:(0,w.__)("Dashboard","iconvert-promoter"),className:"edit-site-navigation-panel__back-to-dashboard",href:"index.php"})}),(0,me.jsxs)(f.__experimentalNavigationMenu,{title:(0,w.__)("Promoter","iconvert-promoter"),children:[(0,me.jsx)(f.__experimentalNavigationItem,{title:(0,w.__)("My Pop-ups","iconvert-promoter"),href:"admin.php?page=iconvertpr-promoter"}),(0,me.jsx)(f.__experimentalNavigationItem,{title:(0,w.__)("Email lists","iconvert-promoter"),href:"admin.php?page=iconvertpr-promoter-integrations"})]})]})})}const Fe=({isOpen:e})=>{const[t,n]=(0,o.useState)(Ae),{siteTitle:i}=(0,x.useSelect)((e=>{const{getEntityRecord:t}=e("core");return{siteTitle:(t("root","__unstableBase",void 0)||{}).name}}),[]),r=(0,o.useRef)();(0,o.useEffect)((()=>{e&&r.current.focus()}),[t]);const s=(0,h.usePrevious)(e);(0,o.useEffect)((()=>{t!==Ae&&e&&!s&&n(Ae)}),[t,e]);const{setIsNavigationPanelOpened:a}=(0,x.useDispatch)(u.STORE_KEY);return(0,me.jsx)("div",{className:j()("edit-site-navigation-panel",{"is-open":e}),ref:r,tabIndex:"-1",onKeyDown:e=>{e.keyCode===Pe.ESCAPE&&(e.stopPropagation(),a(!1))},children:(0,me.jsxs)("div",{className:"edit-site-navigation-panel__inner",children:[(0,me.jsx)("div",{className:"edit-site-navigation-panel__site-title-container",children:(0,me.jsxs)(f.Flex,{children:[(0,me.jsx)(f.FlexBlock,{children:(0,me.jsx)("div",{className:"edit-site-navigation-panel__site-title",children:i})}),(0,me.jsx)(f.FlexItem,{children:(0,me.jsx)(f.Tooltip,{text:(0,w.__)("Close panel","iconvert-promoter"),children:(0,me.jsx)(f.Button,{className:"kubio-edit-site-navigation-panel__close-button",icon:Ne,onClick:()=>a(!1)})})})]})}),(0,me.jsx)("div",{className:"edit-site-navigation-panel__scroll-container",children:(0,me.jsx)(Be,{onActivateMenu:n})})]})})};window.kubio.icons;const Me=function({isOpen:e}){const{isActive:t}=(0,x.useSelect)((e=>{const{isFeatureActive:t}=e(u.STORE_KEY);return{isActive:t("fullscreenMode")}}),[]),{setIsNavigationPanelOpened:n}=(0,x.useDispatch)(u.STORE_KEY);return t?(0,me.jsx)("div",{className:"edit-site-navigation-toggle"+(e?" is-open":""),children:(0,me.jsx)(f.Button,{className:"edit-site-navigation-toggle__button has-icon",label:(0,w.__)("My Popups","iconvert-promoter"),href:"admin.php?page=iconvertpr-promoter",showTooltip:!0,children:(0,me.jsx)(f.Icon,{size:"56px",icon:"arrow-left-alt"})})}):null},{Fill:De,Slot:Ve}=(0,f.createSlotFill)("EditSiteNavigationPanelPreview");function Ge(){const e=(0,x.useSelect)((e=>e(u.STORE_KEY).isNavigationOpened()));return(0,me.jsxs)(me.Fragment,{children:[(0,me.jsx)(Me,{isOpen:e}),e&&(0,me.jsx)(Fe,{isOpen:e}),(0,me.jsx)(Ve,{})]})}const{SubSidebarArea:Ke,AdditionalCSS:Ye,ColorSchemeArea:He,GlobalTypography:Ue}=u.SidebarComponents;function $e({parentAreaIdentifier:e}){const t=`${e}/general-settings`;return(0,me.jsx)(me.Fragment,{children:(0,me.jsxs)(Ke,{title:(0,w.__)("General Settings","iconvert-promoter"),areaIdentifier:t,children:[(0,me.jsx)(Ue,{parentAreaIdentifier:t}),(0,me.jsx)(He,{parentAreaIdentifier:t}),(0,me.jsx)(Ye,{})]})})}const{SectionsList:ze,SidebarArea:qe}=u.SidebarComponents;function Ze({beforeSectionsList:e,afterSectionsList:t}){const n=(0,u.usePageTitle)();return(0,me.jsxs)(qe,{title:(0,me.jsxs)(me.Fragment,{children:[(0,me.jsx)("span",{className:"preview-notice",children:(0,w.__)("You are editing","iconvert-promoter")}),(0,me.jsx)("span",{className:"panel-title site-title",children:(0,ue.fromHtmlEntities)(n)})]}),areaIdentifier:"document",children:[e,(0,me.jsx)($e,{parentAreaIdentifier:"document"}),t]})}const{BlockArea:We}=u.SidebarComponents,{Slot:Je,Fill:Qe}=(0,f.createSlotFill)("ColibriEditSiteBlockEditorSidebarInspector"),Xe=()=>{const{subsidebars:e}=(0,x.useSelect)((e=>({subsidebars:e(u.STORE_KEY).getSubSidebars()})));return(0,m.useGetGlobalSessionProp)("ready",!1)?(0,me.jsxs)(me.Fragment,{children:[(0,me.jsx)(Ze,{}),(0,me.jsx)(We,{children:(0,me.jsx)(Je,{bubblesVirtually:!0})}),(0,a.map)(e,((e,t)=>(0,me.jsx)(o.Fragment,{children:e},t)))]}):null},{optrixBlinkingLogoHtml:et}=window.kubioUtilsData,tt=(0,me.jsx)("div",{dangerouslySetInnerHTML:{__html:et}}),{KubioEditorStateProvider:nt,GlobalStylesRenderer:it,useSidebarTabAutochange:rt}=u.EditorComponents,st={secondarySidebar:(0,w.__)("Block Library","iconvert-promoter"),drawer:(0,w.__)("Navigation Sidebar","iconvert-promoter")},ot=(0,h.createHigherOrderComponent)((e=>({initialSettings:t})=>{var n,i;const{isFullscreenActive:r,sidebarIsOpened:s,settings:a,templateId:c,templateType:d,page:m,isNavigationOpen:g,isInserterOpen:b,isListViewOpen:v,isFSETemplate:f}=(0,x.useSelect)((e=>{const{isFeatureActive:t,getSettings:n,getEditedPostType:i,getEditedPostId:r,getPage:s,isNavigationOpened:o,isListViewOpened:a}=e(p.STORE_KEY),l=i(),c=r();return{isFullscreenActive:t("fullscreenMode"),sidebarIsOpened:e(p.STORE_KEY).isEditorSidebarOpened(),settings:n(),templateType:l,page:s(),templateId:c,isNavigationOpen:o(),isInserterOpen:e(p.STORE_KEY).getOpenedInserter(),isFSETemplate:!0,isListViewOpen:a()}}),[]),{postId:h,post:_,currentTemplateId:w,isKubioTheme:E}=(0,x.useSelect)((e=>{const t=l().get(m,["context","postId"]),n=l().get(m,["context","postType"]),{getEditorSettings:i}=e(S.store),{getEntityRecord:r,getEntityRecords:s}=e("core"),{getTemplateId:o=l().noop}=e("kubio/edit-site");let a;if(["wp_template","wp_template_part"].includes(n)){const e=s("postType",n,{wp_id:t});a=null==e?void 0:e[0]}else a=r("postType",n,t);return{postId:t,currentTemplateId:o(),isKubioTheme:i().supportsTemplateMode,post:a}}),[null==m||null===(n=m.context)||void 0===n?void 0:n.postId,null==m||null===(i=m.context)||void 0===i?void 0:i.postType]),{openSidebar:y}=(0,x.useDispatch)(p.STORE_KEY);(0,o.useEffect)((()=>{y("document")}),[]);const{editEntityRecord:j}=(0,x.useDispatch)("core"),{updateEditorSettings:k,setupEditor:I}=(0,x.useDispatch)("core/editor"),{defaultTemplateTypes:T}=a;(0,o.useEffect)((()=>{k(t)}),[T]),(0,o.useEffect)((()=>{k({...t,defaultTemplateTypes:T})}),[T]);const O=(0,o.useRef)();(0,o.useLayoutEffect)((()=>{_&&(null==_?void 0:_.id)!==O.current&&(O.current=null==_?void 0:_.id,I(_))}),[h,_]),(0,o.useLayoutEffect)((()=>{if(_&&"string"==typeof w){const e=E?"full-width":"kubio-full-width",t=w.includes(e),n=l().get(_,["content","raw"]),i=l().get(_,"template"),r=l().get(_,"id"),s=l().get(_,"type");!n&&t&&""===i&&j("postType",s,r,{template:e})}}),[h]);const N={isListViewOpen:v,isFullscreenActive:r,sidebarIsOpened:s,templateId:c,templateType:d,page:m,isNavigationOpen:g,isInserterOpen:b,isFSETemplate:f,__experimentalGlobalStylesBaseStyles:a.__experimentalGlobalStylesBaseStyles,__experimentalGlobalStylesUserEntityId:a.__experimentalGlobalStylesUserEntityId};return(0,me.jsxs)(me.Fragment,{children:[(0,me.jsx)(e,{...N}),(0,me.jsx)(u.URLQueryController,{})]})}),"WithEditorCurrentEntity"),at=(0,h.compose)(ot,h.pure)((function(e){const{__experimentalGlobalStylesUserEntityId:t,sidebarIsOpened:n,templateId:i,templateType:s,page:a,isNavigationOpen:l,isInserterOpen:c,isListViewOpen:h,isFSETemplate:w}=e,{setPage:E}=(0,x.useDispatch)("core/editor"),y=(0,r.useActiveMedia)(),[k,I]=(0,o.useState)(!1),T=(0,o.useCallback)((()=>I(!0)),[]),O=(0,o.useCallback)((()=>{I(!1)}),[]);(0,u.useBlockSelectionListener)(),rt(),(0,m.useGetGlobalSessionProp)("ready",!1);const N=(0,o.useMemo)((()=>({...null==a?void 0:a.context,queryContext:[(null==a?void 0:a.context.queryContext)||{page:1},e=>E({...a,context:{...null==a?void 0:a.context,queryContext:{...null==a?void 0:a.context.queryContext,...e}}})]})),[JSON.stringify(null==a?void 0:a.context)]);(0,o.useEffect)((()=>{l?document.body.classList.add("is-navigation-sidebar-open"):document.body.classList.remove("is-navigation-sidebar-open")}),[l]),(0,o.useEffect)((()=>(0,d.initializeGutentagPatterns)()),[]);const P=j()("kubio-sidebar",{"kubio-sidebar-hidden":!n||c||h}),A=j()("kubio-secondary-sidebar",{"kubio-secondary-sidebar-hidden":!(c||h)}),C=(0,me.jsx)(nt,{blockContext:N,templateId:i,templateType:s,page:a,children:(0,me.jsx)(g.KubioGlobalDataContextProvider,{children:(0,me.jsx)(u.HoveredSectionProvider,{children:(0,me.jsx)(b.GlobalStylesProvider,{children:(0,me.jsxs)(v.BlockContextProvider,{value:N,children:[(0,me.jsx)(it,{}),(0,me.jsx)(u.KeyboardShortcuts.Register,{}),(0,me.jsx)(Xe,{}),(0,me.jsx)(de,{labels:st,drawer:(0,me.jsx)(Ge,{}),secondarySidebar:(0,me.jsxs)("div",{className:A,children:[c&&(0,me.jsx)(u.InserterSidebar,{}),h&&(0,me.jsx)(u.ListViewSidebar,{})]}),sidebar:(0,me.jsx)("div",{className:P,children:(0,me.jsx)(le.Slot,{scope:`${p.STORE_KEY}/sidebars`})}),header:(0,me.jsx)(Oe,{openEntitiesSavedStates:T}),notices:(0,me.jsx)(S.EditorSnackbars,{}),content:(0,me.jsxs)(me.Fragment,{children:[(0,me.jsx)(S.EditorNotices,{}),w&&(0,me.jsx)(u.FSEThemeBlockEditor,{KubioBlinkingLogoIframeHtml:tt}),!w&&(0,me.jsx)(u.ClassicThemeBlockEditor,{KubioBlinkingLogoIframeHtml:tt}),(0,me.jsx)(u.KeyboardShortcuts,{openEntitiesSavedStates:T}),(0,me.jsx)("div",{id:"kubio-toolbar-boundary"})]}),actions:(0,me.jsx)(me.Fragment,{children:(0,me.jsx)(u.EntitiesSavedStates,{isOpen:k,close:O})}),footer:(0,me.jsx)(v.BlockBreadcrumb,{})}),(0,me.jsx)(f.Popover.Slot,{}),(0,o.createPortal)((0,me.jsx)("div",{className:"kubio-popover-slot-container",children:(0,me.jsx)(f.Popover.Slot,{name:"kubio-popover-slot"})}),document.body),(0,me.jsx)(Z.PluginArea,{})]})})})})});return(0,me.jsxs)("div",{className:j()("kubio-editor-wrapper",`kubio-editor-wrapper--media-${y}`),children:[(0,me.jsx)(ce,{isActive:!0}),(0,me.jsx)(S.UnsavedChangesWarning,{}),(0,me.jsx)(pe.ShortcutProvider,{children:(0,me.jsx)(f.SlotFillProvider,{children:(0,me.jsxs)(_.EntityProvider,{kind:"root",type:"site",children:[w&&(0,me.jsx)(_.EntityProvider,{kind:"postType",type:s,id:i,children:(0,me.jsx)(_.EntityProvider,{kind:"postType",type:"wp_global_styles",id:t,children:C})}),!w&&C]})})})]})}));function lt(e,t){if(!document.querySelector(`.${e}`))return;(t=(0,a.cloneDeep)(t)).__experimentalFetchLinkSuggestions=r.fetchLinkSuggestions,t.__experimentalSpotlightEntityBlocks=["core/template-part"],(0,c.addFilter)("kubio.editor.inserterItems","cspromos.editor.inserterItems",(e=>e.filter((({name:e})=>"core/html"===e||e.startsWith("cspromo/")))));const n=new URLSearchParams(window.location.search);t.isGutentagDebug=!!n.get("kubio-debug");const i=t.state;delete t.state,i.settings=t,(0,c.doAction)("kubio.editor.initialize"),(0,s.registerCoreBlocks)(),(0,d.initFirebaseData)(),l().isFunction(s.__experimentalRegisterExperimentalCoreBlocks)&&(0,s.__experimentalRegisterExperimentalCoreBlocks)({enableFSEBlocks:!0}),(0,u.registerEditSiteStore)(i),(0,r.registerTemplateStore)(),(0,o.render)((0,me.jsx)(o.StrictMode,{children:(0,me.jsx)(at,{initialSettings:i.settings})}),document.querySelector(`.${e}`)),window.kubioToggleDebug=e=>{wp.data.dispatch("kubio/edit-site").toggleGutentagDebug(e)}}})(),(window.cspromo=window.cspromo||{}).editor=i})();

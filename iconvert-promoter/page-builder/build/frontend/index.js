(()=>{var t={9985:()=>{!function(t,e){const o="countdown";window.kubioCountdownRun=null;const i=function(){this.namespace=o,this.defaults={inEditor:!1},e.apply(this,arguments),this.getIsKubioEditor()||this.start()};i.prototype={start(){this.isEditor=this.getIsKubioEditor();const t=this.getKubioSettings();if("evergreen"===t.datetimetype&&this.isEditor){const e=this.kubio_cookie_name(t);this.kubio_countdown_cookie_write(e)}clearInterval(window.kubioCountdownRun),this.shouldStartCountdown()},stop(){this.kubioCountdownRunStop()},getKubioSettings(){return this.opts},getIsKubioEditor(){return this.opts?.kubioSettings?.inEditor||this.opts?.inEditor},restart(){this.stop(),this.updateOpts(),this.start()},shouldStartCountdown(){if(this.isEditor)return void this.kubio_countdown_run();this.popupContainerObserver&&this.popupContainerObserver.disconnect();const t=this.$element[0].closest(".cs-popup-container");if(!t)return;const e=()=>t.classList.contains("visible");if(e())this.kubio_countdown_run();else{const o=setTimeout((()=>{e()&&this.kubio_countdown_run()}),100);this.popupContainerObserver=new MutationObserver(((t,i)=>{for(const i of t)"attributes"===i.type&&"class"===i.attributeName&&e()&&(clearTimeout(o),this.kubio_countdown_run(),this.popupContainerObserver.disconnect())}));const i={attributes:!0,childList:!1,subtree:!1};this.popupContainerObserver.observe(t,i)}},leadingZero:t=>t<10?`0${t}`:t,utcDate(){const t=new Date,e=t.getUTCFullYear(),o=this.leadingZero(t.getUTCDate());return`${e}-${this.leadingZero(t.getUTCMonth()+1)}-${o}T${this.leadingZero(t.getUTCHours())}:${this.leadingZero(t.getUTCMinutes())}:${this.leadingZero(t.getUTCSeconds())}`},currentDateInTimezone(t){null===t&&(t=Intl.DateTimeFormat("en").resolvedOptions().timeZone);const e=(new Date).toLocaleString("en-US",{timeZone:t});return Date.parse(e)},getUTCOffset(t){if(t){const e=t.split("|");return Number(e[0])}return 0},kubio_countdown_run(){const t=this,e=(this.getIsKubioEditor(),this.getKubioSettings()),o=e.datetimetype;let i=e.activateDays,n=!1;"evergreen"===e.datetimetype&&(i=!1,n=!0);const s=this.$element.find('.wp-block-cspromo-countdown__container .wp-block-cspromo-countdownitem__outer[data-itemtype="d"] .wp-block-cspromo-countdownitem__number'),r=this.$element.find('.wp-block-cspromo-countdown__container .wp-block-cspromo-countdownitem__outer[data-itemtype="h"] .wp-block-cspromo-countdownitem__number'),a=this.$element.find('.wp-block-cspromo-countdown__container .wp-block-cspromo-countdownitem__outer[data-itemtype="m"] .wp-block-cspromo-countdownitem__number'),c=this.$element.find('.wp-block-cspromo-countdown__container .wp-block-cspromo-countdownitem__outer[data-itemtype="s"] .wp-block-cspromo-countdownitem__number');let u;if("evergreen"===o){const t=this.kubio_cookie_name(e);u=this.kubio_countdown_cookie(t),null===u||this.kubio_evergreen_changed()?(this.kubio_countdown_cookie_write(t),u=this.kubio_countdown_cookie(t),e.cdDateTime=u):e.cdDateTime=u}const d=e.cdDateTime,p=t.getUTCOffset(e.timezone),l=36e5,m=864e5;let h=d;const b=function(){d!==e.cdDateTime&&(h=e.cdDateTime);const u=(new Date).getTime();let b;if("due-date"===o){const o=(new Date).getTimezoneOffset()/60*-1,i=p,n=[Math.abs(o),Math.abs(i)];let s=0;o<0&&(s+=1),i<0&&(s+=1);let r=0;r=[0,2].includes(s)?Math.max(...n)-Math.min(...n):Math.abs(o)+Math.abs(i),b=Date.parse(h)-t.currentDateInTimezone(e.timezone),b<0&&(b=0)}else h>0&&h>u?(b=h-u,b+=500):b=0;const w=Math.floor(b/m);let g=Math.floor(b%m/l);const _=Math.floor(b%l/6e4),f=Math.floor(b%6e4/1e3);!1===i&&!0===n&&(g+=24*w),s.html(w||"0"),r.html(g?t.leadingZero(g):"0"),a.html(_?t.leadingZero(_):"0"),c.html(f?t.leadingZero(f):"0"),w+g+_+f<=0&&t.stop()};clearInterval(window.kubioCountdownRun),window.kubioCountdownRun=setInterval(b,1e3),b(),t.$element.get(0).classList.remove("wp-block-cspromo-countdown--not-loaded")},kubioCountdownRunStop(){const t=this.$element.find(".wp-block-cspromo-countdown__container"),e=this.getIsKubioEditor(),o=this.getKubioSettings();clearInterval(window.kubioCountdownRun),!1===e&&"none"===o.datetimeendbehavior&&t.parent(".wp-block-cspromo-countdown__outer").css("display","none")},kubio_countdown_cookie:t=>window.sessionStorage.getItem(t),kubio_countdown_calculate_evergreen(){const t=this.getKubioSettings();let e=0,o=0;const i=t.evergreenHours,n=t.evergreenMinutes;return i&&parseInt(i)>0&&(e=36e5*parseInt(i)),n&&parseInt(n)>0&&(o=6e4*parseInt(n)),0===e&&0===o?0:(new Date).getTime()+e+o},kubio_evergreen_changed(){const t=this.getKubioSettings(),e=t.evergreenHours,o=t.evergreenMinutes,i=t.datetimeendbehavior,n=this.kubio_cookie_name(t,!0)+"settings";let s=!1;const r=this.kubio_countdown_cookie(n);if(null!==r){const t=JSON.parse(r);s=!(t.hours===e&&t.minutes===o&&t.display===i)}if(!0===s||null===r){const e={hours:t.evergreenHours,minutes:t.evergreenMinutes,display:t.datetimeendbehavior};window.sessionStorage.setItem(n,JSON.stringify(e))}return s},kubio_countdown_cookie_write(t){const e=this.kubio_countdown_calculate_evergreen();window.sessionStorage.setItem(t,e)},is_kubio_preview(){const t=window.location.search;return!!(t.includes("kubio-random=")||t.includes("kubio-preview=")||t.includes("__iconvert-promoter-preview")||this.getIsKubioEditor())},kubio_cookie_name(t,e=!1){let o="kubioCountdownEvergreen";return this.is_kubio_preview()&&e&&(o=`${o}-pv`),`${o}${t.cookieId}`}},i.inherits(e),e[o]=i,e.Plugin.create(o),e.Plugin.autoload(o)}(jQuery,CSPROMO)},4984:()=>{!function(t,e){const o="yesno",i=function(){this.namespace=o,this.defaults={inEditor:!1},e.apply(this,arguments),!1===this.opts.inEditor&&this.start()};i.prototype={start(){const e=this.$element.find(".cspromo-yes-no-button[data-action]"),o=this;e.on("click",(function(e){const i=t(this),n=i.data("action"),s=i.data("content-type"),r=i.closest(".cs-popup-container");if(r){const t=r.data("csPromoid");t&&o.sendAnalytics(t,s)}switch(n){case"content":e.preventDefault(),e.stopPropagation(),i.closest("[data-current-action]").attr("data-current-action",s);break;case"close":e.preventDefault()}}))},sendAnalytics(t,e){const o=new CustomEvent("icPromoAnalyticsPopup",{detail:{popupID:t,event:`${e}-action`}});document.body.dispatchEvent(o)},stop(){},restart(){}},i.inherits(e),e[o]=i,e.Plugin.create(o),e.Plugin.autoload(o)}(jQuery,CSPROMO)}},e={};function o(i){var n=e[i];if(void 0!==n)return n.exports;var s=e[i]={exports:{}};return t[i](s,s.exports,o),s.exports}o.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})};var i={};(()=>{"use strict";o.r(i),function(t,e){const o="button",i=function(){this.namespace=o,this.defaults={inEditor:!1},e.apply(this,arguments),this.start()};i.prototype={start(){const e=this;t(".cs-popup-coupon").on("click",(function(o){if(o.preventDefault(),!0===e.opts.inEditor||(()=>{const t=window.location.search;return!!(t.includes("kubio-random=")||t.includes("kubio-preview=")||t.includes("__iconvert-promoter-preview="))})())return!1;const i=t(this),n=i.attr("data-coupon");n?t.ajax({url:cs_promo_settings.ajax_url,type:"POST",data:{action:"iconvertpr_apply_coupon",coupon_code:n},success(e){"error"===e.data.status?(console.log("Error code:",e.data.code),"not_valid"===e.data.code?i.html("Coupon code not valid"):i.html("Error")):"applied"===e.data.code?(t("[name='update_cart']").prop("disabled",!1).trigger("click"),t(document.body).trigger("update_checkout"),e.data.checkout_url&&window.location.replace(e.data.checkout_url)):"already_applied"===e.data.code&&i.html("Coupon #"+n+" already applied")}}):console.log("Missing coupon code")}))},stop(){},restart(){}},i.inherits(e),e[o]=i,e.Plugin.create(o),e.Plugin.autoload(o)}(jQuery,CSPROMO),window.wp.i18n,function(t,e){const o="subscribe",i=function(){this.namespace=o,this.defaults={inEditor:!1},e.apply(this,arguments),!1===this.opts.inEditor&&this.start()};i.prototype={start(){if(!1===this.opts.inEditor){const e=this.$element.find("form"),o=this,i=this.$element.parents(".cs-popup-container"),n=this.isPreviewPage();e.submit((function(s){s.preventDefault();const r=e.attr("data-success-action"),a=i.data("cs-promoid"),c=()=>{switch(r){case"closePopup":if(n)return void t(window).trigger("iconvert-promo-box-message",{message:"This popup is set to close after subscribing,<br/>but in preview mode the functionality is disabled."});o.closePopup(a);break;case"openPopup":if(n)return void t(window).trigger("iconvert-promo-box-message",{message:"This popup is set to open another popup after subscribing,<br/>but in preview mode the functionality is disabled."});const i=e.attr("data-open-popup");o.closePopup(a),o.openPopup(i);break;case"redirect":const s=decodeURIComponent(e.attr("data-redirect"));if(n)return void t(window).trigger("iconvert-promo-box-message",{message:`Normally the popup will redirect to <strong style="font-weight:700;color:#2271b1">${s}</strong>,<br/>but in preview mode, the redirects are blocked.`});const r=e.attr("data-window");o.redirectTo(s,r);break;case"customContent":e.slideUp(),e.siblings(".wp-block-cspromo-subscribe__successContainer").slideDown();break;default:o.showNotice(e),o.hideFormInputs(e),n&&t(window).trigger("iconvert-promo-box-message",{message:"This popup is in preview mode, so the form will not submit.<br/>The success message is shown for demonstration purposes."})}};if(e.attr("data-form-preview"))return c();const u=e.attr("data-formid");t.ajax({url:cs_promo_settings.ajax_url,type:"POST",data:{fields:{email:e.find('input[name="email"]').val(),name:e.find('input[name="name"]').val(),first_name:e.find('[name="first-name"]').val(),popupID:a},cspromo_wpnonce:window.icPromoPopupsData?.subscribe_nonces?.[a]?.[u]||"",listID:u,action:"iconvertpr_subscribe_email_to_list",visitor_id:window.icPromoPopupsData?.visitorId||""},success(o){const i=o.data.status;e.find(".subscribenotices").hide(),"success"===i&&(t(document).trigger("iconvert_email_subscribed",{popupID:a}),c()),"error"===i&&e.find('.subscribenotices[data-fieldtype="error"]').show(),"info"===i&&e.find('.subscribenotices[data-fieldtype="info"]').show()}})}))}else this.$element.find("form").submit((function(t){t.preventDefault()}))},hideFormInputs(t){t.find(".iconvert-subscribe-field").fadeOut()},showNotice(t){t.find('.subscribenotices[data-fieldtype="success"]').show(),t.trigger("reset")},closePopup(t){const e=new CustomEvent("closePopup",{detail:{popupID:t}});document.body.dispatchEvent(e)},openPopup(t){const e=new CustomEvent("openPopup",{detail:{popupID:t}});document.body.dispatchEvent(e)},redirectTo(t,e){"sameWindow"===e?window.location.href=t:window.open(t,"_blank")},stop(){},restart(){this.opts.inEditor},isPreviewPage:()=>!!window.location.search.includes("__iconvert-promoter-preview=")},i.inherits(e),e[o]=i,e.Plugin.create(o),e.Plugin.autoload(o)}(jQuery,CSPROMO),o(4984),o(9985);try{CSPROMO.Plugin.init()}catch(t){}})(),(this.cspromo=this.cspromo||{}).frontend=i})();

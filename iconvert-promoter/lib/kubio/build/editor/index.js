(()=>{var e={1874:e=>{e.exports='<!DOCTYPE html> <html lang="en-US"> <head> <title>Kubio Loader</title> <style>:root{--logo-size:120px;--logo-color:#a4afb7;--bg-color:#f1f3f5}body,html{background:var(--bg-color)}body,body *,html{margin:0;padding:0;box-sizing:border-box}.content{display:flex;flex-direction:column;align-items:center;justify-items:center;justify-content:center;position:fixed;left:0;top:0;width:100vw;height:100vh}.container{text-align:center}.message{font-size:1.2rem;color:#15192b;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Oxygen-Sans,Ubuntu,Cantarell,"Helvetica Neue",sans-serif;margin:1em}.hide{display:none}.loader{--size:calc(var(--logo-size) * 0.8);width:var(--size);height:var(--size);border:clamp(5px,calc(var(--logo-size) * .1),8px) solid var(--logo-color);border-radius:50%;display:inline-block;box-sizing:border-box;position:relative;animation:pulse 1s linear infinite}.loader:after{content:"";position:absolute;width:var(--size);height:var(--size);border:clamp(5px,calc(var(--logo-size) * .1),8px) solid var(--logo-color);border-radius:50%;display:inline-block;box-sizing:border-box;left:50%;top:50%;transform:translate(-50%,-50%);animation:scaleUp 1s linear infinite}@keyframes scaleUp{0%{transform:translate(-50%,-50%) scale(0)}100%,60%{transform:translate(-50%,-50%) scale(1)}}@keyframes pulse{0%,100%,60%{transform:scale(1)}80%{transform:scale(1.2)}}</style> </head> <body> <div class="content"> <div class="container"> <span class="loader"></span> <p class="message hide"></p> </div> </div> <script>var search=new URLSearchParams(window.location.search),colorSearchMap={color:"--logo-color",size:"--logo-size","bg-color":"--bg-color"};Object.keys(colorSearchMap).forEach(e=>{var o=search.get(e);o&&document.documentElement.style.setProperty(colorSearchMap[e],o)});var message=search.get("message");message&&(document.querySelector(".message").innerHTML=message,document.querySelector(".message").classList.remove("hide"))<\/script> </body> </html> '},9457:e=>{e.exports='<!DOCTYPE html> <html lang="en-US"> <head> <title>Kubio Loader</title> <style>:root{--logo-size:120px;--logo-color:#a4afb7;--bg-color:#f1f3f5}body,html{background:var(--bg-color)}body,body *,html{margin:0;padding:0;box-sizing:border-box}.content{display:flex;flex-direction:column;align-items:center;justify-items:center;justify-content:center;position:fixed;left:0;top:0;width:100vw;height:100vh}.container{text-align:center}.message{font-size:1.2rem;color:#15192b;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Oxygen-Sans,Ubuntu,Cantarell,"Helvetica Neue",sans-serif;margin:1em}.hide{display:none}.loader{--size:calc(var(--logo-size) * 0.8);width:var(--size);height:var(--size);border:clamp(5px,calc(var(--logo-size) * .1),8px) solid var(--logo-color);border-radius:50%;display:inline-block;box-sizing:border-box;position:relative;animation:pulse 1s linear infinite}.loader:after{content:"";position:absolute;width:var(--size);height:var(--size);border:clamp(5px,calc(var(--logo-size) * .1),8px) solid var(--logo-color);border-radius:50%;display:inline-block;box-sizing:border-box;left:50%;top:50%;transform:translate(-50%,-50%);animation:scaleUp 1s linear infinite}@keyframes scaleUp{0%{transform:translate(-50%,-50%) scale(0)}100%,60%{transform:translate(-50%,-50%) scale(1)}}@keyframes pulse{0%,100%,60%{transform:scale(1)}80%{transform:scale(1.2)}}</style> </head> <body> <div class="content"> <div class="container"> <span class="loader"></span> <p class="message hide"></p> </div> </div> <script>var search=new URLSearchParams(window.location.search),colorSearchMap={color:"--logo-color",size:"--logo-size","bg-color":"--bg-color"};Object.keys(colorSearchMap).forEach(e=>{var o=search.get(e);o&&document.documentElement.style.setProperty(colorSearchMap[e],o)});var message=search.get("message");message&&(document.querySelector(".message").innerHTML=message,document.querySelector(".message").classList.remove("hide"))<\/script> </body> </html> '},1143:e=>{"use strict";e.exports=function(e,t,n,o,i,r,s,a){if(!e){var l;if(void 0===t)l=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var c=[n,o,i,r,s,a],u=0;(l=new Error(t.replace(/%s/g,(function(){return c[u++]})))).name="Invariant Violation"}throw l.framesToPop=1,l}}},2703:(e,t,n)=>{"use strict";var o=n(414);function i(){}function r(){}r.resetWarningCache=i,e.exports=function(){function e(e,t,n,i,r,s){if(s!==o){var a=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw a.name="Invariant Violation",a}}function t(){return e}e.isRequired=e;var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:r,resetWarningCache:i};return n.PropTypes=n,n}},5697:(e,t,n)=>{e.exports=n(2703)()},414:e=>{"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},9590:e=>{var t="undefined"!=typeof Element,n="function"==typeof Map,o="function"==typeof Set,i="function"==typeof ArrayBuffer&&!!ArrayBuffer.isView;function r(e,s){if(e===s)return!0;if(e&&s&&"object"==typeof e&&"object"==typeof s){if(e.constructor!==s.constructor)return!1;var a,l,c,u;if(Array.isArray(e)){if((a=e.length)!=s.length)return!1;for(l=a;0!=l--;)if(!r(e[l],s[l]))return!1;return!0}if(n&&e instanceof Map&&s instanceof Map){if(e.size!==s.size)return!1;for(u=e.entries();!(l=u.next()).done;)if(!s.has(l.value[0]))return!1;for(u=e.entries();!(l=u.next()).done;)if(!r(l.value[1],s.get(l.value[0])))return!1;return!0}if(o&&e instanceof Set&&s instanceof Set){if(e.size!==s.size)return!1;for(u=e.entries();!(l=u.next()).done;)if(!s.has(l.value[0]))return!1;return!0}if(i&&ArrayBuffer.isView(e)&&ArrayBuffer.isView(s)){if((a=e.length)!=s.length)return!1;for(l=a;0!=l--;)if(e[l]!==s[l])return!1;return!0}if(e.constructor===RegExp)return e.source===s.source&&e.flags===s.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===s.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===s.toString();if((a=(c=Object.keys(e)).length)!==Object.keys(s).length)return!1;for(l=a;0!=l--;)if(!Object.prototype.hasOwnProperty.call(s,c[l]))return!1;if(t&&e instanceof Element)return!1;for(l=a;0!=l--;)if(("_owner"!==c[l]&&"__v"!==c[l]&&"__o"!==c[l]||!e.$$typeof)&&!r(e[c[l]],s[c[l]]))return!1;return!0}return e!=e&&s!=s}e.exports=function(e,t){try{return r(e,t)}catch(e){if((e.message||"").match(/stack|recursion/i))return console.warn("react-fast-compare cannot handle circular refs"),!1;throw e}}},5251:(e,t,n)=>{"use strict";var o=n(9196),i=Symbol.for("react.element"),r=Symbol.for("react.fragment"),s=Object.prototype.hasOwnProperty,a=o.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var o,r={},c=null,u=null;for(o in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(u=t.ref),t)s.call(t,o)&&!l.hasOwnProperty(o)&&(r[o]=t[o]);if(e&&e.defaultProps)for(o in t=e.defaultProps)void 0===r[o]&&(r[o]=t[o]);return{$$typeof:i,type:e,key:c,ref:u,props:r,_owner:a.current}}t.Fragment=r,t.jsx=c,t.jsxs=c},5893:(e,t,n)=>{"use strict";e.exports=n(5251)},4670:(e,t,n)=>{"use strict";e.exports=n(5607)},9829:(e,t,n)=>{"use strict";var o,i,r,s=n(8946),a="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ_-";function l(){r=!1}function c(e){if(e){if(e!==o){if(64!==e.length)throw new Error("Custom alphabet for shortid must be 64 unique characters. You submitted "+e.length+" characters: "+e);var t=e.split("").filter((function(e,t,n){return t!==n.lastIndexOf(e)}));if(t.length)throw new Error("Custom alphabet for shortid must be 64 unique characters. These characters were not unique: "+t.join(", "));o=e,l()}}else o!==a&&(o=a,l())}function u(){return r||(r=function(){o||c(a);for(var e,t=o.split(""),n=[],i=s.nextValue();t.length>0;)i=s.nextValue(),e=Math.floor(i*t.length),n.push(t.splice(e,1)[0]);return n.join("")}())}e.exports={get:function(){return o||a},characters:function(e){return c(e),o},seed:function(e){s.seed(e),i!==e&&(l(),i=e)},lookup:function(e){return u()[e]},shuffled:u}},480:(e,t,n)=>{"use strict";var o,i,r=n(8416);n(9829),e.exports=function(e){var t="",n=Math.floor(.001*(Date.now()-1567752802062));return n===i?o++:(o=0,i=n),t+=r(7),t+=r(e),o>0&&(t+=r(o)),t+r(n)}},8416:(e,t,n)=>{"use strict";var o=n(9829),i=n(3766),r=n(296);e.exports=function(e){for(var t,n=0,s="";!t;)s+=r(i,o.get(),1),t=e<Math.pow(16,n+1),n++;return s}},5607:(e,t,n)=>{"use strict";var o=n(9829),i=n(480),r=n(1082),s=n(5636)||0;function a(){return i(s)}e.exports=a,e.exports.generate=a,e.exports.seed=function(t){return o.seed(t),e.exports},e.exports.worker=function(t){return s=t,e.exports},e.exports.characters=function(e){return void 0!==e&&o.characters(e),o.shuffled()},e.exports.isValid=r},1082:(e,t,n)=>{"use strict";var o=n(9829);e.exports=function(e){return!(!e||"string"!=typeof e||e.length<6||new RegExp("[^"+o.get().replace(/[|\\{}()[\]^$+*?.-]/g,"\\$&")+"]").test(e))}},3766:e=>{"use strict";var t,n="object"==typeof window&&(window.crypto||window.msCrypto);t=n&&n.getRandomValues?function(e){return n.getRandomValues(new Uint8Array(e))}:function(e){for(var t=[],n=0;n<e;n++)t.push(Math.floor(256*Math.random()));return t},e.exports=t},8946:e=>{"use strict";var t=1;e.exports={nextValue:function(){return(t=(9301*t+49297)%233280)/233280},seed:function(e){t=e}}},5636:e=>{"use strict";e.exports=0},296:e=>{e.exports=function(e,t,n){for(var o=(2<<Math.log(t.length-1)/Math.LN2)-1,i=-~(1.6*o*n/t.length),r="";;)for(var s=e(i),a=i;a--;)if((r+=t[s[a]&o]||"").length===+n)return r}},989:(e,t,n)=>{e.exports=n(3268)},3268:function(e,t){var n;!function(){"use strict";var o={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"Ae",Å:"A",Æ:"AE",Ç:"C",È:"E",É:"E",Ê:"E",Ë:"E",Ì:"I",Í:"I",Î:"I",Ï:"I",Ð:"D",Ñ:"N",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"Oe",Ő:"O",Ø:"O",Ù:"U",Ú:"U",Û:"U",Ü:"Ue",Ű:"U",Ý:"Y",Þ:"TH",ß:"ss",à:"a",á:"a",â:"a",ã:"a",ä:"ae",å:"a",æ:"ae",ç:"c",è:"e",é:"e",ê:"e",ë:"e",ì:"i",í:"i",î:"i",ï:"i",ð:"d",ñ:"n",ò:"o",ó:"o",ô:"o",õ:"o",ö:"oe",ő:"o",ø:"o",ù:"u",ú:"u",û:"u",ü:"ue",ű:"u",ý:"y",þ:"th",ÿ:"y",ẞ:"SS",ا:"a",أ:"a",إ:"i",آ:"aa",ؤ:"u",ئ:"e",ء:"a",ب:"b",ت:"t",ث:"th",ج:"j",ح:"h",خ:"kh",د:"d",ذ:"th",ر:"r",ز:"z",س:"s",ش:"sh",ص:"s",ض:"dh",ط:"t",ظ:"z",ع:"a",غ:"gh",ف:"f",ق:"q",ك:"k",ل:"l",م:"m",ن:"n",ه:"h",و:"w",ي:"y",ى:"a",ة:"h",ﻻ:"la",ﻷ:"laa",ﻹ:"lai",ﻵ:"laa",گ:"g",چ:"ch",پ:"p",ژ:"zh",ک:"k",ی:"y","َ":"a","ً":"an","ِ":"e","ٍ":"en","ُ":"u","ٌ":"on","ْ":"","٠":"0","١":"1","٢":"2","٣":"3","٤":"4","٥":"5","٦":"6","٧":"7","٨":"8","٩":"9","۰":"0","۱":"1","۲":"2","۳":"3","۴":"4","۵":"5","۶":"6","۷":"7","۸":"8","۹":"9",က:"k",ခ:"kh",ဂ:"g",ဃ:"ga",င:"ng",စ:"s",ဆ:"sa",ဇ:"z",စျ:"za",ည:"ny",ဋ:"t",ဌ:"ta",ဍ:"d",ဎ:"da",ဏ:"na",တ:"t",ထ:"ta",ဒ:"d",ဓ:"da",န:"n",ပ:"p",ဖ:"pa",ဗ:"b",ဘ:"ba",မ:"m",ယ:"y",ရ:"ya",လ:"l",ဝ:"w",သ:"th",ဟ:"h",ဠ:"la",အ:"a","ြ":"y","ျ":"ya","ွ":"w","ြွ":"yw","ျွ":"ywa","ှ":"h",ဧ:"e","၏":"-e",ဣ:"i",ဤ:"-i",ဉ:"u",ဦ:"-u",ဩ:"aw",သြော:"aw",ဪ:"aw","၀":"0","၁":"1","၂":"2","၃":"3","၄":"4","၅":"5","၆":"6","၇":"7","၈":"8","၉":"9","္":"","့":"","း":"",č:"c",ď:"d",ě:"e",ň:"n",ř:"r",š:"s",ť:"t",ů:"u",ž:"z",Č:"C",Ď:"D",Ě:"E",Ň:"N",Ř:"R",Š:"S",Ť:"T",Ů:"U",Ž:"Z",ހ:"h",ށ:"sh",ނ:"n",ރ:"r",ބ:"b",ޅ:"lh",ކ:"k",އ:"a",ވ:"v",މ:"m",ފ:"f",ދ:"dh",ތ:"th",ލ:"l",ގ:"g",ޏ:"gn",ސ:"s",ޑ:"d",ޒ:"z",ޓ:"t",ޔ:"y",ޕ:"p",ޖ:"j",ޗ:"ch",ޘ:"tt",ޙ:"hh",ޚ:"kh",ޛ:"th",ޜ:"z",ޝ:"sh",ޞ:"s",ޟ:"d",ޠ:"t",ޡ:"z",ޢ:"a",ޣ:"gh",ޤ:"q",ޥ:"w","ަ":"a","ާ":"aa","ި":"i","ީ":"ee","ު":"u","ޫ":"oo","ެ":"e","ޭ":"ey","ޮ":"o","ޯ":"oa","ް":"",ა:"a",ბ:"b",გ:"g",დ:"d",ე:"e",ვ:"v",ზ:"z",თ:"t",ი:"i",კ:"k",ლ:"l",მ:"m",ნ:"n",ო:"o",პ:"p",ჟ:"zh",რ:"r",ს:"s",ტ:"t",უ:"u",ფ:"p",ქ:"k",ღ:"gh",ყ:"q",შ:"sh",ჩ:"ch",ც:"ts",ძ:"dz",წ:"ts",ჭ:"ch",ხ:"kh",ჯ:"j",ჰ:"h",α:"a",β:"v",γ:"g",δ:"d",ε:"e",ζ:"z",η:"i",θ:"th",ι:"i",κ:"k",λ:"l",μ:"m",ν:"n",ξ:"ks",ο:"o",π:"p",ρ:"r",σ:"s",τ:"t",υ:"y",φ:"f",χ:"x",ψ:"ps",ω:"o",ά:"a",έ:"e",ί:"i",ό:"o",ύ:"y",ή:"i",ώ:"o",ς:"s",ϊ:"i",ΰ:"y",ϋ:"y",ΐ:"i",Α:"A",Β:"B",Γ:"G",Δ:"D",Ε:"E",Ζ:"Z",Η:"I",Θ:"TH",Ι:"I",Κ:"K",Λ:"L",Μ:"M",Ν:"N",Ξ:"KS",Ο:"O",Π:"P",Ρ:"R",Σ:"S",Τ:"T",Υ:"Y",Φ:"F",Χ:"X",Ψ:"PS",Ω:"O",Ά:"A",Έ:"E",Ί:"I",Ό:"O",Ύ:"Y",Ή:"I",Ώ:"O",Ϊ:"I",Ϋ:"Y",ā:"a",ē:"e",ģ:"g",ī:"i",ķ:"k",ļ:"l",ņ:"n",ū:"u",Ā:"A",Ē:"E",Ģ:"G",Ī:"I",Ķ:"k",Ļ:"L",Ņ:"N",Ū:"U",Ќ:"Kj",ќ:"kj",Љ:"Lj",љ:"lj",Њ:"Nj",њ:"nj",Тс:"Ts",тс:"ts",ą:"a",ć:"c",ę:"e",ł:"l",ń:"n",ś:"s",ź:"z",ż:"z",Ą:"A",Ć:"C",Ę:"E",Ł:"L",Ń:"N",Ś:"S",Ź:"Z",Ż:"Z",Є:"Ye",І:"I",Ї:"Yi",Ґ:"G",є:"ye",і:"i",ї:"yi",ґ:"g",ă:"a",Ă:"A",ș:"s",Ș:"S",ț:"t",Ț:"T",ţ:"t",Ţ:"T",а:"a",б:"b",в:"v",г:"g",д:"d",е:"e",ё:"yo",ж:"zh",з:"z",и:"i",й:"i",к:"k",л:"l",м:"m",н:"n",о:"o",п:"p",р:"r",с:"s",т:"t",у:"u",ф:"f",х:"kh",ц:"c",ч:"ch",ш:"sh",щ:"sh",ъ:"",ы:"y",ь:"",э:"e",ю:"yu",я:"ya",А:"A",Б:"B",В:"V",Г:"G",Д:"D",Е:"E",Ё:"Yo",Ж:"Zh",З:"Z",И:"I",Й:"I",К:"K",Л:"L",М:"M",Н:"N",О:"O",П:"P",Р:"R",С:"S",Т:"T",У:"U",Ф:"F",Х:"Kh",Ц:"C",Ч:"Ch",Ш:"Sh",Щ:"Sh",Ъ:"",Ы:"Y",Ь:"",Э:"E",Ю:"Yu",Я:"Ya",ђ:"dj",ј:"j",ћ:"c",џ:"dz",Ђ:"Dj",Ј:"j",Ћ:"C",Џ:"Dz",ľ:"l",ĺ:"l",ŕ:"r",Ľ:"L",Ĺ:"L",Ŕ:"R",ş:"s",Ş:"S",ı:"i",İ:"I",ğ:"g",Ğ:"G",ả:"a",Ả:"A",ẳ:"a",Ẳ:"A",ẩ:"a",Ẩ:"A",đ:"d",Đ:"D",ẹ:"e",Ẹ:"E",ẽ:"e",Ẽ:"E",ẻ:"e",Ẻ:"E",ế:"e",Ế:"E",ề:"e",Ề:"E",ệ:"e",Ệ:"E",ễ:"e",Ễ:"E",ể:"e",Ể:"E",ỏ:"o",ọ:"o",Ọ:"o",ố:"o",Ố:"O",ồ:"o",Ồ:"O",ổ:"o",Ổ:"O",ộ:"o",Ộ:"O",ỗ:"o",Ỗ:"O",ơ:"o",Ơ:"O",ớ:"o",Ớ:"O",ờ:"o",Ờ:"O",ợ:"o",Ợ:"O",ỡ:"o",Ỡ:"O",Ở:"o",ở:"o",ị:"i",Ị:"I",ĩ:"i",Ĩ:"I",ỉ:"i",Ỉ:"i",ủ:"u",Ủ:"U",ụ:"u",Ụ:"U",ũ:"u",Ũ:"U",ư:"u",Ư:"U",ứ:"u",Ứ:"U",ừ:"u",Ừ:"U",ự:"u",Ự:"U",ữ:"u",Ữ:"U",ử:"u",Ử:"ư",ỷ:"y",Ỷ:"y",ỳ:"y",Ỳ:"Y",ỵ:"y",Ỵ:"Y",ỹ:"y",Ỹ:"Y",ạ:"a",Ạ:"A",ấ:"a",Ấ:"A",ầ:"a",Ầ:"A",ậ:"a",Ậ:"A",ẫ:"a",Ẫ:"A",ắ:"a",Ắ:"A",ằ:"a",Ằ:"A",ặ:"a",Ặ:"A",ẵ:"a",Ẵ:"A","⓪":"0","①":"1","②":"2","③":"3","④":"4","⑤":"5","⑥":"6","⑦":"7","⑧":"8","⑨":"9","⑩":"10","⑪":"11","⑫":"12","⑬":"13","⑭":"14","⑮":"15","⑯":"16","⑰":"17","⑱":"18","⑲":"18","⑳":"18","⓵":"1","⓶":"2","⓷":"3","⓸":"4","⓹":"5","⓺":"6","⓻":"7","⓼":"8","⓽":"9","⓾":"10","⓿":"0","⓫":"11","⓬":"12","⓭":"13","⓮":"14","⓯":"15","⓰":"16","⓱":"17","⓲":"18","⓳":"19","⓴":"20","Ⓐ":"A","Ⓑ":"B","Ⓒ":"C","Ⓓ":"D","Ⓔ":"E","Ⓕ":"F","Ⓖ":"G","Ⓗ":"H","Ⓘ":"I","Ⓙ":"J","Ⓚ":"K","Ⓛ":"L","Ⓜ":"M","Ⓝ":"N","Ⓞ":"O","Ⓟ":"P","Ⓠ":"Q","Ⓡ":"R","Ⓢ":"S","Ⓣ":"T","Ⓤ":"U","Ⓥ":"V","Ⓦ":"W","Ⓧ":"X","Ⓨ":"Y","Ⓩ":"Z","ⓐ":"a","ⓑ":"b","ⓒ":"c","ⓓ":"d","ⓔ":"e","ⓕ":"f","ⓖ":"g","ⓗ":"h","ⓘ":"i","ⓙ":"j","ⓚ":"k","ⓛ":"l","ⓜ":"m","ⓝ":"n","ⓞ":"o","ⓟ":"p","ⓠ":"q","ⓡ":"r","ⓢ":"s","ⓣ":"t","ⓤ":"u","ⓦ":"v","ⓥ":"w","ⓧ":"x","ⓨ":"y","ⓩ":"z","“":'"',"”":'"',"‘":"'","’":"'","∂":"d",ƒ:"f","™":"(TM)","©":"(C)",œ:"oe",Œ:"OE","®":"(R)","†":"+","℠":"(SM)","…":"...","˚":"o",º:"o",ª:"a","•":"*","၊":",","။":".",$:"USD","€":"EUR","₢":"BRN","₣":"FRF","£":"GBP","₤":"ITL","₦":"NGN","₧":"ESP","₩":"KRW","₪":"ILS","₫":"VND","₭":"LAK","₮":"MNT","₯":"GRD","₱":"ARS","₲":"PYG","₳":"ARA","₴":"UAH","₵":"GHS","¢":"cent","¥":"CNY",元:"CNY",円:"YEN","﷼":"IRR","₠":"EWE","฿":"THB","₨":"INR","₹":"INR","₰":"PF","₺":"TRY","؋":"AFN","₼":"AZN",лв:"BGN","៛":"KHR","₡":"CRC","₸":"KZT",ден:"MKD",zł:"PLN","₽":"RUB","₾":"GEL"},i=["်","ް"],r={"ာ":"a","ါ":"a","ေ":"e","ဲ":"e","ိ":"i","ီ":"i","ို":"o","ု":"u","ူ":"u","ေါင်":"aung","ော":"aw","ော်":"aw","ေါ":"aw","ေါ်":"aw","်":"်",က်:"et","ိုက်":"aik","ောက်":"auk",င်:"in","ိုင်":"aing","ောင်":"aung",စ်:"it",ည်:"i",တ်:"at","ိတ်":"eik","ုတ်":"ok","ွတ်":"ut","ေတ်":"it",ဒ်:"d","ိုဒ်":"ok","ုဒ်":"ait",န်:"an","ာန်":"an","ိန်":"ein","ုန်":"on","ွန်":"un",ပ်:"at","ိပ်":"eik","ုပ်":"ok","ွပ်":"ut",န်ုပ်:"nub",မ်:"an","ိမ်":"ein","ုမ်":"on","ွမ်":"un",ယ်:"e","ိုလ်":"ol",ဉ်:"in","ံ":"an","ိံ":"ein","ုံ":"on","ައް":"ah","ަށް":"ah"},s={en:{},az:{ç:"c",ə:"e",ğ:"g",ı:"i",ö:"o",ş:"s",ü:"u",Ç:"C",Ə:"E",Ğ:"G",İ:"I",Ö:"O",Ş:"S",Ü:"U"},cs:{č:"c",ď:"d",ě:"e",ň:"n",ř:"r",š:"s",ť:"t",ů:"u",ž:"z",Č:"C",Ď:"D",Ě:"E",Ň:"N",Ř:"R",Š:"S",Ť:"T",Ů:"U",Ž:"Z"},fi:{ä:"a",Ä:"A",ö:"o",Ö:"O"},hu:{ä:"a",Ä:"A",ö:"o",Ö:"O",ü:"u",Ü:"U",ű:"u",Ű:"U"},lt:{ą:"a",č:"c",ę:"e",ė:"e",į:"i",š:"s",ų:"u",ū:"u",ž:"z",Ą:"A",Č:"C",Ę:"E",Ė:"E",Į:"I",Š:"S",Ų:"U",Ū:"U"},lv:{ā:"a",č:"c",ē:"e",ģ:"g",ī:"i",ķ:"k",ļ:"l",ņ:"n",š:"s",ū:"u",ž:"z",Ā:"A",Č:"C",Ē:"E",Ģ:"G",Ī:"i",Ķ:"k",Ļ:"L",Ņ:"N",Š:"S",Ū:"u",Ž:"Z"},pl:{ą:"a",ć:"c",ę:"e",ł:"l",ń:"n",ó:"o",ś:"s",ź:"z",ż:"z",Ą:"A",Ć:"C",Ę:"e",Ł:"L",Ń:"N",Ó:"O",Ś:"S",Ź:"Z",Ż:"Z"},sv:{ä:"a",Ä:"A",ö:"o",Ö:"O"},sk:{ä:"a",Ä:"A"},sr:{љ:"lj",њ:"nj",Љ:"Lj",Њ:"Nj",đ:"dj",Đ:"Dj"},tr:{Ü:"U",Ö:"O",ü:"u",ö:"o"}},a={ar:{"∆":"delta","∞":"la-nihaya","♥":"hob","&":"wa","|":"aw","<":"aqal-men",">":"akbar-men","∑":"majmou","¤":"omla"},az:{},ca:{"∆":"delta","∞":"infinit","♥":"amor","&":"i","|":"o","<":"menys que",">":"mes que","∑":"suma dels","¤":"moneda"},cs:{"∆":"delta","∞":"nekonecno","♥":"laska","&":"a","|":"nebo","<":"mensi nez",">":"vetsi nez","∑":"soucet","¤":"mena"},de:{"∆":"delta","∞":"unendlich","♥":"Liebe","&":"und","|":"oder","<":"kleiner als",">":"groesser als","∑":"Summe von","¤":"Waehrung"},dv:{"∆":"delta","∞":"kolunulaa","♥":"loabi","&":"aai","|":"noonee","<":"ah vure kuda",">":"ah vure bodu","∑":"jumula","¤":"faisaa"},en:{"∆":"delta","∞":"infinity","♥":"love","&":"and","|":"or","<":"less than",">":"greater than","∑":"sum","¤":"currency"},es:{"∆":"delta","∞":"infinito","♥":"amor","&":"y","|":"u","<":"menos que",">":"mas que","∑":"suma de los","¤":"moneda"},fa:{"∆":"delta","∞":"bi-nahayat","♥":"eshgh","&":"va","|":"ya","<":"kamtar-az",">":"bishtar-az","∑":"majmooe","¤":"vahed"},fi:{"∆":"delta","∞":"aarettomyys","♥":"rakkaus","&":"ja","|":"tai","<":"pienempi kuin",">":"suurempi kuin","∑":"summa","¤":"valuutta"},fr:{"∆":"delta","∞":"infiniment","♥":"Amour","&":"et","|":"ou","<":"moins que",">":"superieure a","∑":"somme des","¤":"monnaie"},ge:{"∆":"delta","∞":"usasruloba","♥":"siqvaruli","&":"da","|":"an","<":"naklebi",">":"meti","∑":"jami","¤":"valuta"},gr:{},hu:{"∆":"delta","∞":"vegtelen","♥":"szerelem","&":"es","|":"vagy","<":"kisebb mint",">":"nagyobb mint","∑":"szumma","¤":"penznem"},it:{"∆":"delta","∞":"infinito","♥":"amore","&":"e","|":"o","<":"minore di",">":"maggiore di","∑":"somma","¤":"moneta"},lt:{"∆":"delta","∞":"begalybe","♥":"meile","&":"ir","|":"ar","<":"maziau nei",">":"daugiau nei","∑":"suma","¤":"valiuta"},lv:{"∆":"delta","∞":"bezgaliba","♥":"milestiba","&":"un","|":"vai","<":"mazak neka",">":"lielaks neka","∑":"summa","¤":"valuta"},my:{"∆":"kwahkhyaet","∞":"asaonasme","♥":"akhyait","&":"nhin","|":"tho","<":"ngethaw",">":"kyithaw","∑":"paungld","¤":"ngwekye"},mk:{},nl:{"∆":"delta","∞":"oneindig","♥":"liefde","&":"en","|":"of","<":"kleiner dan",">":"groter dan","∑":"som","¤":"valuta"},pl:{"∆":"delta","∞":"nieskonczonosc","♥":"milosc","&":"i","|":"lub","<":"mniejsze niz",">":"wieksze niz","∑":"suma","¤":"waluta"},pt:{"∆":"delta","∞":"infinito","♥":"amor","&":"e","|":"ou","<":"menor que",">":"maior que","∑":"soma","¤":"moeda"},ro:{"∆":"delta","∞":"infinit","♥":"dragoste","&":"si","|":"sau","<":"mai mic ca",">":"mai mare ca","∑":"suma","¤":"valuta"},ru:{"∆":"delta","∞":"beskonechno","♥":"lubov","&":"i","|":"ili","<":"menshe",">":"bolshe","∑":"summa","¤":"valjuta"},sk:{"∆":"delta","∞":"nekonecno","♥":"laska","&":"a","|":"alebo","<":"menej ako",">":"viac ako","∑":"sucet","¤":"mena"},sr:{},tr:{"∆":"delta","∞":"sonsuzluk","♥":"ask","&":"ve","|":"veya","<":"kucuktur",">":"buyuktur","∑":"toplam","¤":"para birimi"},uk:{"∆":"delta","∞":"bezkinechnist","♥":"lubov","&":"i","|":"abo","<":"menshe",">":"bilshe","∑":"suma","¤":"valjuta"},vn:{"∆":"delta","∞":"vo cuc","♥":"yeu","&":"va","|":"hoac","<":"nho hon",">":"lon hon","∑":"tong","¤":"tien te"}},l=[";","?",":","@","&","=","+","$",",","/"].join(""),c=[";","?",":","@","&","=","+","$",","].join(""),u=[".","!","~","*","'","(",")"].join(""),d=function(e,t){var n,d,m,g,b,f,v,_,y,x,k,S,E,w,T="-",j="",I="",C=!0,P={},A="";if("string"!=typeof e)return"";if("string"==typeof t&&(T=t),v=a.en,_=s.en,"object"==typeof t)for(k in n=t.maintainCase||!1,P=t.custom&&"object"==typeof t.custom?t.custom:P,m=+t.truncate>1&&t.truncate||!1,g=t.uric||!1,b=t.uricNoSlash||!1,f=t.mark||!1,C=!1!==t.symbols&&!1!==t.lang,T=t.separator||T,g&&(A+=l),b&&(A+=c),f&&(A+=u),v=t.lang&&a[t.lang]&&C?a[t.lang]:C?a.en:{},_=t.lang&&s[t.lang]?s[t.lang]:!1===t.lang||!0===t.lang?{}:s.en,t.titleCase&&"number"==typeof t.titleCase.length&&Array.prototype.toString.call(t.titleCase)?(t.titleCase.forEach((function(e){P[e+""]=e+""})),d=!0):d=!!t.titleCase,t.custom&&"number"==typeof t.custom.length&&Array.prototype.toString.call(t.custom)&&t.custom.forEach((function(e){P[e+""]=e+""})),Object.keys(P).forEach((function(t){var n;n=t.length>1?new RegExp("\\b"+p(t)+"\\b","gi"):new RegExp(p(t),"gi"),e=e.replace(n,P[t])})),P)A+=k;for(A=p(A+=T),E=!1,w=!1,x=0,S=(e=e.replace(/(^\s+|\s+$)/g,"")).length;x<S;x++)k=e[x],h(k,P)?E=!1:_[k]?(k=E&&_[k].match(/[A-Za-z0-9]/)?" "+_[k]:_[k],E=!1):k in o?(x+1<S&&i.indexOf(e[x+1])>=0?(I+=k,k=""):!0===w?(k=r[I]+o[k],I=""):k=E&&o[k].match(/[A-Za-z0-9]/)?" "+o[k]:o[k],E=!1,w=!1):k in r?(I+=k,k="",x===S-1&&(k=r[I]),w=!0):!v[k]||g&&-1!==l.indexOf(k)||b&&-1!==c.indexOf(k)?(!0===w?(k=r[I]+k,I="",w=!1):E&&(/[A-Za-z0-9]/.test(k)||j.substr(-1).match(/A-Za-z0-9]/))&&(k=" "+k),E=!1):(k=E||j.substr(-1).match(/[A-Za-z0-9]/)?T+v[k]:v[k],k+=void 0!==e[x+1]&&e[x+1].match(/[A-Za-z0-9]/)?T:"",E=!0),j+=k.replace(new RegExp("[^\\w\\s"+A+"_-]","g"),T);return d&&(j=j.replace(/(\w)(\S*)/g,(function(e,t,n){var o=t.toUpperCase()+(null!==n?n:"");return Object.keys(P).indexOf(o.toLowerCase())<0?o:o.toLowerCase()}))),j=j.replace(/\s+/g,T).replace(new RegExp("\\"+T+"+","g"),T).replace(new RegExp("(^\\"+T+"+|\\"+T+"+$)","g"),""),m&&j.length>m&&(y=j.charAt(m)===T,j=j.slice(0,m),y||(j=j.slice(0,j.lastIndexOf(T)))),n||d||(j=j.toLowerCase()),j},p=function(e){return e.replace(/[-\\^$*+?.()|[\]{}\/]/g,"\\$&")},h=function(e,t){for(var n in t)if(t[n]===e)return!0};e.exports?(e.exports=d,e.exports.createSlug=function(e){return function(t){return d(t,e)}}):void 0===(n=function(){return d}.apply(t,[]))||(e.exports=n)}()},5358:(e,t,n)=>{"use strict";Object.defineProperty(t,"Ls",{enumerable:!0,get:function(){return o.STORE_KEY}});var o=n(9527);o.STORE_KEY},9196:e=>{"use strict";e.exports=window.React},9527:e=>{"use strict";e.exports=window.kubio.constants},3967:(e,t)=>{var n;!function(){"use strict";var o={}.hasOwnProperty;function i(){for(var e="",t=0;t<arguments.length;t++){var n=arguments[t];n&&(e=s(e,r(n)))}return e}function r(e){if("string"==typeof e||"number"==typeof e)return e;if("object"!=typeof e)return"";if(Array.isArray(e))return i.apply(null,e);if(e.toString!==Object.prototype.toString&&!e.toString.toString().includes("[native code]"))return e.toString();var t="";for(var n in e)o.call(e,n)&&e[n]&&(t=s(t,n));return t}function s(e,t){return t?e?e+" "+t:e+t:e}e.exports?(i.default=i,e.exports=i):void 0===(n=function(){return i}.apply(t,[]))||(e.exports=n)}()}},t={};function n(o){var i=t[o];if(void 0!==i)return i.exports;var r=t[o]={exports:{}};return e[o].call(r.exports,r,r.exports,n),r.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var o in t)n.o(t,o)&&!n.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var o={};(()=>{"use strict";n.r(o),n.d(o,{AddBlockButton:()=>Ae,ClassicThemeBlockEditor:()=>dr,Editor:()=>xa,EditorComponents:()=>ac,EntitiesSavedStates:()=>vr,FSEThemeBlockEditor:()=>ur,GlobalStylesRenderer:()=>fa,Header:()=>Ts,HeaderComponents:()=>sc,HoveredSectionProvider:()=>Wt,InserterSidebar:()=>Ie,KeyboardShortcuts:()=>Is,KubioBlinkingLogo:()=>Zi,KubioBlinkingLogoIframe:()=>Xi,KubioBlogTemplate:()=>Cs,ListViewSidebar:()=>da,MainDashboardButton:()=>Ns,NavigateToLink:()=>_e,NavigationPanelPreviewFill:()=>aa,NavigationPanelPreviewSlot:()=>la,NavigationSidebar:()=>ca,NavigationSidebarComponents:()=>cc,NavigationSidebarConstants:()=>i,Notices:()=>ua,STORE_KEY:()=>g.STORE_KEY,SaveButton:()=>Wr,Sidebar:()=>Oi,SidebarArea:()=>Fe,SidebarComplementaryAreaFills:()=>Ai,SidebarComponents:()=>lc,SidebarInspectorFill:()=>Ri,SubSidebarArea:()=>Oe,TemplateDetails:()=>nc,TemplatePartConverter:()=>rc,URLQueryController:()=>pa,__experimentalFullscreenModeClose:()=>dc,initialize:()=>pc,registerEditSiteStore:()=>tc,registerSidebarArea:()=>Le,registerSubSidebarArea:()=>De,useBlockSelectionListener:()=>fe,useHoveredSection:()=>zt,usePageTitle:()=>He,useSidebarTabAutochange:()=>va});var e={};n.r(e),n.d(e,{disableComplementaryArea:()=>H,enableComplementaryArea:()=>U,pinItem:()=>V,setDefaultComplementaryArea:()=>G,setFeatureDefaults:()=>Y,setFeatureValue:()=>$,toggleFeature:()=>z,unpinItem:()=>K});var t={};n.r(t),n.d(t,{getActiveComplementaryArea:()=>W,isFeatureActive:()=>Z,isItemPinned:()=>q});var i={};n.r(i),n.d(i,{CUSTOM_TEMPLATES:()=>Mr,KUBIO_TEMPLATES:()=>Lr,MENU_PAGES:()=>$r,MENU_ROOT:()=>Cr,MENU_TEMPLATES:()=>Ar,MENU_TEMPLATES_GENERAL:()=>Rr,MENU_TEMPLATES_PAGES:()=>Or,MENU_TEMPLATES_POSTS:()=>Nr,MENU_TEMPLATE_PARTS:()=>Pr,MENU_TEMPLATE_PARTS_FOOTERS:()=>Gr,MENU_TEMPLATE_PARTS_GENERAL:()=>Hr,MENU_TEMPLATE_PARTS_HEADERS:()=>Fr,MENU_TEMPLATE_PARTS_SIDEBARS:()=>Ur,SEARCH_DEBOUNCE_IN_MS:()=>Dr,TEMPLATES_GENERAL:()=>Er,TEMPLATES_NEW_OPTIONS:()=>jr,TEMPLATES_PAGES_PREFIXES:()=>Tr,TEMPLATES_POSTS_PREFIXES:()=>wr,TEMPLATES_PRIMARY:()=>xr,TEMPLATES_SECONDARY:()=>kr,TEMPLATES_TOP_LEVEL:()=>Sr,TEMPLATE_OVERRIDES:()=>Ir,TEMPLATE_PARTS_SUB_MENUS:()=>Yr,TEMPLATE_PART_AREA_FOOTER:()=>Kr,TEMPLATE_PART_AREA_HEADER:()=>Vr,TEMPLATE_PART_AREA_SIDEBAR:()=>zr,THEME_TEMPLATES:()=>Br});var r={};n.r(r),n.d(r,{__experimentalSetPreviewDeviceType:()=>Pa,addSubSidebar:()=>Va,addTemplate:()=>Ra,closeSidebar:()=>za,openInserterSidebar:()=>Ha,openNavigationPanelToMenu:()=>Da,openSidebar:()=>Ua,removeSubSidebar:()=>Ka,removeTemplate:()=>Oa,setCurrentAncestor:()=>qa,setHomeTemplateId:()=>Ma,setIsListViewOpened:()=>Za,setIsNavigationPanelOpened:()=>Fa,setKubioEditorMode:()=>Qa,setOpenInserter:()=>Wa,setPage:()=>Ba,setTemplate:()=>Aa,setTemplatePart:()=>Na,setUIVersion:()=>Xa,showHomepage:()=>La,toggleAICapabilities:()=>Ja,toggleFeature:()=>Ca,toggleGlobalStyleEditing:()=>$a,toggleGutentagDebug:()=>Ya,updateAIInfo:()=>el,updateExcludedSectionCategories:()=>tl,updateFlagSettings:()=>nl,updateSettings:()=>Ga});var s={};n.r(s),n.d(s,{__experimentalGetInsertionPoint:()=>Gl,__experimentalGetPreviewDeviceType:()=>pl,currentPageHasFSETemplate:()=>Kl,getAvailablePageTemplates:()=>Zl,getCanUserCreateMedia:()=>hl,getClassicTemplateId:()=>Xl,getCurrentAncestor:()=>Nl,getCurrentKubioTemplateSource:()=>Hl,getCurrentPageTemplate:()=>Vl,getCurrentPostId:()=>$l,getCurrentPostType:()=>zl,getEditedPostId:()=>fl,getEditedPostType:()=>bl,getEditorOpenedSidebar:()=>Ml,getEntity:()=>jl,getGlobalStyleEditingPreviousEntity:()=>Dl,getHomeTemplateId:()=>gl,getIsBlogPage:()=>Yl,getIsFrontPage:()=>Wl,getIsInnerPage:()=>ql,getIsWooCommercePage:()=>Ql,getNavigationMenu:()=>yl,getOpenedInsertedClientId:()=>Al,getOpenedInsertedShouldCloseOnSelect:()=>Ol,getOpenedInsertedShouldReplace:()=>Rl,getOpenedInserter:()=>Pl,getPage:()=>vl,getSettings:()=>ml,getShowOnFront:()=>Il,getSubSidebars:()=>Bl,getTemplateId:()=>kl,getTemplateIds:()=>wl,getTemplatePartId:()=>Sl,getTemplatePartIds:()=>Tl,getTemplateType:()=>El,getUIVersion:()=>Jl,isEditorSidebarOpened:()=>Cl,isFeatureActive:()=>dl,isGlobalStyleEditing:()=>Ll,isGutentagDebug:()=>Fl,isInserterOpened:()=>xl,isListViewOpened:()=>Ul,isNavigationOpened:()=>_l});const a=window.kubio.blockPatterns,l=window.kubio.core,c=window.wp.blockLibrary,u=window.wp.element,d=window.wp.hooks,p=window.wp.notices,h=window.lodash;var m=n.n(h),g=n(9527);const b=window.kubio.coreHooks,f=window.kubio.editorData,v=window.kubio.globalData,_=window.kubio.wpGlobalStyles,y=window.wp.blockEditor,x=window.wp.components,k=window.wp.compose,S=window.wp.coreData,E=window.wp.data,w=window.wp.editor,T=window.wp.i18n;function j(){return j=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)({}).hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},j.apply(null,arguments)}var I=n(3967),C=n.n(I),P=n(9196);const A=window.wp.primitives,R=(0,P.createElement)(A.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,P.createElement)(A.Path,{d:"M16.7 7.1l-6.3 8.5-3.3-2.5-.9 1.2 4.5 3.4L17.9 8z"})),O=(0,P.createElement)(A.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,P.createElement)(A.Path,{d:"M11.776 4.454a.25.25 0 01.448 0l2.069 4.192a.25.25 0 00.188.137l4.626.672a.25.25 0 01.139.426l-3.348 3.263a.25.25 0 00-.072.222l.79 4.607a.25.25 0 01-.362.263l-4.138-2.175a.25.25 0 00-.232 0l-4.138 2.175a.25.25 0 01-.363-.263l.79-4.607a.25.25 0 00-.071-.222L4.754 9.881a.25.25 0 01.139-.426l4.626-.672a.25.25 0 00.188-.137l2.069-4.192z"})),N=(0,P.createElement)(A.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,P.createElement)(A.Path,{fillRule:"evenodd",d:"M9.706 8.646a.25.25 0 01-.188.137l-4.626.672a.25.25 0 00-.139.427l3.348 3.262a.25.25 0 01.072.222l-.79 4.607a.25.25 0 00.362.264l4.138-2.176a.25.25 0 01.233 0l4.137 2.175a.25.25 0 00.363-.263l-.79-4.607a.25.25 0 01.072-.222l3.347-3.262a.25.25 0 00-.139-.427l-4.626-.672a.25.25 0 01-.188-.137l-2.069-4.192a.25.25 0 00-.448 0L9.706 8.646zM12 7.39l-.948 1.921a1.75 1.75 0 01-1.317.957l-2.12.308 1.534 1.495c.412.402.6.982.503 1.55l-.362 2.11 1.896-.997a1.75 1.75 0 011.629 0l1.895.997-.362-2.11a1.75 1.75 0 01.504-1.55l1.533-1.495-2.12-.308a1.75 1.75 0 01-1.317-.957L12 7.39z",clipRule:"evenodd"})),M=window.wp.viewport,B=(0,P.createElement)(A.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,P.createElement)(A.Path,{d:"M12 13.06l3.712 3.713 1.061-1.06L13.061 12l3.712-3.712-1.06-1.06L12 10.938 8.288 7.227l-1.061 1.06L10.939 12l-3.712 3.712 1.06 1.061L12 13.061z"})),L=window.wp.deprecated;var D=n.n(L);const F=window.wp.preferences,G=(e,t)=>({type:"SET_DEFAULT_COMPLEMENTARY_AREA",scope:e,area:t}),U=(e,t)=>n=>{let{registry:o,dispatch:i}=n;t&&(o.select(F.store).get(e,"isComplementaryAreaVisible")||o.dispatch(F.store).set(e,"isComplementaryAreaVisible",!0),i({type:"ENABLE_COMPLEMENTARY_AREA",scope:e,area:t}))},H=e=>t=>{let{registry:n}=t;n.select(F.store).get(e,"isComplementaryAreaVisible")&&n.dispatch(F.store).set(e,"isComplementaryAreaVisible",!1)},V=(e,t)=>n=>{let{registry:o}=n;if(!t)return;const i=o.select(F.store).get(e,"pinnedItems");!0!==(null==i?void 0:i[t])&&o.dispatch(F.store).set(e,"pinnedItems",{...i,[t]:!0})},K=(e,t)=>n=>{let{registry:o}=n;if(!t)return;const i=o.select(F.store).get(e,"pinnedItems");o.dispatch(F.store).set(e,"pinnedItems",{...i,[t]:!1})};function z(e,t){return function(n){let{registry:o}=n;D()("dispatch( 'core/interface' ).toggleFeature",{since:"6.0",alternative:"dispatch( 'core/preferences' ).toggle"}),o.dispatch(F.store).toggle(e,t)}}function $(e,t,n){return function(o){let{registry:i}=o;D()("dispatch( 'core/interface' ).setFeatureValue",{since:"6.0",alternative:"dispatch( 'core/preferences' ).set"}),i.dispatch(F.store).set(e,t,!!n)}}function Y(e,t){return function(n){let{registry:o}=n;D()("dispatch( 'core/interface' ).setFeatureDefaults",{since:"6.0",alternative:"dispatch( 'core/preferences' ).setDefaults"}),o.dispatch(F.store).setDefaults(e,t)}}const W=(0,E.createRegistrySelector)((e=>(t,n)=>{var o;const i=e(F.store).get(n,"isComplementaryAreaVisible");if(void 0!==i)return i?null==t||null===(o=t.complementaryAreas)||void 0===o?void 0:o[n]:null})),q=(0,E.createRegistrySelector)((e=>(t,n,o)=>{var i;const r=e(F.store).get(n,"pinnedItems");return null===(i=null==r?void 0:r[o])||void 0===i||i})),Z=(0,E.createRegistrySelector)((e=>(t,n,o)=>(D()("select( 'core/interface' ).isFeatureActive( scope, featureName )",{since:"6.0",alternative:"select( 'core/preferences' ).get( scope, featureName )"}),!!e(F.store).get(n,o)))),X=(0,E.combineReducers)({complementaryAreas:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_DEFAULT_COMPLEMENTARY_AREA":{const{scope:n,area:o}=t;return e[n]?e:{...e,[n]:o}}case"ENABLE_COMPLEMENTARY_AREA":{const{scope:n,area:o}=t;return{...e,[n]:o}}}return e}}),Q=(0,E.createReduxStore)("core/interface",{reducer:X,actions:e,selectors:t});(0,E.register)(Q);const J=window.wp.plugins,ee=(0,J.withPluginContext)(((e,t)=>({icon:t.icon||e.icon,identifier:t.identifier||`${e.name}/${t.name}`}))),te=ee((function(e){let{as:t=x.Button,scope:n,identifier:o,icon:i,selectedIcon:r,name:s,...a}=e;const l=t,c=(0,E.useSelect)((e=>e(Q).getActiveComplementaryArea(n)===o),[o]),{enableComplementaryArea:d,disableComplementaryArea:p}=(0,E.useDispatch)(Q);return(0,u.createElement)(l,j({icon:r&&c?r:i,onClick:()=>{c?p(n):d(n,o)}},a))})),ne=e=>{let{smallScreenTitle:t,children:n,className:o,toggleButtonProps:i}=e;const r=(0,u.createElement)(te,j({icon:B},i));return(0,u.createElement)(u.Fragment,null,(0,u.createElement)("div",{className:"components-panel__header interface-complementary-area-header__small"},t&&(0,u.createElement)("span",{className:"interface-complementary-area-header__small-title"},t),r),(0,u.createElement)("div",{className:C()("components-panel__header","interface-complementary-area-header",o),tabIndex:-1},n,r))},oe=()=>{};function ie(e){let{name:t,as:n=x.Button,onClick:o,...i}=e;return(0,u.createElement)(x.Fill,{name:t},(e=>{let{onClick:t}=e;return(0,u.createElement)(n,j({onClick:o||t?function(){(o||oe)(...arguments),(t||oe)(...arguments)}:void 0},i))}))}ie.Slot=function(e){let{name:t,as:n=x.ButtonGroup,fillProps:o={},bubblesVirtually:i,...r}=e;return(0,u.createElement)(x.Slot,{name:t,bubblesVirtually:i,fillProps:o},(e=>{if(!u.Children.toArray(e).length)return null;const t=[];u.Children.forEach(e,(e=>{let{props:{__unstableExplicitMenuItem:n,__unstableTarget:o}}=e;o&&n&&t.push(o)}));const o=u.Children.map(e,(e=>!e.props.__unstableExplicitMenuItem&&t.includes(e.props.__unstableTarget)?null:e));return(0,u.createElement)(n,r,o)}))};const re=ie,se=e=>{let{__unstableExplicitMenuItem:t,__unstableTarget:n,...o}=e;return(0,u.createElement)(x.MenuItem,o)};function ae(e){let{scope:t,target:n,__unstableExplicitMenuItem:o,...i}=e;return(0,u.createElement)(te,j({as:e=>(0,u.createElement)(re,j({__unstableExplicitMenuItem:o,__unstableTarget:`${t}/${n}`,as:se,name:`${t}/plugin-more-menu`},e)),role:"menuitemcheckbox",selectedIcon:R,name:n,scope:t},i))}function le(e){let{scope:t,...n}=e;return(0,u.createElement)(x.Fill,j({name:`PinnedItems/${t}`},n))}le.Slot=function(e){let{scope:t,className:n,...o}=e;return(0,u.createElement)(x.Slot,j({name:`PinnedItems/${t}`},o),(e=>(null==e?void 0:e.length)>0&&(0,u.createElement)("div",{className:C()(n,"interface-pinned-items")},e)))};const ce=le;function ue(e){let{scope:t,children:n,className:o}=e;return(0,u.createElement)(x.Fill,{name:`ComplementaryArea/${t}`},(0,u.createElement)("div",{className:o},n))}const de=ee((function(e){let{children:t,className:n,closeLabel:o=(0,T.__)("Close plugin"),identifier:i,header:r,headerClassName:s,icon:a,isPinnable:l=!0,panelClassName:c,scope:d,name:p,smallScreenTitle:h,title:m,toggleShortcut:g,isActiveByDefault:b,showIconLabels:f=!1}=e;const{isActive:v,isPinned:_,activeArea:y,isSmall:k,isLarge:S}=(0,E.useSelect)((e=>{const{getActiveComplementaryArea:t,isItemPinned:n}=e(Q),o=t(d);return{isActive:o===i,isPinned:n(d,i),activeArea:o,isSmall:e(M.store).isViewportMatch("< medium"),isLarge:e(M.store).isViewportMatch("large")}}),[i,d]);!function(e,t,n,o,i){const r=(0,u.useRef)(!1),s=(0,u.useRef)(!1),{enableComplementaryArea:a,disableComplementaryArea:l}=(0,E.useDispatch)(Q);(0,u.useEffect)((()=>{o&&i&&!r.current?(l(e),s.current=!0):s.current&&!i&&r.current?(s.current=!1,a(e,t)):s.current&&n&&n!==t&&(s.current=!1),i!==r.current&&(r.current=i)}),[o,i,e,t,n])}(d,i,y,v,k);const{enableComplementaryArea:w,disableComplementaryArea:j,pinItem:I,unpinItem:P}=(0,E.useDispatch)(Q);return(0,u.useEffect)((()=>{b&&void 0===y&&!k&&w(d,i)}),[y,b,d,i,k]),(0,u.createElement)(u.Fragment,null,l&&(0,u.createElement)(ce,{scope:d},_&&(0,u.createElement)(te,{scope:d,identifier:i,isPressed:v&&(!f||S),"aria-expanded":v,label:m,icon:f?R:a,showTooltip:!f,variant:f?"tertiary":void 0})),p&&l&&(0,u.createElement)(ae,{target:p,scope:d,icon:a},m),v&&(0,u.createElement)(ue,{className:C()("interface-complementary-area",n),scope:d},(0,u.createElement)(ne,{className:s,closeLabel:o,onClose:()=>j(d),smallScreenTitle:h,toggleButtonProps:{label:o,shortcut:g,scope:d,identifier:i}},r||(0,u.createElement)(u.Fragment,null,(0,u.createElement)("strong",null,m),l&&(0,u.createElement)(x.Button,{className:"interface-complementary-area__pin-unpin-item",icon:_?O:N,label:_?(0,T.__)("Unpin from toolbar"):(0,T.__)("Pin to toolbar"),onClick:()=>(_?P:I)(d,i),isPressed:_,"aria-expanded":_}))),(0,u.createElement)(x.Panel,{className:c},t)))}));de.Slot=function(e){let{scope:t,...n}=e;return(0,u.createElement)(x.Slot,j({name:`ComplementaryArea/${t}`},n))};const pe=de,he=e=>{let{isActive:t}=e;return(0,u.useEffect)((()=>{let e=!1;return document.body.classList.contains("sticky-menu")&&(e=!0,document.body.classList.remove("sticky-menu")),()=>{e&&document.body.classList.add("sticky-menu")}}),[]),(0,u.useEffect)((()=>(t?document.body.classList.add("is-fullscreen-mode"):document.body.classList.remove("is-fullscreen-mode"),()=>{t&&document.body.classList.remove("is-fullscreen-mode")})),[t]),null},me=(0,u.forwardRef)((function(e,t){let{footer:n,header:o,sidebar:i,secondarySidebar:r,notices:s,content:a,drawer:l,actions:c,labels:d,className:p,shortcuts:h}=e;const m=(0,x.__unstableUseNavigateRegions)(h);!function(e){(0,u.useEffect)((()=>{const t=document&&document.querySelector(`html:not(.${e})`);if(t)return t.classList.toggle(e),()=>{t.classList.toggle(e)}}),[e])}("interface-interface-skeleton__html-container");const g={/* translators: accessibility text for the nav bar landmark region. */drawer:(0,T.__)("Drawer"),/* translators: accessibility text for the top bar landmark region. */header:(0,T.__)("Header"),/* translators: accessibility text for the content landmark region. */body:(0,T.__)("Content"),/* translators: accessibility text for the secondary sidebar landmark region. */secondarySidebar:(0,T.__)("Block Library"),/* translators: accessibility text for the settings landmark region. */sidebar:(0,T.__)("Settings"),/* translators: accessibility text for the publish landmark region. */actions:(0,T.__)("Publish"),/* translators: accessibility text for the footer landmark region. */footer:(0,T.__)("Footer"),...d};return(0,u.createElement)("div",j({},m,{ref:(0,k.useMergeRefs)([t,m.ref]),className:C()(p,"interface-interface-skeleton",m.className,!!n&&"has-footer")}),!!l&&(0,u.createElement)("div",{className:"interface-interface-skeleton__drawer",role:"region","aria-label":g.drawer,tabIndex:"-1"},l),(0,u.createElement)("div",{className:"interface-interface-skeleton__editor"},!!o&&(0,u.createElement)("div",{className:"interface-interface-skeleton__header",role:"region","aria-label":g.header,tabIndex:"-1"},o),(0,u.createElement)("div",{className:"interface-interface-skeleton__body"},!!r&&(0,u.createElement)("div",{className:"interface-interface-skeleton__secondary-sidebar",role:"region","aria-label":g.secondarySidebar,tabIndex:"-1"},r),!!s&&(0,u.createElement)("div",{className:"interface-interface-skeleton__notices"},s),(0,u.createElement)("div",{className:"interface-interface-skeleton__content",role:"region","aria-label":g.body,tabIndex:"-1"},a),!!i&&(0,u.createElement)("div",{className:"interface-interface-skeleton__sidebar",role:"region","aria-label":g.sidebar,tabIndex:"-1"},i),!!c&&(0,u.createElement)("div",{className:"interface-interface-skeleton__actions",role:"region","aria-label":g.actions,tabIndex:"-1"},c))),!!n&&(0,u.createElement)("div",{className:"interface-interface-skeleton__footer",role:"region","aria-label":g.footer,tabIndex:"-1"},n))})),ge=window.wp.keyboardShortcuts,be=g.STORE_KEY,fe=function(){const{hasBlockSelection:e,isEditorSidebarOpened:t,isGlobalStyleEditing:n}=(0,E.useSelect)((e=>({hasBlockSelection:!!e("core/block-editor").getBlockSelectionStart(),isEditorSidebarOpened:e(g.STORE_KEY).isEditorSidebarOpened(),isGlobalStyleEditing:e(g.STORE_KEY).isGlobalStyleEditing()})),[]),{openSidebar:o}=(0,E.useDispatch)(g.STORE_KEY);(0,u.useEffect)((function(){t&&o(e?"block-inspector":n?"document/general-settings":"document")}),[e,t,n])};var ve=n(5893);function _e(){return(0,ve.jsx)(ve.Fragment,{})}const ye=window.kubio.icons,xe=(0,u.forwardRef)((function({icon:e,size:t=24,...n},o){return(0,u.cloneElement)(e,{width:t,height:t,...n,ref:o})})),ke=window.kubio.blockLibrary,Se=(0,ve.jsx)(A.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,ve.jsx)(A.Path,{d:"m13.06 12 6.47-6.47-1.06-1.06L12 10.94 5.53 4.47 4.47 5.53 10.94 12l-6.47 6.47 1.06 1.06L12 13.06l6.47 6.47 1.06-1.06L13.06 12Z"})}),Ee=(0,ve.jsx)(A.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,ve.jsx)(A.Path,{d:"M12 13.06l3.712 3.713 1.061-1.06L13.061 12l3.712-3.712-1.06-1.06L12 10.938 8.288 7.227l-1.061 1.06L10.939 12l-3.712 3.712 1.06 1.061L12 13.061z"})}),we=(0,ve.jsx)(A.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,ve.jsx)(A.Path,{d:"M11 12.5V17.5H12.5V12.5H17.5V11H12.5V6H11V11H6V12.5H11Z"})}),Te="kubio-dragging-from-inserter--active",je=()=>{setTimeout((()=>{const e=top.document.querySelector("body");e.classList.contains(Te)&&e.classList.remove(Te)}),10)},Ie=()=>{const{setOpenInserter:e}=(0,E.useDispatch)(g.STORE_KEY),{insertionPoint:t,currentSelectedBlock:n}=(0,E.useSelect)((e=>({insertionPoint:e(g.STORE_KEY).getOpenedInserter(),currentSelectedBlock:e("core/block-editor").getSelectedBlockClientId()||null})),[]),o=(0,k.usePrevious)(n),{uiVersion:i}=(0,b.useUIVersion)();(0,u.useEffect)((()=>{2===i&&void 0!==o&&o!==n&&(e(!1),je())}),[o,n,i]);const r=(0,f.useBlocksOwnerDocument)(),s=(0,k.useViewportMatch)("medium","<"),a=(0,u.useRef)(),c=(0,u.useCallback)((n=>{!1!==t&&(n.target.closest(".kubio-inserter-button")||n.target.closest(".kubio-sidebar-add-section-button")||n.target.classList.contains("edit-site-header-toolbar__inserter-toggle")||n.target.closest(".edit-site-header-toolbar__inserter-toggle")||n.target.closest(".kubio-inserter-ignore-click-outisde")||e(!1))}),[t,e]);return(0,l.useOnClickOutside)(a,c),(0,ve.jsxs)("div",{ref:a,className:"edit-site-editor__inserter-panel",children:[(0,ve.jsx)("div",{className:"edit-site-editor__inserter-panel-header",children:(0,ve.jsx)(x.Button,{icon:Se,onClick:()=>e(!1)})}),(0,ve.jsx)("div",{className:"edit-site-editor__inserter-panel-content",children:t&&(0,ve.jsx)(y.__experimentalLibrary,{shouldFocusBlock:s,shouldSelectBlock:1===i,rootClientId:null==t?void 0:t.rootClientId,__experimentalInsertionIndex:null==t?void 0:t.insertionIndex,ownerDocument:r,insertionPoint:t,isAppender:null==t?void 0:t.isAppender})})]})},Ce=(0,ke.getNamesOfBlocks)(),Pe=["core/column","core/post-content","core/template-part",Ce.HEADER,Ce.FOOTER,Ce.SIDEBAR,Ce.COLUMN,Ce.LOOP_ITEM,Ce.SLIDER_CONTENT],Ae=({variant:e="secondary",className:t="edit-site-header-toolbar__inserter-toggle"})=>{const{rootClientId:n,isInserterOpen:o}=(0,E.useSelect)((e=>{var t;const{getBlockListSettings:n,getSelectedBlockClientId:o,getBlockRootClientId:i,getBlock:r,getBlockIndex:s}=e("core/block-editor");let a,l=o(),c=n(l);((0,h.isUndefined)(c)||c.templateLock)&&(a=s(l),l=i(l),c=n(l));const u=l&&Pe.includes(null===(t=r(l))||void 0===t?void 0:t.name)&&((0,h.isUndefined)(c)||!c.templateLock);return{isInserterOpen:e(g.STORE_KEY).getOpenedInserter(),rootClientId:u?l:null,insertionIndex:a}}),[]),{setOpenInserter:i}=(0,E.useDispatch)(g.STORE_KEY),{selectBlock:r}=(0,E.useDispatch)("core/block-editor"),s=(0,u.useRef)(),{uiVersion:a}=(0,b.useUIVersion)(),l=(0,u.useCallback)((e=>{s.current.focus(),e.preventDefault(),e.stopPropagation()}),[]),c=(0,u.useCallback)((e=>{const t=!o&&"block-inserter";2!==a?(t?r(null):l(e),i(t,n),top.document.body.classList.remove("kubio-dragging-from-inserter--active")):t?(i("pattern-inserter/content",null),je()):(l(e),i(!1,null))}),[o,n]);return(0,ve.jsx)(ve.Fragment,{children:(0,ve.jsx)(x.Button,{ref:s,variant:e,isPressed:o,className:t,onClick:c,icon:o?Ee:we,onMouseDown:e=>{e.preventDefault()},label:(d=o,d?(0,T.__)("Close","kubio"):(0,T.__)("Add block","kubio"))})});var d},Re=[];function Oe({title:e,label:t,children:n,areaIdentifier:o,className:i,backCallback:r,parentAreaIdentifier:s,onOpen:a}){const{clearSelectedBlock:l}=(0,E.useDispatch)("core/block-editor"),{openSidebar:c}=(0,E.useDispatch)(g.STORE_KEY),d=()=>{c(s||"document"),l()},p=r?()=>r(d):d,m=(0,E.useSelect)((e=>e(g.STORE_KEY).getSubSidebars[o])),{addSubSidebar:b}=(0,E.useDispatch)(g.STORE_KEY);return(0,u.useLayoutEffect)((()=>{m||(b({areaIdentifier:o,sidebar:(0,ve.jsx)(x.Animate,{type:"slide-in",children:({className:t})=>(0,ve.jsxs)(Fe,{title:e,backCallback:p,areaIdentifier:o,className:`${t} kubio-subsidebar-content`,children:[n,Be(o)]})})}),Re.push(o))}),[m]),(0,ve.jsxs)(ve.Fragment,{children:[(0,ve.jsx)("div",{className:"kubio-subsidebar-container",children:(0,ve.jsx)("div",{className:C()("components-panel__header","interface-complementary-area-header","kubio-subsidebar-title",i),tabIndex:-1,children:(0,ve.jsxs)(x.Button,{label:(0,T.__)("Open","kubio"),onClick:()=>{l(),c(o),(0,h.isFunction)(a)&&a()},children:[(0,ve.jsx)("strong",{children:t||e}),(0,ve.jsx)(xe,{icon:ye.ArrowRight,className:"components-panel__arrow arrow_general_settings"})]})})}),(0,ve.jsx)("div",{style:{display:"none"},children:n})]})}const Ne=[],Me=({name:e,title:t=null,parent:n="document",render:o,isSubsidebar:i=!1})=>{(0,h.find)(Ne,{name:e})&&console.error(`sidebar ${e} already added`),Ne.push({name:e,parent:n,render:o,title:t||e,isSubsidebar:i})},Be=e=>(e=>Ne.filter((({parent:t})=>t===e)))(e).map((({title:t,render:n,name:o,isSubsidebar:i})=>{const r=i?Oe:Fe;return(0,ve.jsx)(r,{title:t,parentAreaIdentifier:e,areaIdentifier:o,children:n()},`${e}.${o}`)})),Le=({name:e,title:t,parent:n="document",render:o})=>Me({name:e,title:t,parent:n,render:o,isSubsidebar:!1}),De=({name:e,title:t,parent:n="document",render:o})=>Me({name:e,title:t,parent:n,render:o,isSubsidebar:!0});function Fe({areaIdentifier:e,title:t,backCallback:n=null,children:o,className:i}){const{uiVersion:r}=(0,b.useUIVersion)();return(0,ve.jsxs)(pe,{scope:`${g.STORE_KEY}/sidebars`,complementaryAreaIdentifier:`${g.STORE_KEY}/sidebar/${e}`,identifier:`${g.STORE_KEY}/sidebar/${e}`,isPinnable:!1,className:C()(i,n?"kubio-sidebar-header-block":""),header:(0,ve.jsxs)("div",{className:C()("components-panel__header","kubio-sidebar-header","accordion-section-title",n?"kubio-sidebar-header--has-back":""),tabIndex:-1,children:[n&&(0,ve.jsx)(x.Button,{className:"kubio-sidebar-header-back-button",onClick:n,showTooltip:!0,label:(0,T.__)("Back","kubio"),children:(0,ve.jsx)(xe,{icon:ye.ArrowLeft,className:"kubio-sidebar-header-arrow"})}),(0,ve.jsx)("strong",{children:"function"==typeof t?t():t}),2===r&&(0,ve.jsx)(Ae,{className:"kubio-inserter-button",variant:"primary"})]}),children:[o,Be(e)]})}const Ge=window.wp.blocks;function Ue({children:e}){const{clearSelectedBlock:t}=(0,E.useDispatch)("core/block-editor"),{openSidebar:n}=(0,E.useDispatch)(g.STORE_KEY),{blockType:o,isMultiSelection:i}=(0,E.useSelect)((e=>{const{getSelectedBlockClientId:t,getBlockName:n,hasMultiSelection:o}=e("core/block-editor"),i=t(),r=i&&n(i);return{blockType:i&&(0,Ge.getBlockType)(r),isMultiSelection:o()}}));return(0,ve.jsxs)(Fe,{areaIdentifier:"block-inspector",title:()=>(0,ve.jsxs)("span",{className:"kubio-header-active-section",children:[(0,ve.jsx)(y.BlockIcon,{icon:null==o?void 0:o.icon}),(0,ve.jsx)("span",{className:"kubio-header-active-section page-title",children:i?(0,T.__)("Multiple selection","kubio"):null==o?void 0:o.title})]}),backCallback:()=>{n("document"),t()},children:[!i&&e,i&&(0,ve.jsx)(ve.Fragment,{children:(0,ve.jsx)("div",{className:"kubio-multiple-selection",children:(0,ve.jsx)("p",{children:(0,T.__)("Sidebar controls are not availble on multiple blocks selection","kubio")})})})]})}const He=()=>{const e=(0,f.useGetGlobalSessionProp)("ready",!1),{title:t,postType:n,postId:o}=(0,E.useSelect)((t=>{if(!e)return{title:""};const{getCurrentPostType:n,getCurrentPostId:o,getEditedPostType:i,getEditedPostId:r}=t(g.STORE_KEY),{getEditedEntityRecord:s}=t("core"),a=n(),l=o();let c=(0,T.__)("Page","kubio");return c=a&&l?s("postType",n(),o()).title||null:s("postType",i(),r()).title||(0,T.__)("Page","kubio"),{title:c,postType:a,postId:l}}),[e]),i=(0,f.useCurrentPageTitle)({title:t});return"wp_template"!==n&&"wp_template_part"!==n?t:(null==i?void 0:i.title)||(0,T.__)("Page","kubio")},Ve=window.kubio.controls,Ke=window.kubio.utils,ze=(0,ve.jsx)(A.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,ve.jsx)(A.Path,{fillRule:"evenodd",d:"M10.289 4.836A1 1 0 0111.275 4h1.306a1 1 0 01.987.836l.244 1.466c.787.26 1.503.679 2.108 1.218l1.393-.522a1 1 0 011.216.437l.653 1.13a1 1 0 01-.23 1.273l-1.148.944a6.025 6.025 0 010 2.435l1.149.946a1 1 0 01.23 1.272l-.653 1.13a1 1 0 01-1.216.437l-1.394-.522c-.605.54-1.32.958-2.108 1.218l-.244 1.466a1 1 0 01-.987.836h-1.306a1 1 0 01-.986-.836l-.244-1.466a5.995 5.995 0 01-2.108-1.218l-1.394.522a1 1 0 01-1.217-.436l-.653-1.131a1 1 0 01.23-1.272l1.149-.946a6.026 6.026 0 010-2.435l-1.148-.944a1 1 0 01-.23-1.272l.653-1.131a1 1 0 011.217-.437l1.393.522a5.994 5.994 0 012.108-1.218l.244-1.466zM14.929 12a3 3 0 11-6 0 3 3 0 016 0z",clipRule:"evenodd"})});function $e(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=Array(t);n<t;n++)o[n]=e[n];return o}function Ye(e,t){if(e){if("string"==typeof e)return $e(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?$e(e,t):void 0}}function We(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var o,i,r,s,a=[],l=!0,c=!1;try{if(r=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(o=r.call(n)).done)&&(a.push(o.value),a.length!==t);l=!0);}catch(e){c=!0,i=e}finally{try{if(!l&&null!=n.return&&(s=n.return(),Object(s)!==s))return}finally{if(c)throw i}}return a}}(e,t)||Ye(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function qe(e){return qe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},qe(e)}function Ze(e){var t=function(e){if("object"!=qe(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=qe(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==qe(t)?t:t+""}function Xe(e,t,n){return(t=Ze(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Qe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?Object(arguments[t]):{},o=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&o.push.apply(o,Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),o.forEach((function(t){Xe(e,t,n[t])}))}return e}function Je(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function et(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,Ze(o.key),o)}}function tt(e,t,n){return t&&et(e.prototype,t),n&&et(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function nt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ot(e,t){if(t&&("object"==qe(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return nt(e)}function it(e){return it=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},it(e)}function rt(e,t){return rt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},rt(e,t)}function st(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&rt(e,t)}var at=n(5697),lt=n.n(at);const ct=window.ReactDOM;var ut=n(1143),dt=n.n(ut);var pt=function(){function e(){Je(this,e),Xe(this,"refs",{})}return tt(e,[{key:"add",value:function(e,t){this.refs[e]||(this.refs[e]=[]),this.refs[e].push(t)}},{key:"remove",value:function(e,t){var n=this.getIndex(e,t);-1!==n&&this.refs[e].splice(n,1)}},{key:"isActive",value:function(){return this.active}},{key:"getActive",value:function(){var e=this;return this.refs[this.active.collection].find((function(t){return t.node.sortableInfo.index==e.active.index}))}},{key:"getIndex",value:function(e,t){return this.refs[e].indexOf(t)}},{key:"getOrderedRefs",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.active.collection;return this.refs[e].sort(ht)}}]),e}();function ht(e,t){return e.node.sortableInfo.index-t.node.sortableInfo.index}function mt(e,t){return Object.keys(e).reduce((function(n,o){return-1===t.indexOf(o)&&(n[o]=e[o]),n}),{})}var gt={end:["touchend","touchcancel","mouseup"],move:["touchmove","mousemove"],start:["touchstart","mousedown"]},bt=function(){if("undefined"==typeof window||"undefined"==typeof document)return"";var e=window.getComputedStyle(document.documentElement,"")||["-moz-hidden-iframe"],t=(Array.prototype.slice.call(e).join("").match(/-(moz|webkit|ms)-/)||""===e.OLink&&["","o"])[1];return"ms"===t?"ms":t&&t.length?t[0].toUpperCase()+t.substr(1):""}();function ft(e,t){Object.keys(t).forEach((function(n){e.style[n]=t[n]}))}function vt(e,t){e.style["".concat(bt,"Transform")]=null==t?"":"translate3d(".concat(t.x,"px,").concat(t.y,"px,0)")}function _t(e,t){e.style["".concat(bt,"TransitionDuration")]=null==t?"":"".concat(t,"ms")}function yt(e,t){for(;e;){if(t(e))return e;e=e.parentNode}return null}function xt(e,t,n){return Math.max(e,Math.min(n,t))}function kt(e){return"px"===e.substr(-2)?parseFloat(e):0}function St(e,t){var n=t.displayName||t.name;return n?"".concat(e,"(").concat(n,")"):e}function Et(e,t){var n=e.getBoundingClientRect();return{top:n.top+t.top,left:n.left+t.left}}function wt(e){return e.touches&&e.touches.length?{x:e.touches[0].pageX,y:e.touches[0].pageY}:e.changedTouches&&e.changedTouches.length?{x:e.changedTouches[0].pageX,y:e.changedTouches[0].pageY}:{x:e.pageX,y:e.pageY}}function Tt(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{left:0,top:0};if(e){var o={left:n.left+e.offsetLeft,top:n.top+e.offsetTop};return e.parentNode===t?o:Tt(e.parentNode,t,o)}}function jt(e){var t=e.lockOffset,n=e.width,o=e.height,i=t,r=t,s="px";if("string"==typeof t){var a=/^[+-]?\d*(?:\.\d*)?(px|%)$/.exec(t);dt()(null!==a,'lockOffset value should be a number or a string of a number followed by "px" or "%". Given %s',t),i=parseFloat(t),r=parseFloat(t),s=a[1]}return dt()(isFinite(i)&&isFinite(r),"lockOffset value should be a finite. Given %s",t),"%"===s&&(i=i*n/100,r=r*o/100),{x:i,y:r}}function It(e){return e instanceof HTMLElement?function(e){var t=window.getComputedStyle(e),n=/(auto|scroll)/;return["overflow","overflowX","overflowY"].find((function(e){return n.test(t[e])}))}(e)?e:It(e.parentNode):null}var Ct="BUTTON",Pt="INPUT",At="OPTION",Rt="TEXTAREA",Ot="SELECT";function Nt(e){return null!=e.sortableHandle}var Mt=function(){function e(t,n){Je(this,e),this.container=t,this.onScrollCallback=n}return tt(e,[{key:"clear",value:function(){null!=this.interval&&(clearInterval(this.interval),this.interval=null)}},{key:"update",value:function(e){var t=this,n=e.translate,o=e.minTranslate,i=e.maxTranslate,r=e.width,s=e.height,a={x:0,y:0},l={x:1,y:1},c=this.container,u=c.scrollTop,d=c.scrollLeft,p=c.scrollHeight,h=c.scrollWidth,m=0===u,g=p-u-c.clientHeight==0,b=0===d,f=h-d-c.clientWidth==0;n.y>=i.y-s/2&&!g?(a.y=1,l.y=10*Math.abs((i.y-s/2-n.y)/s)):n.x>=i.x-r/2&&!f?(a.x=1,l.x=10*Math.abs((i.x-r/2-n.x)/r)):n.y<=o.y+s/2&&!m?(a.y=-1,l.y=10*Math.abs((n.y-s/2-o.y)/s)):n.x<=o.x+r/2&&!b&&(a.x=-1,l.x=10*Math.abs((n.x-r/2-o.x)/r)),this.interval&&(this.clear(),this.isAutoScrolling=!1),0===a.x&&0===a.y||(this.interval=setInterval((function(){t.isAutoScrolling=!0;var e={left:l.x*a.x,top:l.y*a.y};t.container.scrollTop+=e.top,t.container.scrollLeft+=e.left,t.onScrollCallback(e)}),5))}}]),e}(),Bt={axis:lt().oneOf(["x","y","xy"]),contentWindow:lt().any,disableAutoscroll:lt().bool,distance:lt().number,getContainer:lt().func,getHelperDimensions:lt().func,helperClass:lt().string,helperContainer:lt().oneOfType([lt().func,"undefined"==typeof HTMLElement?lt().any:lt().instanceOf(HTMLElement)]),hideSortableGhost:lt().bool,keyboardSortingTransitionDuration:lt().number,lockAxis:lt().string,lockOffset:lt().oneOfType([lt().number,lt().string,lt().arrayOf(lt().oneOfType([lt().number,lt().string]))]),lockToContainerEdges:lt().bool,onSortEnd:lt().func,onSortMove:lt().func,onSortOver:lt().func,onSortStart:lt().func,pressDelay:lt().number,pressThreshold:lt().number,keyCodes:lt().shape({lift:lt().arrayOf(lt().number),drop:lt().arrayOf(lt().number),cancel:lt().arrayOf(lt().number),up:lt().arrayOf(lt().number),down:lt().arrayOf(lt().number)}),shouldCancelStart:lt().func,transitionDuration:lt().number,updateBeforeSortStart:lt().func,useDragHandle:lt().bool,useWindowAsScrollContainer:lt().bool},Lt={lift:[32],drop:[32],cancel:[27],up:[38,37],down:[40,39]},Dt={axis:"y",disableAutoscroll:!1,distance:0,getHelperDimensions:function(e){var t=e.node;return{height:t.offsetHeight,width:t.offsetWidth}},hideSortableGhost:!0,lockOffset:"50%",lockToContainerEdges:!1,pressDelay:0,pressThreshold:5,keyCodes:Lt,shouldCancelStart:function(e){return-1!==[Pt,Rt,Ot,At,Ct].indexOf(e.target.tagName)||!!yt(e.target,(function(e){return"true"===e.contentEditable}))},transitionDuration:300,useWindowAsScrollContainer:!1},Ft=Object.keys(Bt),Gt={index:lt().number.isRequired,collection:lt().oneOfType([lt().number,lt().string]),disabled:lt().bool},Ut=Object.keys(Gt),Ht=n(989),Vt=n.n(Ht);const Kt=(0,u.createContext)({clientId:null,setContainer:h.noop}),zt=()=>(0,u.useContext)(Kt),$t=(0,ke.getNamesOfBlocks)(),Yt=[$t.SECTION,$t.HERO,$t.NAVIGATION].map((e=>`[data-type="${e}"]`)).join(","),Wt=({children:e})=>{const[t,n]=(0,u.useState)(null),o=(0,f.useBlocksOwnerDocument)(),i=(0,k.useThrottle)((0,u.useCallback)((e=>{var t,o;const i=null==e||null===(t=e.target)||void 0===t||null===(o=t.closest)||void 0===o?void 0:o.call(t,Yt),r=(null==i?void 0:i.getAttribute("data-block"))||null;n(r)}),[]),300);(0,u.useEffect)((()=>{if(o)return o.addEventListener("mousemove",i),()=>o.removeEventListener("mousemove",i)}),[o]);const r=(0,u.useMemo)((()=>({clientId:t})),[t]);return(0,ve.jsx)(Kt.Provider,{value:r,children:e})},qt=(0,ve.jsx)(A.SVG,{width:"24",height:"24",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,ve.jsx)(A.Path,{d:"M8 7h2V5H8v2zm0 6h2v-2H8v2zm0 6h2v-2H8v2zm6-14v2h2V5h-2zm0 8h2v-2h-2v2zm0 6h2v-2h-2v2z"})}),Zt=function(e){var t,n,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{withRef:!1};return n=t=function(t){function n(){return Je(this,n),ot(this,it(n).apply(this,arguments))}return st(n,t),tt(n,[{key:"componentDidMount",value:function(){(0,ct.findDOMNode)(this).sortableHandle=!0}},{key:"getWrappedInstance",value:function(){return dt()(o.withRef,"To access the wrapped instance, you need to pass in {withRef: true} as the second argument of the SortableHandle() call"),this.refs.wrappedInstance}},{key:"render",value:function(){var t=o.withRef?"wrappedInstance":null;return(0,P.createElement)(e,j({ref:t},this.props))}}]),n}(P.Component),Xe(t,"displayName",St("sortableHandle",e)),n}((()=>(0,ve.jsx)(x.Tooltip,{text:(0,T.__)("Move","kubio"),children:(0,ve.jsx)("div",{className:"d-flex",children:(0,ve.jsx)(xe,{icon:qt,className:"draggable-item"})})}))),Xt=window.kubio.menuData,Qt=(0,ve.jsx)(A.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,ve.jsx)(A.Path,{d:"M5 5v1.5h14V5H5zm0 7.8h14v-1.5H5v1.5zM5 19h14v-1.5H5V19z"})}),Jt=(0,u.createContext)(null),en=({children:e})=>{const t=(0,Xt.usePrimaryMenuBlockEditor)();return(0,ve.jsx)(Jt.Provider,{value:t,children:e})},tn=(0,ve.jsx)(A.SVG,{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,ve.jsx)(A.Path,{d:"M12 4c-4.4 0-8 3.6-8 8s3.6 8 8 8 8-3.6 8-8-3.6-8-8-8zm0 14.5c-3.6 0-6.5-2.9-6.5-6.5S8.4 5.5 12 5.5s6.5 2.9 6.5 6.5-2.9 6.5-6.5 6.5zM9 16l4.5-3L15 8.4l-4.5 3L9 16z"})}),nn=({containerRef:e,afterMenuCreation:t,onClose:n})=>{const[o,i]=(0,u.useState)(""),[r,s]=(0,u.useState)(!1);return(0,ve.jsx)(x.Popover,{className:"kubio-options-popover kubio-create-menu-popover",anchorRef:e,position:"middle right",onClose:n,children:(0,ve.jsx)(x.Placeholder,{className:"wp-block-navigation-placeholder kubio-menu-placeholder",icon:tn,label:(0,T.__)("Kubio Menu","kubio"),children:(0,ve.jsxs)("div",{children:[(0,ve.jsx)("div",{className:"kubio-create-menu-popover-description",children:(0,ve.jsx)("span",{children:(0,T.__)("There is no header menu created. Please create a new one","kubio")})}),(0,ve.jsx)("div",{className:"wp-block-navigation-placeholder__actions",children:(0,ve.jsx)(x.Flex,{children:(0,ve.jsxs)(x.FlexBlock,{children:[(0,ve.jsxs)(x.BaseControl,{className:"kubio-create-menu-popover-input-control",children:[(0,ve.jsx)(x.BaseControl.VisualLabel,{children:(0,T.__)("Menu name","kubio")}),(0,ve.jsx)(x.__experimentalInputControl,{value:o,onChange:i,placeholder:(0,T.__)("Please set a name","kubio")})]}),(0,ve.jsx)(x.Button,{isSecondary:!0,className:"wp-block-navigation-placeholder__button",disabled:0===o.length,isBusy:r,onClick:async()=>{s(!0),await(0,Xt.createPrimaryMenu)(o),s(!1),t()},children:(0,T.__)("Create new Menu","kubio")})]})})})]})})})},on=({dataHelper:e,containerRef:t})=>{const[n,o]=(0,u.useState)(!1),[i,r]=(0,u.useState)(!1),{exists:s,items:a,setItems:l,hasResolved:c}=(0,u.useContext)(Jt),d=(0,E.useSelect)((e=>{var t,n;const{getPage:o,getEntity:i}=e(g.STORE_KEY),r=(null===(t=o())||void 0===t?void 0:t.link)||null,s=(null===(n=i())||void 0===n?void 0:n.path)||null;return(r||s||"").replace(/\/$/,"")}),[]);(0,u.useEffect)((()=>{i&&s&&c&&(l([{...(0,Xt.generateItemInitialData)(),label:null==e?void 0:e.getAttribute("attrs.name"),url:`${d}/${m}`}],!0),r(!1))}),[s,i,l,c]);const p=(0,u.useCallback)((()=>{if(b.length){const e=b.map((({id:e})=>e)),t=h.filter((t=>-1===e.indexOf(t.id)));l([...t],!0)}else{const t=Math.max.apply(null,h.filter((({parent:e})=>0===e)).map((({order:e})=>e)).filter(Boolean))+1;l([...h,{...(0,Xt.generateItemInitialData)(),label:null==e?void 0:e.getAttribute("attrs.name"),url:`${d}/${m}`,order:t}],!0)}}),[l,a,s,d]),h=Array.isArray(a)?a:[],m="#"+(null==e?void 0:e.getAttribute("anchor")),b=(0,u.useMemo)((()=>{if(!s)return[];const e=h.filter((({url:e})=>e===`${d}/${m}`||e===`${d}${m}`));return e.length?e:[]}),[s,a,d]),f=(0,u.useCallback)((()=>{s?p():o(!0)}),[s,p]),v=b.length>0;return(0,ve.jsxs)(ve.Fragment,{children:[(0,ve.jsx)(x.Tooltip,{text:v?(0,T.__)("Remove from menu","kubio"):(0,T.__)("Add to menu","kubio"),position:"top left",children:(0,ve.jsx)("div",{className:"d-flex",children:(0,ve.jsx)(x.Button,{isSmall:!0,onClick:()=>f(),icon:Qt,className:C()(["icon-menu",{active:v}])})})}),n&&(0,ve.jsx)(nn,{containerRef:null==t?void 0:t.current,afterMenuCreation:()=>{r(!0),o(!1)},onClose:()=>o(!1)})]})},rn=({onRemove:e,onSelect:t,dataHelper:n})=>{const{selectBlock:o,toggleBlockHighlight:i}=(0,E.useDispatch)("core/block-editor"),r=n.getAttribute("anchor"),s=n.getAttribute("attrs.name"),[a,c]=(0,u.useState)(!1),[d,p]=(0,u.useState)(r),[h,g]=(0,u.useState)(s),b=(0,f.useBlocksOwnerDocument)();(0,u.useEffect)((()=>{d!==r&&p(r),h!==s&&g(s)}),[r,s]);const v=(0,u.useRef)(),_=(0,u.useRef)(),y=m().debounce((e=>{e=e||d;let t=Vt()(e);t=(0,Ke.getUniqueSlug)(t,b),t&&(t!==d&&p(t),t!==r&&n.setAttribute("anchor",t))}),100),{clientId:k}=zt(),S=(0,u.useCallback)((()=>{a&&c(!1)}),[a,c]),w=e=>{const t=null==e?void 0:e.clientId,n=(0,Ke.getPreviewElementByModelId)(t,b);n&&n.scrollIntoView(),i(t,!0)};return(0,l.useOnClickOutside)(v,S),(0,ve.jsx)("div",{ref:_,className:"page-section-item",children:(0,ve.jsxs)("div",{className:(e=>{const t=["kubio-section-list-item"];return e&&t.push("list-item-full-height"),k===n.clientId&&t.push("hovered"),t.join(" ")})(a),children:[(0,ve.jsx)("div",{className:"align-items-center drag-icon",children:(0,ve.jsx)(Zt,{})}),(0,ve.jsxs)("div",{className:"input-container",ref:v,children:[(0,ve.jsx)("div",{className:"input-drag-text",children:(0,ve.jsx)("input",{type:"text",value:h,className:"input-name",onChange:e=>{const t=e.target.value;g(t)},onFocus:e=>{w(n),a||c(!0)},onBlur:()=>{h!==s&&(n.setAttribute("attrs.name",h),y(h))}})}),a&&(0,ve.jsxs)("div",{className:"id-div",children:["ID:#",(0,ve.jsx)("input",{type:"text",value:d,className:"input-name input-id",onFocus:e=>{w(n)},onChange:e=>{p(e.target.value)},onBlur:()=>{d===r&&h===s||y()}})]})]}),(0,ve.jsx)("div",{onClick:()=>{o(null==n?void 0:n.clientId)},className:"page-section-item__select-area",role:"button",tabIndex:0}),(0,ve.jsxs)("div",{className:"align-items-center",children:[(0,ve.jsx)(x.Button,{isSmall:!0,icon:ye.DeleteItemIcon,className:"icon-close",onClick:e,showTooltip:!0,tooltipPosition:"top left",label:(0,T.__)("Remove","kubio")}),(0,ve.jsx)(on,{dataHelper:n,containerRef:_}),(0,ve.jsx)(x.Button,{isSmall:!0,icon:ze,className:"icon-settings",onClick:t,showTooltip:!0,tooltipPosition:"top left",label:(0,T.__)("Settings","kubio")})]})]})})},sn="kubio/edit-site",an=({name:e="",area:t})=>{const n=(0,u.useRef)(),{setOpenInserter:o}=(0,E.useDispatch)(sn),i=(0,E.useSelect)((e=>{e(sn).getOpenedInserter()})),r=hn[t],s=async(e=t)=>{const n=`pattern-inserter/${m().get(bn,e,bn[pn.CONTENT])}`;i!==n&&await o(!1,null),o(n,t)},a=null==r?void 0:r.toLowerCase();return(0,ve.jsx)(u.Fragment,{children:(0,ve.jsxs)("div",{ref:n,className:["kubio-full-section","kubio-full-section--placeholder"].join(" "),children:[(0,ve.jsx)("div",{className:"kubio-subsidebar-container",children:(0,ve.jsxs)("div",{className:C()("components-panel__header","interface-complementary-area-header","kubio-subsidebar-title","kubio-subsidebar-title-header"),tabIndex:-1,children:[(0,ve.jsx)("div",{className:"kubio-sidebar-title-text",children:r}),(0,ve.jsx)("div",{className:"dummy-column"}),(0,ve.jsx)("div",{className:"section-list-header-buttons-holder",children:(0,ve.jsx)(x.Button,{isSmall:!0,icon:we,className:"section-icon-container",onClick:function(){s(pn.CONTENT)},showTooltip:!0,tooltipPosition:"top left",label:(0,T.__)("Add block/section","kubio")})})]})}),(0,ve.jsx)(Ve.ControlNotice,{content:(0,T.sprintf)((0,T.__)("The current page uses the theme %s. Use the button below to replace it with a Kubio %s","kubio"),a,a)}),(0,ve.jsx)(x.Button,{isPrimary:!0,onClick:()=>s(),className:((e,n=[])=>t===pn.HEADER?["btn-primary","header-button"].concat(n).join(" "):["btn-primary"].concat(n).join(" "))(0,["kubio-button-add-blocks"]),children:(0,ve.jsx)("span",{className:C()("kubio-header-section-main-button",{"header-button":e===pn.HEADER}),children:(()=>{switch(t){case pn.HEADER:return(0,T.__)("Choose header design","kubio");case pn.FOOTER:return(0,T.__)("Choose footer design","kubio");case pn.SIDEBAR:return(0,T.__)("Add section","kubio");default:return(0,T.__)("Add predesigned section","kubio")}})()})})]})})};function ln(e){const{templateParts:t,selectBlock:n,removeBlocks:o,reorderBlocks:i}=e,{blockTypes:r,getBlocks:s,isPage:a}=(0,E.useSelect)((e=>{const{getPage:t}=e(g.STORE_KEY),n=(0,E.select)("core").getEditedEntityRecord("root","site");let o;t&&(o=t());const i=m().get(o,"context",{}),{postType:r,postId:s}=i,a="page"===(null==n?void 0:n.show_on_front)&&parseInt(null==n?void 0:n.page_for_posts)===parseInt(s);return{isPage:"page"===r&&!a,blockTypes:e("core/blocks").getBlockTypes(),getBlocks:e("core/block-editor").getBlocks}})),[l]=(0,f.useGlobalSessionProp)("currentPageHasBlocksContent",!0,[]),c=(0,u.useMemo)((()=>{const e={selectBlock:n,removeBlocks:o,reorderBlocks:i,innerBlocks:s(),templatePart:{},blockTypes:r,label:(0,T.__)("Content","kubio")};return l&&(0,ve.jsx)(kn,{...e})}),[t,l]);return(0,ve.jsxs)(ve.Fragment,{children:[a&&(0,ve.jsx)(an,{area:"header"}),c,a&&(0,ve.jsx)(an,{area:"footer"})]})}function cn(e){const{templateParts:t,selectBlock:n,removeBlocks:o,reorderBlocks:i}=e,{blockTypes:r}=(0,E.useSelect)((e=>({blockTypes:e("core/blocks").getBlockTypes(),getBlocks:e("core/block-editor").getBlocks})));return(0,ve.jsx)(ve.Fragment,{children:t.map(((e,t)=>{const{name:s,clientId:a}=e,l={selectBlock:n,removeBlocks:o,reorderBlocks:i,name:s,templatePart:e,templatePartClientId:a,blockTypes:r};return(0,ve.jsx)(kn,{...l},"template-sections-"+t)}))})}function un({templateParts:e,...t}){const n=(0,E.useSelect)((e=>{const{currentPageHasFSETemplate:t}=e(g.STORE_KEY);return t()}),[]),o=(0,E.useSelect)((e=>e("core").getEntityRecords("postType","wp_template_part",{per_page:-1})||[]),[]),i=(0,l.useDeepMemo)((()=>e.map((e=>{const t=o.find((t=>{var n;return(null==t?void 0:t.slug)===(null==e||null===(n=e.attributes)||void 0===n?void 0:n.slug)}));let n=null==t?void 0:t.area;return{...e,area:n}}))),[e,o]),r=(0,l.useDeepMemo)((()=>m().orderBy(i,(e=>m().findIndex(mn,(t=>t===m().get(e,"area",pn.CONTENT)))))),[i]);let s=null;return s=n?cn:ln,(0,ve.jsx)(s,{...t,templateParts:r})}const dn=({onRemove:e,onSelect:t,item:n,dataHelper:o})=>{const{blockTypes:i}=(0,E.useSelect)((e=>({blockTypes:e("core/blocks").getBlockTypes()}))),{selectBlock:r}=(0,E.useDispatch)("core/block-editor"),{clientId:s}=zt(),a=C()("kubio-section-list-item",{hovered:s===n.clientId}),l=(0,u.useRef)();return(0,u.useEffect)((()=>{s===n.clientId&&l.current.scrollIntoView({behavior:"smooth",block:"center",inline:"nearest"})}),[s]),(0,ve.jsx)("div",{ref:l,className:"page-section-item",children:(0,ve.jsxs)("div",{className:a,children:[(0,ve.jsx)("div",{className:"align-items-center",children:(0,ve.jsx)(Zt,{})}),(0,ve.jsx)("div",{className:"input-container",children:(0,ve.jsx)("span",{className:"input-name",children:(0,ve.jsx)("span",{className:"input-name-text",children:(e=>{const t=(0,h.find)(i,{name:e});return(null==t?void 0:t.title)||e})(n.name)})})}),(0,ve.jsx)("div",{onClick:()=>{r(null==o?void 0:o.clientId)},className:"page-section-item__select-area",role:"button",tabIndex:"0"}),(0,ve.jsxs)("div",{className:"align-items-center",children:[(0,ve.jsx)(x.Button,{isSmall:!0,icon:ye.DeleteItemIcon,className:"icon-close",onClick:e,showTooltip:!0,tooltipPosition:"top left",label:(0,T.__)("Remove","kubio")}),(0,ve.jsx)(x.Button,{isSmall:!0,icon:ze,className:"icon-settings",onClick:t,showTooltip:!0,tooltipPosition:"top left",label:(0,T.__)("Settings","kubio")})]})]})})},pn={HEADER:"header",FOOTER:"footer",SIDEBAR:"sidebar",CONTENT:"content"},hn={[pn.HEADER]:(0,T.__)("Header","kubio"),[pn.FOOTER]:(0,T.__)("Footer","kubio"),[pn.SIDEBAR]:(0,T.__)("Sidebar","kubio"),[pn.CONTENT]:(0,T.__)("Content","kubio")},mn=[pn.HEADER,pn.CONTENT,pn.SIDEBAR,pn.FOOTER],gn=["kubio/header","kubio/footer","core/post-content","core/template-part"],bn={[pn.HEADER]:"header",[pn.FOOTER]:"footer",[pn.SIDEBAR]:"sidebar",[pn.CONTENT]:"post-content"},fn=function(e){var t,n,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{withRef:!1};return n=t=function(t){function n(){return Je(this,n),ot(this,it(n).apply(this,arguments))}return st(n,t),tt(n,[{key:"componentDidMount",value:function(){this.register()}},{key:"componentDidUpdate",value:function(e){this.node&&(e.index!==this.props.index&&(this.node.sortableInfo.index=this.props.index),e.disabled!==this.props.disabled&&(this.node.sortableInfo.disabled=this.props.disabled)),e.collection!==this.props.collection&&(this.unregister(e.collection),this.register())}},{key:"componentWillUnmount",value:function(){this.unregister()}},{key:"register",value:function(){var e=this.props,t=e.collection,n=e.disabled,o=e.index,i=(0,ct.findDOMNode)(this);i.sortableInfo={collection:t,disabled:n,index:o,manager:this.context.manager},this.node=i,this.ref={node:i},this.context.manager.add(t,this.ref)}},{key:"unregister",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props.collection;this.context.manager.remove(e,this.ref)}},{key:"getWrappedInstance",value:function(){return dt()(o.withRef,"To access the wrapped instance, you need to pass in {withRef: true} as the second argument of the SortableElement() call"),this.refs.wrappedInstance}},{key:"render",value:function(){var t=o.withRef?"wrappedInstance":null;return(0,P.createElement)(e,j({ref:t},mt(this.props,Ut)))}}]),n}(P.Component),Xe(t,"displayName",St("sortableElement",e)),Xe(t,"contextTypes",{manager:lt().object.isRequired}),Xe(t,"propTypes",Gt),Xe(t,"defaultProps",{collection:0}),n}((({item:e,onRemove:t=h.noop,onSelect:n=h.noop,dataHelper:o})=>(0,Ke.isGutentagPrefixed)(e.name)?(0,ve.jsx)(ve.Fragment,{children:(0,ve.jsx)(rn,{onRemove:()=>t(e),onSelect:()=>n(e),item:e,dataHelper:o})}):(0,ve.jsx)(dn,{onRemove:()=>t(e),onSelect:()=>n(e),item:e,dataHelper:o}))),vn=e=>{var t;const n=(0,u.useMemo)((()=>yn()),[]);return(0,ve.jsx)(n,{clientId:null===(t=e.item)||void 0===t?void 0:t.clientId,...e})},yn=()=>(0,l.WithKubioDataHelperProp)(fn),xn=function(e){var t,n,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{withRef:!1};return n=t=function(t){function n(e){var t;return Je(this,n),Xe(nt(nt(t=ot(this,it(n).call(this,e)))),"state",{}),Xe(nt(nt(t)),"handleStart",(function(e){var n=t.props,o=n.distance,i=n.shouldCancelStart;if(2!==e.button&&!i(e)){t.touched=!0,t.position=wt(e);var r=yt(e.target,(function(e){return null!=e.sortableInfo}));if(r&&r.sortableInfo&&t.nodeIsChild(r)&&!t.state.sorting){var s=t.props.useDragHandle,a=r.sortableInfo,l=a.index,c=a.collection;if(a.disabled)return;if(s&&!yt(e.target,Nt))return;t.manager.active={collection:c,index:l},function(e){return e.touches&&e.touches.length||e.changedTouches&&e.changedTouches.length}(e)||"A"!==e.target.tagName||e.preventDefault(),o||(0===t.props.pressDelay?t.handlePress(e):t.pressTimer=setTimeout((function(){return t.handlePress(e)}),t.props.pressDelay))}}})),Xe(nt(nt(t)),"nodeIsChild",(function(e){return e.sortableInfo.manager===t.manager})),Xe(nt(nt(t)),"handleMove",(function(e){var n=t.props,o=n.distance,i=n.pressThreshold;if(!t.state.sorting&&t.touched&&!t._awaitingUpdateBeforeSortStart){var r=wt(e),s={x:t.position.x-r.x,y:t.position.y-r.y},a=Math.abs(s.x)+Math.abs(s.y);t.delta=s,o||i&&!(a>=i)?o&&a>=o&&t.manager.isActive()&&t.handlePress(e):(clearTimeout(t.cancelTimer),t.cancelTimer=setTimeout(t.cancel,0))}})),Xe(nt(nt(t)),"handleEnd",(function(){t.touched=!1,t.cancel()})),Xe(nt(nt(t)),"cancel",(function(){var e=t.props.distance;t.state.sorting||(e||clearTimeout(t.pressTimer),t.manager.active=null)})),Xe(nt(nt(t)),"handlePress",(function(e){try{var n=t.manager.getActive(),o=function(){if(n){var o=function(){var n,o,i,c,g,b,f,v=p.sortableInfo.index,_=(n=p,{bottom:kt((o=window.getComputedStyle(n)).marginBottom),left:kt(o.marginLeft),right:kt(o.marginRight),top:kt(o.marginTop)}),y=function(e){var t=window.getComputedStyle(e);return"grid"===t.display?{x:kt(t.gridColumnGap),y:kt(t.gridRowGap)}:{x:0,y:0}}(t.container),x=t.scrollContainer.getBoundingClientRect(),k=s({index:v,node:p,collection:h});if(t.node=p,t.margin=_,t.gridGap=y,t.width=k.width,t.height=k.height,t.marginOffset={x:t.margin.left+t.margin.right+t.gridGap.x,y:Math.max(t.margin.top,t.margin.bottom,t.gridGap.y)},t.boundingClientRect=p.getBoundingClientRect(),t.containerBoundingRect=x,t.index=v,t.newIndex=v,t.axis={x:r.indexOf("x")>=0,y:r.indexOf("y")>=0},t.offsetEdge=Tt(p,t.container),t.initialOffset=wt(m?Qe({},e,{pageX:t.boundingClientRect.left,pageY:t.boundingClientRect.top}):e),t.initialScroll={left:t.scrollContainer.scrollLeft,top:t.scrollContainer.scrollTop},t.initialWindowScroll={left:window.pageXOffset,top:window.pageYOffset},t.helper=t.helperContainer.appendChild((c="input, textarea, select, canvas, [contenteditable]",g=(i=p).querySelectorAll(c),(f=(b=i.cloneNode(!0)).querySelectorAll(c),function(e){if(Array.isArray(e))return $e(e)}(f)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(f)||Ye(f)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()).forEach((function(e,t){"file"!==e.type&&(e.value=g[t].value),"radio"===e.type&&e.name&&(e.name="__sortableClone__".concat(e.name)),"CANVAS"===e.tagName&&g[t].width>0&&g[t].height>0&&e.getContext("2d").drawImage(g[t],0,0)})),b)),ft(t.helper,{boxSizing:"border-box",height:"".concat(t.height,"px"),left:"".concat(t.boundingClientRect.left-_.left,"px"),pointerEvents:"none",position:"fixed",top:"".concat(t.boundingClientRect.top-_.top,"px"),width:"".concat(t.width,"px")}),m&&t.helper.focus(),l&&(t.sortableGhost=p,ft(p,{opacity:0,visibility:"hidden"})),t.minTranslate={},t.maxTranslate={},m){var S=d?{top:0,left:0,width:t.contentWindow.innerWidth,height:t.contentWindow.innerHeight}:t.containerBoundingRect,E=S.top,w=S.left,T=S.width,j=E+S.height,I=w+T;t.axis.x&&(t.minTranslate.x=w-t.boundingClientRect.left,t.maxTranslate.x=I-(t.boundingClientRect.left+t.width)),t.axis.y&&(t.minTranslate.y=E-t.boundingClientRect.top,t.maxTranslate.y=j-(t.boundingClientRect.top+t.height))}else t.axis.x&&(t.minTranslate.x=(d?0:x.left)-t.boundingClientRect.left-t.width/2,t.maxTranslate.x=(d?t.contentWindow.innerWidth:x.left+x.width)-t.boundingClientRect.left-t.width/2),t.axis.y&&(t.minTranslate.y=(d?0:x.top)-t.boundingClientRect.top-t.height/2,t.maxTranslate.y=(d?t.contentWindow.innerHeight:x.top+x.height)-t.boundingClientRect.top-t.height/2);a&&a.split(" ").forEach((function(e){return t.helper.classList.add(e)})),t.listenerNode=e.touches?p:t.contentWindow,m?(t.listenerNode.addEventListener("wheel",t.handleKeyEnd,!0),t.listenerNode.addEventListener("mousedown",t.handleKeyEnd,!0),t.listenerNode.addEventListener("keydown",t.handleKeyDown)):(gt.move.forEach((function(e){return t.listenerNode.addEventListener(e,t.handleSortMove,!1)})),gt.end.forEach((function(e){return t.listenerNode.addEventListener(e,t.handleSortEnd,!1)}))),t.setState({sorting:!0,sortingIndex:v}),u&&u({node:p,index:v,collection:h,isKeySorting:m,nodes:t.manager.getOrderedRefs(),helper:t.helper},e),m&&t.keyMove(0)},i=t.props,r=i.axis,s=i.getHelperDimensions,a=i.helperClass,l=i.hideSortableGhost,c=i.updateBeforeSortStart,u=i.onSortStart,d=i.useWindowAsScrollContainer,p=n.node,h=n.collection,m=t.manager.isKeySorting,g=function(){if("function"==typeof c){t._awaitingUpdateBeforeSortStart=!0;var n=function(t,n){try{var o=(i=p.sortableInfo.index,Promise.resolve(c({collection:h,index:i,node:p,isKeySorting:m},e)).then((function(){})))}catch(e){return n(!0,e)}var i;return o&&o.then?o.then(n.bind(null,!1),n.bind(null,!0)):n(!1,value)}(0,(function(e,n){if(t._awaitingUpdateBeforeSortStart=!1,e)throw n;return n}));if(n&&n.then)return n.then((function(){}))}}();return g&&g.then?g.then(o):o()}}();return Promise.resolve(o&&o.then?o.then((function(){})):void 0)}catch(e){return Promise.reject(e)}})),Xe(nt(nt(t)),"handleSortMove",(function(e){var n=t.props.onSortMove;"function"==typeof e.preventDefault&&e.preventDefault(),t.updateHelperPosition(e),t.animateNodes(),t.autoscroll(),n&&n(e)})),Xe(nt(nt(t)),"handleSortEnd",(function(e){var n=t.props,o=n.hideSortableGhost,i=n.onSortEnd,r=t.manager,s=r.active.collection,a=r.isKeySorting,l=t.manager.getOrderedRefs();t.listenerNode&&(a?(t.listenerNode.removeEventListener("wheel",t.handleKeyEnd,!0),t.listenerNode.removeEventListener("mousedown",t.handleKeyEnd,!0),t.listenerNode.removeEventListener("keydown",t.handleKeyDown)):(gt.move.forEach((function(e){return t.listenerNode.removeEventListener(e,t.handleSortMove)})),gt.end.forEach((function(e){return t.listenerNode.removeEventListener(e,t.handleSortEnd)})))),t.helper.parentNode.removeChild(t.helper),o&&t.sortableGhost&&ft(t.sortableGhost,{opacity:"",visibility:""});for(var c=0,u=l.length;c<u;c++){var d=l[c],p=d.node;d.edgeOffset=null,d.boundingClientRect=null,vt(p,null),_t(p,null),d.translate=null}t.autoScroller.clear(),t.manager.active=null,t.manager.isKeySorting=!1,t.setState({sorting:!1,sortingIndex:null}),"function"==typeof i&&i({collection:s,newIndex:t.newIndex,oldIndex:t.index,isKeySorting:a,nodes:l},e),t.touched=!1})),Xe(nt(nt(t)),"autoscroll",(function(){var e=t.props.disableAutoscroll,n=t.manager.isKeySorting;if(e)t.autoScroller.clear();else{if(n){var o=Qe({},t.translate),i=0,r=0;return t.axis.x&&(o.x=Math.min(t.maxTranslate.x,Math.max(t.minTranslate.x,t.translate.x)),i=t.translate.x-o.x),t.axis.y&&(o.y=Math.min(t.maxTranslate.y,Math.max(t.minTranslate.y,t.translate.y)),r=t.translate.y-o.y),t.translate=o,vt(t.helper,t.translate),t.scrollContainer.scrollLeft+=i,void(t.scrollContainer.scrollTop+=r)}t.autoScroller.update({height:t.height,maxTranslate:t.maxTranslate,minTranslate:t.minTranslate,translate:t.translate,width:t.width})}})),Xe(nt(nt(t)),"onAutoScroll",(function(e){t.translate.x+=e.left,t.translate.y+=e.top,t.animateNodes()})),Xe(nt(nt(t)),"handleKeyDown",(function(e){var n=e.keyCode,o=t.props,i=o.shouldCancelStart,r=o.keyCodes,s=Qe({},Lt,void 0===r?{}:r);t.manager.active&&!t.manager.isKeySorting||!(t.manager.active||s.lift.includes(n)&&!i(e)&&t.isValidSortingTarget(e))||(e.stopPropagation(),e.preventDefault(),s.lift.includes(n)&&!t.manager.active?t.keyLift(e):s.drop.includes(n)&&t.manager.active?t.keyDrop(e):s.cancel.includes(n)?(t.newIndex=t.manager.active.index,t.keyDrop(e)):s.up.includes(n)?t.keyMove(-1):s.down.includes(n)&&t.keyMove(1))})),Xe(nt(nt(t)),"keyLift",(function(e){var n=e.target,o=yt(n,(function(e){return null!=e.sortableInfo})).sortableInfo,i=o.index,r=o.collection;t.initialFocusedNode=n,t.manager.isKeySorting=!0,t.manager.active={index:i,collection:r},t.handlePress(e)})),Xe(nt(nt(t)),"keyMove",(function(e){var n=t.manager.getOrderedRefs(),o=n[n.length-1].node.sortableInfo.index,i=t.newIndex+e,r=t.newIndex;if(!(i<0||i>o)){t.prevIndex=r,t.newIndex=i;var s=function(e,t,n){return e<n&&e>t?e-1:e>n&&e<t?e+1:e}(t.newIndex,t.prevIndex,t.index),a=n.find((function(e){return e.node.sortableInfo.index===s})),l=a.node,c=t.containerScrollDelta,u=a.boundingClientRect||Et(l,c),d=a.translate||{x:0,y:0},p=u.top+d.y-c.top,h=u.left+d.x-c.left,m=r<i,g=m&&t.axis.x?l.offsetWidth-t.width:0,b=m&&t.axis.y?l.offsetHeight-t.height:0;t.handleSortMove({pageX:h+g,pageY:p+b,ignoreTransition:0===e})}})),Xe(nt(nt(t)),"keyDrop",(function(e){t.handleSortEnd(e),t.initialFocusedNode&&t.initialFocusedNode.focus()})),Xe(nt(nt(t)),"handleKeyEnd",(function(e){t.manager.active&&t.keyDrop(e)})),Xe(nt(nt(t)),"isValidSortingTarget",(function(e){var n=t.props.useDragHandle,o=e.target,i=yt(o,(function(e){return null!=e.sortableInfo}));return i&&i.sortableInfo&&!i.sortableInfo.disabled&&(n?Nt(o):o.sortableInfo)})),function(e){dt()(!(e.distance&&e.pressDelay),"Attempted to set both `pressDelay` and `distance` on SortableContainer, you may only use one or the other, not both at the same time.")}(e),t.manager=new pt,t.events={end:t.handleEnd,move:t.handleMove,start:t.handleStart},t}return st(n,t),tt(n,[{key:"getChildContext",value:function(){return{manager:this.manager}}},{key:"componentDidMount",value:function(){var e=this,t=this.props.useWindowAsScrollContainer,n=this.getContainer();Promise.resolve(n).then((function(n){e.container=n,e.document=e.container.ownerDocument||document;var o=e.props.contentWindow||e.document.defaultView||window;e.contentWindow="function"==typeof o?o():o,e.scrollContainer=t?e.document.scrollingElement||e.document.documentElement:It(e.container)||e.container,e.autoScroller=new Mt(e.scrollContainer,e.onAutoScroll),Object.keys(e.events).forEach((function(t){return gt[t].forEach((function(n){return e.container.addEventListener(n,e.events[t],!1)}))})),e.container.addEventListener("keydown",e.handleKeyDown)}))}},{key:"componentWillUnmount",value:function(){var e=this;this.helper&&this.helper.parentNode&&this.helper.parentNode.removeChild(this.helper),this.container&&(Object.keys(this.events).forEach((function(t){return gt[t].forEach((function(n){return e.container.removeEventListener(n,e.events[t])}))})),this.container.removeEventListener("keydown",this.handleKeyDown))}},{key:"updateHelperPosition",value:function(e){var t=this.props,n=t.lockAxis,o=t.lockOffset,i=t.lockToContainerEdges,r=t.transitionDuration,s=t.keyboardSortingTransitionDuration,a=void 0===s?r:s,l=this.manager.isKeySorting,c=e.ignoreTransition,u=wt(e),d={x:u.x-this.initialOffset.x,y:u.y-this.initialOffset.y};if(d.y-=window.pageYOffset-this.initialWindowScroll.top,d.x-=window.pageXOffset-this.initialWindowScroll.left,this.translate=d,i){var p=function(e){var t=e.height,n=e.width,o=e.lockOffset,i=Array.isArray(o)?o:[o,o];dt()(2===i.length,"lockOffset prop of SortableContainer should be a single value or an array of exactly two values. Given %s",o);var r=We(i,2),s=r[0],a=r[1];return[jt({height:t,lockOffset:s,width:n}),jt({height:t,lockOffset:a,width:n})]}({height:this.height,lockOffset:o,width:this.width}),h=We(p,2),m=h[0],g=h[1],b={x:this.width/2-m.x,y:this.height/2-m.y},f={x:this.width/2-g.x,y:this.height/2-g.y};d.x=xt(this.minTranslate.x+b.x,this.maxTranslate.x-f.x,d.x),d.y=xt(this.minTranslate.y+b.y,this.maxTranslate.y-f.y,d.y)}"x"===n?d.y=0:"y"===n&&(d.x=0),l&&a&&!c&&_t(this.helper,a),vt(this.helper,d)}},{key:"animateNodes",value:function(){var e=this.props,t=e.transitionDuration,n=e.hideSortableGhost,o=e.onSortOver,i=this.containerScrollDelta,r=this.windowScrollDelta,s=this.manager.getOrderedRefs(),a=this.offsetEdge.left+this.translate.x+i.left,l=this.offsetEdge.top+this.translate.y+i.top,c=this.manager.isKeySorting,u=this.newIndex;this.newIndex=null;for(var d=0,p=s.length;d<p;d++){var h=s[d].node,m=h.sortableInfo.index,g=h.offsetWidth,b=h.offsetHeight,f={height:this.height>b?b/2:this.height/2,width:this.width>g?g/2:this.width/2},v=c&&m>this.index&&m<=u,_=c&&m<this.index&&m>=u,y={x:0,y:0},x=s[d].edgeOffset;x||(x=Tt(h,this.container),s[d].edgeOffset=x,c&&(s[d].boundingClientRect=Et(h,i)));var k=d<s.length-1&&s[d+1],S=d>0&&s[d-1];k&&!k.edgeOffset&&(k.edgeOffset=Tt(k.node,this.container),c&&(k.boundingClientRect=Et(k.node,i))),m!==this.index?(t&&_t(h,t),this.axis.x?this.axis.y?_||m<this.index&&(a+r.left-f.width<=x.left&&l+r.top<=x.top+f.height||l+r.top+f.height<=x.top)?(y.x=this.width+this.marginOffset.x,x.left+y.x>this.containerBoundingRect.width-f.width&&k&&(y.x=k.edgeOffset.left-x.left,y.y=k.edgeOffset.top-x.top),null===this.newIndex&&(this.newIndex=m)):(v||m>this.index&&(a+r.left+f.width>=x.left&&l+r.top+f.height>=x.top||l+r.top+f.height>=x.top+b))&&(y.x=-(this.width+this.marginOffset.x),x.left+y.x<this.containerBoundingRect.left+f.width&&S&&(y.x=S.edgeOffset.left-x.left,y.y=S.edgeOffset.top-x.top),this.newIndex=m):v||m>this.index&&a+r.left+f.width>=x.left?(y.x=-(this.width+this.marginOffset.x),this.newIndex=m):(_||m<this.index&&a+r.left<=x.left+f.width)&&(y.x=this.width+this.marginOffset.x,null==this.newIndex&&(this.newIndex=m)):this.axis.y&&(v||m>this.index&&l+r.top+f.height>=x.top?(y.y=-(this.height+this.marginOffset.y),this.newIndex=m):(_||m<this.index&&l+r.top<=x.top+f.height)&&(y.y=this.height+this.marginOffset.y,null==this.newIndex&&(this.newIndex=m))),vt(h,y),s[d].translate=y):n&&(this.sortableGhost=h,ft(h,{opacity:0,visibility:"hidden"}))}null==this.newIndex&&(this.newIndex=this.index),c&&(this.newIndex=u);var E=c?this.prevIndex:u;o&&this.newIndex!==E&&o({collection:this.manager.active.collection,index:this.index,newIndex:this.newIndex,oldIndex:E,isKeySorting:c,nodes:s,helper:this.helper})}},{key:"getWrappedInstance",value:function(){return dt()(o.withRef,"To access the wrapped instance, you need to pass in {withRef: true} as the second argument of the SortableContainer() call"),this.refs.wrappedInstance}},{key:"getContainer",value:function(){var e=this.props.getContainer;return"function"!=typeof e?(0,ct.findDOMNode)(this):e(o.withRef?this.getWrappedInstance():void 0)}},{key:"render",value:function(){var t=o.withRef?"wrappedInstance":null;return(0,P.createElement)(e,j({ref:t},mt(this.props,Ft)))}},{key:"helperContainer",get:function(){var e=this.props.helperContainer;return"function"==typeof e?e():this.props.helperContainer||this.document.body}},{key:"containerScrollDelta",get:function(){return this.props.useWindowAsScrollContainer?{left:0,top:0}:{left:this.scrollContainer.scrollLeft-this.initialScroll.left,top:this.scrollContainer.scrollTop-this.initialScroll.top}}},{key:"windowScrollDelta",get:function(){return{left:this.contentWindow.pageXOffset-this.initialWindowScroll.left,top:this.contentWindow.pageYOffset-this.initialWindowScroll.top}}}]),n}(P.Component),Xe(t,"displayName",St("sortableList",e)),Xe(t,"defaultProps",Dt),Xe(t,"propTypes",Bt),Xe(t,"childContextTypes",{manager:lt().object.isRequired}),n}((({items:e,onRemove:t,onSelect:n})=>(0,ve.jsx)("div",{children:(0,ve.jsx)(E.AsyncModeProvider,{value:!0,children:null==e?void 0:e.map(((e,o)=>(0,ve.jsx)(vn,{item:e,onRemove:t,onSelect:n,index:o},e.clientId)))})}))),kn=({name:e="",reorderBlocks:t,templatePart:n={},blockTypes:o,removeBlocks:i,selectBlock:r,templatePartClientId:s,label:a})=>{const l=null==n?void 0:n.area,c=bn[pn.CONTENT],p=m().get(bn,l,c),f=(0,u.useRef)(),v=(0,u.useRef)(),_=(0,u.useRef)(),[y,k]=(0,u.useState)(!1),{setOpenInserter:S}=(0,E.useDispatch)(g.STORE_KEY),w=p,{isUnlocked:j}=(0,Ve.useTemplatePartLock)(w),[I,P]=(0,u.useState)(!1),{postType:A,postId:R}=(0,E.useSelect)((e=>{var t,n;return(null===(t=e(g.STORE_KEY))||void 0===t||null===(n=t.getPage())||void 0===n?void 0:n.context)||{}}),[]),O=(0,E.useSelect)((e=>{e(g.STORE_KEY).getOpenedInserter()})),{uiVersion:N}=(0,b.useUIVersion)(),M=(0,E.useSelect)((e=>e("core/block-editor").getBlocks(s)),[s]);if("core/post-content"===e&&(0,d.applyFilters)("kubio.showRenderedPostContent","page"!==A,A,R))return(0,ve.jsx)(ve.Fragment,{});const B=e.includes("kubio")&&["header","footer","sidebar"].includes(w),L=["kubio-full-section"];return B&&(j?L.push("kubio-full-section--unlocked"):L.push("kubio-full-section--locked")),(0,ve.jsxs)("div",{ref:f,className:L.join(" "),children:[B&&(0,ve.jsx)("div",{ref:v,tabIndex:-1,role:"button",className:C()("kubio-full-section-overlay",{"kubio-full-section-overlay--show-popup":y})}),(0,ve.jsx)("div",{className:"kubio-subsidebar-container",children:(0,ve.jsxs)("div",{className:C()("components-panel__header","interface-complementary-area-header","kubio-subsidebar-title","kubio-subsidebar-title-header"),tabIndex:-1,children:[(0,ve.jsx)("div",{className:"kubio-sidebar-title-text",children:a||(()=>{let t=hn[l];return t||(t=(()=>{const t=e,n=(0,h.find)(o,{name:t});return(null==n?void 0:n.title)||t})()),t})()}),(0,ve.jsx)("div",{className:"dummy-column"}),(0,ve.jsxs)("div",{ref:_,className:"section-list-header-buttons-holder",children:[B&&!j&&(0,ve.jsx)(Ve.KubioPopup,{position:2===N?"middle right":"top left",className:"kubio-options-popover kubio-template-controls-popover",buttonRef:v,anchorRef:2===N?_:f,selectorToIgnoreOnClickOutside:".h-template-wizard__modal",onOpen:()=>k(!0),onClose:()=>k(!1),children:(0,ve.jsx)(Ve.TemplateLockModal,{title:(0,T.__)("Choose editing mode","kubio"),children:(0,ve.jsx)(Ve.TemplateLockControls,{isWizardShown:I,setIsWizardShown:P,templatePart:w})})}),(0,ve.jsx)(x.Button,{isSmall:!0,icon:ze,className:"section-icon-container",onClick:()=>{r(n.clientId)},showTooltip:!0,tooltipPosition:"top left",label:(0,T.__)("Settings","kubio")}),(0,ve.jsx)(x.Button,{isSmall:!0,icon:we,className:"section-icon-container",onClick:function(){S(`pattern-inserter/${p}-blocks`,n.clientId)},showTooltip:!0,tooltipPosition:"top left",label:(0,T.__)("Add block/section","kubio")})]})]})}),(0,ve.jsx)(xn,{helperClass:"kubio-list-item-is-sorting",helperContainer:()=>f.current,onSortEnd:({oldIndex:e,newIndex:n})=>{t(M,e,n)},lockAxis:"y",useDragHandle:!0,items:M,onRemove:e=>{i([e.clientId],!1)},onSelect:e=>{r(e.clientId)}}),p&&(0,ve.jsx)(x.Button,{isPrimary:!0,onClick:()=>(async(e=l)=>{const t=`pattern-inserter/${m().get(bn,e,c)}`;O!==t&&await S(!1,null),S(t,n.clientId)})(),className:((e,t=[])=>l===pn.HEADER?["btn-primary","header-button"].concat(t).join(" "):["btn-primary"].concat(t).join(" "))(0,["kubio-button-add-blocks","kubio-sidebar-add-section-button"]),children:(0,ve.jsx)("span",{className:"kubio-header-section-main-button",children:(()=>{switch(l){case pn.HEADER:return(0,T.__)("Choose header design","kubio");case pn.FOOTER:return(0,T.__)("Choose footer design","kubio");case pn.SIDEBAR:return(0,T.__)("Add section","kubio");default:return(0,T.__)("Add predesigned section","kubio")}})()})})]})},Sn=(0,k.compose)((0,E.withSelect)((e=>{const{getSelectedBlockClientId:t,getBlock:n,getBlockParents:o,getClientIdsWithDescendants:i}=e("core/block-editor"),r=i().map(n).filter((({name:e})=>gn.includes(e)));return{selectedBlockClientId:t(),templateParts:r,getBlockParents:o}})),(0,E.withDispatch)(((e,{onSelect:t=h.noop,getBlockParents:n,getBlockAttributes:o})=>{const{removeBlocks:i,moveBlockToPosition:r,updateBlockAttributes:s}=e("core/block-editor");return{selectBlock(n){e("core/block-editor").selectBlock(n),t(n)},removeBlocks:i,reorderBlocks:(e,t,o)=>{const i=n(e[t].clientId).pop();r(e[t].clientId,i,i,o)},updateBlockAttribute:(e,t,n)=>{let i=o(e);i=(0,h.set)(i,t,n),s(e,{...i})}}})))((e=>(0,ve.jsx)(en,{children:(0,ve.jsx)("div",{className:"block-editor-block-navigation__container kubio-interface",children:(0,ve.jsx)("div",{className:"block-editor-block-navigation__label",children:(0,ve.jsx)(un,{...e})})})})));function En(){const e=(0,f.useCurrentPageBodyClasses)(),{additionalCSS:t,setAdditionalCSS:n}=(0,v.useGlobalAdditionalCSS)(),[o,i]=(0,u.useState)(t);(0,u.useEffect)((()=>{t!==o&&i(t)}),[t]);const r=(0,k.useDebounce)(n,300);return(0,ve.jsxs)(x.PanelBody,{initialOpen:!0,title:(0,T.__)("Additional CSS","kubio"),children:[(0,ve.jsx)(Ve.CodeMirrorControl,{value:o,onChange:e=>{r(e),i(e)},mode:"css"}),e&&!!e.length&&(0,ve.jsx)(Ve.ControlNotice,{content:(0,ve.jsxs)(ve.Fragment,{children:[(0,ve.jsx)("span",{children:(0,T.__)("Current page has the following classes that can be used as top selectors:","kubio")}),(0,ve.jsx)("div",{children:(0,ve.jsx)("strong",{children:e.join(", ")})})]})})]})}const wn=({areaIdentifier:e})=>{const t=(0,E.useSelect)((e=>e(g.STORE_KEY).getEditorOpenedSidebar()),[]),n=null==t?void 0:t.endsWith(e);return(0,ve.jsx)(ve.Fragment,{children:n&&(0,ve.jsx)(En,{})})},Tn=({parentAreaIdentifier:e})=>(0,ve.jsx)(Oe,{title:(0,T.__)("Additional CSS","kubio"),parentAreaIdentifier:e,areaIdentifier:`${e}/additional-css`,children:(0,ve.jsx)(wn,{areaIdentifier:`${e}/additional-css`})});var jn=n(9590),In=n.n(jn);function Cn(e){return Cn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Cn(e)}var Pn=/^\s+/,An=/\s+$/;function Rn(e,t){if(t=t||{},(e=e||"")instanceof Rn)return e;if(!(this instanceof Rn))return new Rn(e,t);var n=function(e){var t,n,o,i={r:0,g:0,b:0},r=1,s=null,a=null,l=null,c=!1,u=!1;return"string"==typeof e&&(e=function(e){e=e.replace(Pn,"").replace(An,"").toLowerCase();var t,n=!1;if(qn[e])e=qn[e],n=!0;else if("transparent"==e)return{r:0,g:0,b:0,a:0,format:"name"};return(t=lo.rgb.exec(e))?{r:t[1],g:t[2],b:t[3]}:(t=lo.rgba.exec(e))?{r:t[1],g:t[2],b:t[3],a:t[4]}:(t=lo.hsl.exec(e))?{h:t[1],s:t[2],l:t[3]}:(t=lo.hsla.exec(e))?{h:t[1],s:t[2],l:t[3],a:t[4]}:(t=lo.hsv.exec(e))?{h:t[1],s:t[2],v:t[3]}:(t=lo.hsva.exec(e))?{h:t[1],s:t[2],v:t[3],a:t[4]}:(t=lo.hex8.exec(e))?{r:eo(t[1]),g:eo(t[2]),b:eo(t[3]),a:io(t[4]),format:n?"name":"hex8"}:(t=lo.hex6.exec(e))?{r:eo(t[1]),g:eo(t[2]),b:eo(t[3]),format:n?"name":"hex"}:(t=lo.hex4.exec(e))?{r:eo(t[1]+""+t[1]),g:eo(t[2]+""+t[2]),b:eo(t[3]+""+t[3]),a:io(t[4]+""+t[4]),format:n?"name":"hex8"}:!!(t=lo.hex3.exec(e))&&{r:eo(t[1]+""+t[1]),g:eo(t[2]+""+t[2]),b:eo(t[3]+""+t[3]),format:n?"name":"hex"}}(e)),"object"==Cn(e)&&(co(e.r)&&co(e.g)&&co(e.b)?(t=e.r,n=e.g,o=e.b,i={r:255*Qn(t,255),g:255*Qn(n,255),b:255*Qn(o,255)},c=!0,u="%"===String(e.r).substr(-1)?"prgb":"rgb"):co(e.h)&&co(e.s)&&co(e.v)?(s=no(e.s),a=no(e.v),i=function(e,t,n){e=6*Qn(e,360),t=Qn(t,100),n=Qn(n,100);var o=Math.floor(e),i=e-o,r=n*(1-t),s=n*(1-i*t),a=n*(1-(1-i)*t),l=o%6;return{r:255*[n,s,r,r,a,n][l],g:255*[a,n,n,s,r,r][l],b:255*[r,r,a,n,n,s][l]}}(e.h,s,a),c=!0,u="hsv"):co(e.h)&&co(e.s)&&co(e.l)&&(s=no(e.s),l=no(e.l),i=function(e,t,n){var o,i,r;function s(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+(t-e)*(2/3-n)*6:e}if(e=Qn(e,360),t=Qn(t,100),n=Qn(n,100),0===t)o=i=r=n;else{var a=n<.5?n*(1+t):n+t-n*t,l=2*n-a;o=s(l,a,e+1/3),i=s(l,a,e),r=s(l,a,e-1/3)}return{r:255*o,g:255*i,b:255*r}}(e.h,s,l),c=!0,u="hsl"),e.hasOwnProperty("a")&&(r=e.a)),r=Xn(r),{ok:c,format:e.format||u,r:Math.min(255,Math.max(i.r,0)),g:Math.min(255,Math.max(i.g,0)),b:Math.min(255,Math.max(i.b,0)),a:r}}(e);this._originalInput=e,this._r=n.r,this._g=n.g,this._b=n.b,this._a=n.a,this._roundA=Math.round(100*this._a)/100,this._format=t.format||n.format,this._gradientType=t.gradientType,this._r<1&&(this._r=Math.round(this._r)),this._g<1&&(this._g=Math.round(this._g)),this._b<1&&(this._b=Math.round(this._b)),this._ok=n.ok}function On(e,t,n){e=Qn(e,255),t=Qn(t,255),n=Qn(n,255);var o,i,r=Math.max(e,t,n),s=Math.min(e,t,n),a=(r+s)/2;if(r==s)o=i=0;else{var l=r-s;switch(i=a>.5?l/(2-r-s):l/(r+s),r){case e:o=(t-n)/l+(t<n?6:0);break;case t:o=(n-e)/l+2;break;case n:o=(e-t)/l+4}o/=6}return{h:o,s:i,l:a}}function Nn(e,t,n){e=Qn(e,255),t=Qn(t,255),n=Qn(n,255);var o,i,r=Math.max(e,t,n),s=Math.min(e,t,n),a=r,l=r-s;if(i=0===r?0:l/r,r==s)o=0;else{switch(r){case e:o=(t-n)/l+(t<n?6:0);break;case t:o=(n-e)/l+2;break;case n:o=(e-t)/l+4}o/=6}return{h:o,s:i,v:a}}function Mn(e,t,n,o){var i=[to(Math.round(e).toString(16)),to(Math.round(t).toString(16)),to(Math.round(n).toString(16))];return o&&i[0].charAt(0)==i[0].charAt(1)&&i[1].charAt(0)==i[1].charAt(1)&&i[2].charAt(0)==i[2].charAt(1)?i[0].charAt(0)+i[1].charAt(0)+i[2].charAt(0):i.join("")}function Bn(e,t,n,o){return[to(oo(o)),to(Math.round(e).toString(16)),to(Math.round(t).toString(16)),to(Math.round(n).toString(16))].join("")}function Ln(e,t){t=0===t?0:t||10;var n=Rn(e).toHsl();return n.s-=t/100,n.s=Jn(n.s),Rn(n)}function Dn(e,t){t=0===t?0:t||10;var n=Rn(e).toHsl();return n.s+=t/100,n.s=Jn(n.s),Rn(n)}function Fn(e){return Rn(e).desaturate(100)}function Gn(e,t){t=0===t?0:t||10;var n=Rn(e).toHsl();return n.l+=t/100,n.l=Jn(n.l),Rn(n)}function Un(e,t){t=0===t?0:t||10;var n=Rn(e).toRgb();return n.r=Math.max(0,Math.min(255,n.r-Math.round(-t/100*255))),n.g=Math.max(0,Math.min(255,n.g-Math.round(-t/100*255))),n.b=Math.max(0,Math.min(255,n.b-Math.round(-t/100*255))),Rn(n)}function Hn(e,t){t=0===t?0:t||10;var n=Rn(e).toHsl();return n.l-=t/100,n.l=Jn(n.l),Rn(n)}function Vn(e,t){var n=Rn(e).toHsl(),o=(n.h+t)%360;return n.h=o<0?360+o:o,Rn(n)}function Kn(e){var t=Rn(e).toHsl();return t.h=(t.h+180)%360,Rn(t)}function zn(e,t){if(isNaN(t)||t<=0)throw new Error("Argument to polyad must be a positive number");for(var n=Rn(e).toHsl(),o=[Rn(e)],i=360/t,r=1;r<t;r++)o.push(Rn({h:(n.h+r*i)%360,s:n.s,l:n.l}));return o}function $n(e){var t=Rn(e).toHsl(),n=t.h;return[Rn(e),Rn({h:(n+72)%360,s:t.s,l:t.l}),Rn({h:(n+216)%360,s:t.s,l:t.l})]}function Yn(e,t,n){t=t||6,n=n||30;var o=Rn(e).toHsl(),i=360/n,r=[Rn(e)];for(o.h=(o.h-(i*t>>1)+720)%360;--t;)o.h=(o.h+i)%360,r.push(Rn(o));return r}function Wn(e,t){t=t||6;for(var n=Rn(e).toHsv(),o=n.h,i=n.s,r=n.v,s=[],a=1/t;t--;)s.push(Rn({h:o,s:i,v:r})),r=(r+a)%1;return s}Rn.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var e=this.toRgb();return(299*e.r+587*e.g+114*e.b)/1e3},getLuminance:function(){var e,t,n,o=this.toRgb();return e=o.r/255,t=o.g/255,n=o.b/255,.2126*(e<=.03928?e/12.92:Math.pow((e+.055)/1.055,2.4))+.7152*(t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4))+.0722*(n<=.03928?n/12.92:Math.pow((n+.055)/1.055,2.4))},setAlpha:function(e){return this._a=Xn(e),this._roundA=Math.round(100*this._a)/100,this},toHsv:function(){var e=Nn(this._r,this._g,this._b);return{h:360*e.h,s:e.s,v:e.v,a:this._a}},toHsvString:function(){var e=Nn(this._r,this._g,this._b),t=Math.round(360*e.h),n=Math.round(100*e.s),o=Math.round(100*e.v);return 1==this._a?"hsv("+t+", "+n+"%, "+o+"%)":"hsva("+t+", "+n+"%, "+o+"%, "+this._roundA+")"},toHsl:function(){var e=On(this._r,this._g,this._b);return{h:360*e.h,s:e.s,l:e.l,a:this._a}},toHslString:function(){var e=On(this._r,this._g,this._b),t=Math.round(360*e.h),n=Math.round(100*e.s),o=Math.round(100*e.l);return 1==this._a?"hsl("+t+", "+n+"%, "+o+"%)":"hsla("+t+", "+n+"%, "+o+"%, "+this._roundA+")"},toHex:function(e){return Mn(this._r,this._g,this._b,e)},toHexString:function(e){return"#"+this.toHex(e)},toHex8:function(e){return function(e,t,n,o,i){var r=[to(Math.round(e).toString(16)),to(Math.round(t).toString(16)),to(Math.round(n).toString(16)),to(oo(o))];return i&&r[0].charAt(0)==r[0].charAt(1)&&r[1].charAt(0)==r[1].charAt(1)&&r[2].charAt(0)==r[2].charAt(1)&&r[3].charAt(0)==r[3].charAt(1)?r[0].charAt(0)+r[1].charAt(0)+r[2].charAt(0)+r[3].charAt(0):r.join("")}(this._r,this._g,this._b,this._a,e)},toHex8String:function(e){return"#"+this.toHex8(e)},toRgb:function(){return{r:Math.round(this._r),g:Math.round(this._g),b:Math.round(this._b),a:this._a}},toRgbString:function(){return 1==this._a?"rgb("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+")":"rgba("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:Math.round(100*Qn(this._r,255))+"%",g:Math.round(100*Qn(this._g,255))+"%",b:Math.round(100*Qn(this._b,255))+"%",a:this._a}},toPercentageRgbString:function(){return 1==this._a?"rgb("+Math.round(100*Qn(this._r,255))+"%, "+Math.round(100*Qn(this._g,255))+"%, "+Math.round(100*Qn(this._b,255))+"%)":"rgba("+Math.round(100*Qn(this._r,255))+"%, "+Math.round(100*Qn(this._g,255))+"%, "+Math.round(100*Qn(this._b,255))+"%, "+this._roundA+")"},toName:function(){return 0===this._a?"transparent":!(this._a<1)&&(Zn[Mn(this._r,this._g,this._b,!0)]||!1)},toFilter:function(e){var t="#"+Bn(this._r,this._g,this._b,this._a),n=t,o=this._gradientType?"GradientType = 1, ":"";if(e){var i=Rn(e);n="#"+Bn(i._r,i._g,i._b,i._a)}return"progid:DXImageTransform.Microsoft.gradient("+o+"startColorstr="+t+",endColorstr="+n+")"},toString:function(e){var t=!!e;e=e||this._format;var n=!1,o=this._a<1&&this._a>=0;return t||!o||"hex"!==e&&"hex6"!==e&&"hex3"!==e&&"hex4"!==e&&"hex8"!==e&&"name"!==e?("rgb"===e&&(n=this.toRgbString()),"prgb"===e&&(n=this.toPercentageRgbString()),"hex"!==e&&"hex6"!==e||(n=this.toHexString()),"hex3"===e&&(n=this.toHexString(!0)),"hex4"===e&&(n=this.toHex8String(!0)),"hex8"===e&&(n=this.toHex8String()),"name"===e&&(n=this.toName()),"hsl"===e&&(n=this.toHslString()),"hsv"===e&&(n=this.toHsvString()),n||this.toHexString()):"name"===e&&0===this._a?this.toName():this.toRgbString()},clone:function(){return Rn(this.toString())},_applyModification:function(e,t){var n=e.apply(null,[this].concat([].slice.call(t)));return this._r=n._r,this._g=n._g,this._b=n._b,this.setAlpha(n._a),this},lighten:function(){return this._applyModification(Gn,arguments)},brighten:function(){return this._applyModification(Un,arguments)},darken:function(){return this._applyModification(Hn,arguments)},desaturate:function(){return this._applyModification(Ln,arguments)},saturate:function(){return this._applyModification(Dn,arguments)},greyscale:function(){return this._applyModification(Fn,arguments)},spin:function(){return this._applyModification(Vn,arguments)},_applyCombination:function(e,t){return e.apply(null,[this].concat([].slice.call(t)))},analogous:function(){return this._applyCombination(Yn,arguments)},complement:function(){return this._applyCombination(Kn,arguments)},monochromatic:function(){return this._applyCombination(Wn,arguments)},splitcomplement:function(){return this._applyCombination($n,arguments)},triad:function(){return this._applyCombination(zn,[3])},tetrad:function(){return this._applyCombination(zn,[4])}},Rn.fromRatio=function(e,t){if("object"==Cn(e)){var n={};for(var o in e)e.hasOwnProperty(o)&&(n[o]="a"===o?e[o]:no(e[o]));e=n}return Rn(e,t)},Rn.equals=function(e,t){return!(!e||!t)&&Rn(e).toRgbString()==Rn(t).toRgbString()},Rn.random=function(){return Rn.fromRatio({r:Math.random(),g:Math.random(),b:Math.random()})},Rn.mix=function(e,t,n){n=0===n?0:n||50;var o=Rn(e).toRgb(),i=Rn(t).toRgb(),r=n/100;return Rn({r:(i.r-o.r)*r+o.r,g:(i.g-o.g)*r+o.g,b:(i.b-o.b)*r+o.b,a:(i.a-o.a)*r+o.a})},Rn.readability=function(e,t){var n=Rn(e),o=Rn(t);return(Math.max(n.getLuminance(),o.getLuminance())+.05)/(Math.min(n.getLuminance(),o.getLuminance())+.05)},Rn.isReadable=function(e,t,n){var o,i,r,s,a,l=Rn.readability(e,t);switch(i=!1,(r=n,"AA"!==(s=((r=r||{level:"AA",size:"small"}).level||"AA").toUpperCase())&&"AAA"!==s&&(s="AA"),"small"!==(a=(r.size||"small").toLowerCase())&&"large"!==a&&(a="small"),o={level:s,size:a}).level+o.size){case"AAsmall":case"AAAlarge":i=l>=4.5;break;case"AAlarge":i=l>=3;break;case"AAAsmall":i=l>=7}return i},Rn.mostReadable=function(e,t,n){var o,i,r,s,a=null,l=0;i=(n=n||{}).includeFallbackColors,r=n.level,s=n.size;for(var c=0;c<t.length;c++)(o=Rn.readability(e,t[c]))>l&&(l=o,a=Rn(t[c]));return Rn.isReadable(e,a,{level:r,size:s})||!i?a:(n.includeFallbackColors=!1,Rn.mostReadable(e,["#fff","#000"],n))};var qn=Rn.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},Zn=Rn.hexNames=function(e){var t={};for(var n in e)e.hasOwnProperty(n)&&(t[e[n]]=n);return t}(qn);function Xn(e){return e=parseFloat(e),(isNaN(e)||e<0||e>1)&&(e=1),e}function Qn(e,t){(function(e){return"string"==typeof e&&-1!=e.indexOf(".")&&1===parseFloat(e)})(e)&&(e="100%");var n=function(e){return"string"==typeof e&&-1!=e.indexOf("%")}(e);return e=Math.min(t,Math.max(0,parseFloat(e))),n&&(e=parseInt(e*t,10)/100),Math.abs(e-t)<1e-6?1:e%t/parseFloat(t)}function Jn(e){return Math.min(1,Math.max(0,e))}function eo(e){return parseInt(e,16)}function to(e){return 1==e.length?"0"+e:""+e}function no(e){return e<=1&&(e=100*e+"%"),e}function oo(e){return Math.round(255*parseFloat(e)).toString(16)}function io(e){return eo(e)/255}var ro,so,ao,lo=(so="[\\s|\\(]+("+(ro="(?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?)")+")[,|\\s]+("+ro+")[,|\\s]+("+ro+")\\s*\\)?",ao="[\\s|\\(]+("+ro+")[,|\\s]+("+ro+")[,|\\s]+("+ro+")[,|\\s]+("+ro+")\\s*\\)?",{CSS_UNIT:new RegExp(ro),rgb:new RegExp("rgb"+so),rgba:new RegExp("rgba"+ao),hsl:new RegExp("hsl"+so),hsla:new RegExp("hsla"+ao),hsv:new RegExp("hsv"+so),hsva:new RegExp("hsva"+ao),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/});function co(e){return!!lo.CSS_UNIT.exec(e)}const uo=window.kubio.pro,po=[{label:(0,T.__)("Kubio Default","kubio"),colors:[{slug:"kubio-color-1",color:[3,169,244]},{slug:"kubio-color-2",color:[247,144,7]},{slug:"kubio-color-3",color:[0,191,135]},{slug:"kubio-color-4",color:[102,50,255]},{slug:"kubio-color-5",color:[255,255,255]},{slug:"kubio-color-6",color:[0,0,0]}]},{label:(0,T.__)("Vibrant & Elegant","kubio"),colors:[{slug:"kubio-color-1",color:[48,62,122]},{slug:"kubio-color-2",color:[247,229,151]},{slug:"kubio-color-3",color:[246,97,97]},{slug:"kubio-color-4",color:[158,201,226]},{slug:"kubio-color-5",color:[246,248,250]},{slug:"kubio-color-6",color:[32,42,84]}]},{label:(0,T.__)("XPR | Glaucous & Coquelicot","kubio"),colors:[{slug:"kubio-color-1",color:[233,63,12]},{slug:"kubio-color-2",color:[238,192,13]},{slug:"kubio-color-3",color:[9,164,207]},{slug:"kubio-color-4",color:[181,214,209]},{slug:"kubio-color-5",color:[239,249,235]},{slug:"kubio-color-6",color:[85,119,173]}]},{label:(0,T.__)("XPR | Fruits & Jellies","kubio"),colors:[{slug:"kubio-color-1",color:[90,209,0]},{slug:"kubio-color-2",color:[0,176,244]},{slug:"kubio-color-3",color:[94,204,227]},{slug:"kubio-color-4",color:[255,181,0]},{slug:"kubio-color-5",color:[239,249,235]},{slug:"kubio-color-6",color:[23,37,42]}]},{label:(0,T.__)("XPR-1","kubio"),colors:[{slug:"kubio-color-1",color:[255,137,0]},{slug:"kubio-color-2",color:[0,144,183]},{slug:"kubio-color-3",color:[180,180,180]},{slug:"kubio-color-4",color:[230,230,230]},{slug:"kubio-color-5",color:[246,248,250]},{slug:"kubio-color-6",color:[58,58,58]}]},{label:(0,T.__)("XPR-2","kubio"),colors:[{slug:"kubio-color-1",color:[122,146,0]},{slug:"kubio-color-2",color:[200,0,69]},{slug:"kubio-color-3",color:[248,110,0]},{slug:"kubio-color-4",color:[255,194,0]},{slug:"kubio-color-5",color:[246,248,250]},{slug:"kubio-color-6",color:[71,0,55]}]},{label:(0,T.__)("XPR-3","kubio"),colors:[{slug:"kubio-color-1",color:[3,12,73]},{slug:"kubio-color-2",color:[255,0,0]},{slug:"kubio-color-3",color:[191,234,238]},{slug:"kubio-color-4",color:[255,181,0]},{slug:"kubio-color-5",color:[226,235,231]},{slug:"kubio-color-6",color:[23,37,42]}]},{label:(0,T.__)("XPR-4","kubio"),colors:[{slug:"kubio-color-1",color:[153,0,255]},{slug:"kubio-color-2",color:[237,0,166]},{slug:"kubio-color-3",color:[172,255,0]},{slug:"kubio-color-4",color:[243,162,0]},{slug:"kubio-color-5",color:[215,228,228]},{slug:"kubio-color-6",color:[66,157,255]}]},{label:(0,T.__)("XPR-5","kubio"),colors:[{slug:"kubio-color-1",color:[31,43,87]},{slug:"kubio-color-2",color:[153,187,227]},{slug:"kubio-color-3",color:[70,124,198]},{slug:"kubio-color-4",color:[225,98,66]},{slug:"kubio-color-5",color:[231,240,249]},{slug:"kubio-color-6",color:[71,0,55]}]},{label:(0,T.__)("XPR-6","kubio"),colors:[{slug:"kubio-color-1",color:[237,59,56]},{slug:"kubio-color-2",color:[242,250,200]},{slug:"kubio-color-3",color:[208,238,57]},{slug:"kubio-color-4",color:[222,235,171]},{slug:"kubio-color-5",color:[238,240,231]},{slug:"kubio-color-6",color:[23,37,42]}]},{label:(0,T.__)("XPR-7","kubio"),colors:[{slug:"kubio-color-1",color:[0,192,150]},{slug:"kubio-color-2",color:[0,231,153]},{slug:"kubio-color-3",color:[51,247,133]},{slug:"kubio-color-4",color:[152,255,129]},{slug:"kubio-color-5",color:[242,252,247]},{slug:"kubio-color-6",color:[23,37,42]}]},{label:(0,T.__)("XPR-8","kubio"),colors:[{slug:"kubio-color-1",color:[20,30,112]},{slug:"kubio-color-2",color:[39,76,196]},{slug:"kubio-color-3",color:[69,168,255]},{slug:"kubio-color-4",color:[94,247,255]},{slug:"kubio-color-5",color:[236,246,255]},{slug:"kubio-color-6",color:[27,46,77]}]}];po.forEach(((e,t)=>(t>1&&(e[uo.PRO_ON_FREE_FLAG]=!0),e)));const ho=po,mo=()=>{const{getPalette:e,setPalette:t}=(0,v.useGlobalDataColors)(),n=e(),[o,i]=(0,u.useState)(n),r=(0,E.useSelect)((e=>{var t,n;return(null===(t=e("kubio/edit-site"))||void 0===t||null===(n=t.getSettings())||void 0===n?void 0:n.isKubioTheme)||null})),s=(0,u.useCallback)(((e,n)=>{const r=Rn(n),s=[r._r,r._g,r._b],a=[...o];a[e]={...a[e],color:s},In()(o[e].color,a[e].color)||(i(a),t(a))}),[i,t,o]),a=(0,u.useCallback)((e=>{i([...e]),t([...e])}),[i,t]),l=e=>()=>{a(e.colors)},c=e=>t=>{s(e,t)},d=(0,u.useCallback)((()=>{const e={slug:"kubio-color-"+(parseInt(o.length)+1),color:[255,255,255]};o.push(e),t(o)}),[i,t,o]),p=(0,u.useCallback)((e=>{o.splice(e,1),t(o)}),[i,t,o]);return(0,ve.jsxs)(x.PanelBody,{title:(0,T.__)("Color Palette","kubio"),className:"kubio-color-palette-panel",children:[(0,ve.jsxs)(x.BaseControl,{children:[(0,ve.jsxs)(x.Flex,{justify:"center",className:"",children:[(0,ve.jsx)(x.FlexBlock,{children:(0,ve.jsx)(x.BaseControl,{children:(0,T.__)("Current color scheme","kubio")})}),(0,ve.jsx)(x.FlexItem,{children:(0,ve.jsx)("span",{className:"c-components-units-list",children:(0,ve.jsx)("span",{role:"button",tabIndex:0,className:"c-components-units-list__item is-selected add-colors-button",onClick:d,children:(0,T.__)("Add colors","kubio")},"palette-add-color")})})]}),(0,ve.jsx)(x.Flex,{gap:0,className:"kubio-current-colors-palette",children:o.map((({color:e,slug:t},n)=>{const o=`rgb(${e.join(",")})`;return(0,ve.jsx)(Ve.ColorIndicatorPopover,{color:o,onChange:c(n),alpha:!1,showPalette:!1,returnRawValue:!0,disabled:!1,hasButton:n>5,buttonIcon:!1,buttonText:(0,T.__)("Remove color","kubio"),onReset:()=>p(n)},`${t}-${n}`)}))})]}),!r&&(0,ve.jsx)(Ve.ControlNotice,{className:"notice-general-settings no-padding",content:(0,T.__)("These settings are applied to Kubio blocks and the blocks within.","kubio")}),(0,ve.jsx)(Ve.SeparatorHorizontalLine,{}),(0,ve.jsx)(x.BaseControl,{label:(0,T.__)("More Palettes","kubio"),className:"more_palettes_base",children:ho.map(((e,t)=>(0,ve.jsx)(x.BaseControl,{label:e.label,className:C()("kubio-color-scheme-base-control"),children:(0,ve.jsx)(x.Button,{className:"kubio-color-scheme-selector",onClick:l(e),children:(0,ve.jsx)(x.Flex,{gap:0,children:e.colors.map((({slug:e,color:t})=>(0,ve.jsx)(Ve.ColorIndicator,{value:`rgb(${t.join(",")})`},e)))})},e.label)},t)))})]})},go=({areaIdentifier:e})=>(0,E.useSelect)((t=>t(g.STORE_KEY).isEditorSidebarOpened(e)),[])&&(0,ve.jsx)(mo,{});function bo({parentAreaIdentifier:e}){return(0,ve.jsx)(Oe,{title:"Color Scheme",parentAreaIdentifier:e,areaIdentifier:`${e}/color-scheme`,children:(0,ve.jsx)(go,{areaIdentifier:`${e}/color-scheme`})})}function fo(){const{globalStyle:e,getStyleDefaultGlobalValue:t}=(0,v.useGlobalDataStyle)(),n={styledComponent:"transition"};return(0,ve.jsx)(ve.Fragment,{children:(0,ve.jsx)(x.PanelBody,{initialOpen:!0,title:(0,T.__)("Effects","kubio"),children:(0,ve.jsx)(Ve.RangeWithUnitControl,{label:(0,T.__)("Transition Duration","kubio"),value:(o={unit:"s"},e.getStyle("duration",o,{...n})),onChange:t=>((t,o)=>e.setStyle("duration",o,{...n}))(0,t),onReset:()=>(o=>{const i={...n},r=t(o,i);r?e.setStyle(o,r,i):e.setStyle(o,null,{...i,unset:!0})})("duration"),min:0,max:5,step:.01})})});var o}const vo=({areaIdentifier:e})=>{const t=(0,E.useSelect)((t=>t(g.STORE_KEY).isEditorSidebarOpened(e)),[]),n=(0,E.useSelect)((e=>{var t,n;return(null===(t=e("kubio/edit-site"))||void 0===t||null===(n=t.getSettings())||void 0===n?void 0:n.isKubioTheme)||null}));return t&&(0,ve.jsxs)(ve.Fragment,{children:[(0,ve.jsx)(fo,{}),!n&&(0,ve.jsx)(Ve.ControlNotice,{className:"notice-general-settings",content:(0,T.__)("These settings are applied to Kubio blocks and the blocks within.","kubio")})]})},_o=({parentAreaIdentifier:e})=>(0,ve.jsx)(Oe,{title:(0,T.__)("Global Effects","kubio"),label:(0,T.__)("Effects","kubio"),parentAreaIdentifier:e,areaIdentifier:`${e}/effects`,children:(0,ve.jsx)(vo,{areaIdentifier:`${e}/effects`})}),yo=window.kubio.advancedPanel,xo=()=>{const[e,t]=(0,u.useState)(""),{globalStyle:n,resetToInitialData:o}=(0,v.useGlobalDataStyle)(),i="form-fields",r={type:l.WithDataPathTypes.STYLE,style:i,dataHelper:n};return(0,ve.jsx)(x.PanelBody,{initialOpen:!1,title:(0,T.__)("Form fields","kubio"),children:(0,ve.jsxs)(x.BaseControl,{label:(0,T.__)("State","kubio"),children:[(0,ve.jsx)(yo.StatesControl,{activeState:e,setActiveState:t,availableStates:["normal","hover","focus","disabled"]}),(0,ve.jsx)(Ve.ColorWithPath,{label:(0,T.__)("Text color","kubio"),path:"typography.color",state:e,...r,onReset:o("typography.color",{styledComponent:i,state:e})}),(0,ve.jsx)(Ve.ColorWithPath,{label:(0,T.__)("Background color","kubio"),state:e,path:"background.color",showReset:!0,...r,onReset:o("background.color",{styledComponent:i,state:e})}),(0,ve.jsx)(Ve.ColorWithPath,{label:(0,T.__)("Border color","kubio"),path:["border.top.color","border.bottom.color","border.left.color","border.right.color"],state:e,...r,onReset:o(["border.top.color","border.bottom.color","border.left.color","border.right.color"],{styledComponent:i,state:e})}),(0,ve.jsx)(Ve.SeparatorHorizontalLine,{}),(0,ve.jsx)(Ve.TypographyControlPopupWithPath,{path:"typography",...r,onReset:o("typography",{styledComponent:i})}),(0,ve.jsx)(Ve.SeparatorHorizontalLine,{}),(0,ve.jsx)(Ve.BoxUnitValueControlWithPath,{label:(0,T.__)("Padding","kubio"),path:"padding",...r,onReset:o("padding",{styledComponent:i})}),(0,ve.jsx)(Ve.BoxUnitValueControlWithPath,{label:(0,T.__)("Margin","kubio"),path:"margin",...r,onReset:o("margin",{styledComponent:i})}),(0,ve.jsx)(Ve.SeparatorHorizontalLine,{}),(0,ve.jsx)(Ve.BordersAndRadiusWithPath,{path:"border",...r,withColor:!1,onReset:o("border",{styledComponent:i})})]})})},ko=({styledElement:e="form-submit-button",title:t=(0,T.__)("Form submit button","kubio")})=>{const[n,o]=(0,u.useState)(""),{globalStyle:i,resetToInitialData:r}=(0,v.useGlobalDataStyle)(),s={type:l.WithDataPathTypes.STYLE,style:e,dataHelper:i};return(0,ve.jsx)(x.PanelBody,{initialOpen:!1,title:t,children:(0,ve.jsxs)(x.BaseControl,{label:(0,T.__)("State","kubio"),children:[(0,ve.jsx)(yo.StatesControl,{activeState:n,setActiveState:o,availableStates:["normal","hover","disabled"]}),(0,ve.jsx)(Ve.GradientColorPickerWithPath,{label:(0,T.__)("Background","kubio"),path:"background",state:n,...s,onReset:r("background",{styledComponent:e,state:n})}),(0,ve.jsx)(Ve.ColorWithPath,{label:(0,T.__)("Text color","kubio"),path:"typography.color",state:n,...s,onReset:r("typography.color",{styledComponent:e,state:n})}),(0,ve.jsx)(Ve.ColorWithPath,{label:(0,T.__)("Border color","kubio"),path:["border.top.color","border.bottom.color","border.left.color","border.right.color"],state:n,...s,onReset:r(["border.top.color","border.bottom.color","border.left.color","border.right.color"],{styledComponent:e,state:n})}),(0,ve.jsx)(Ve.SeparatorHorizontalLine,{}),(0,ve.jsx)(Ve.TypographyControlPopupWithPath,{path:"typography",...s,onReset:r("typography",{styledComponent:e})}),(0,ve.jsx)(Ve.SeparatorHorizontalLine,{}),(0,ve.jsx)(Ve.BoxUnitValueControlWithPath,{label:(0,T.__)("Padding","kubio"),path:"padding",...s,onReset:r("padding",{styledComponent:e})}),(0,ve.jsx)(Ve.BoxUnitValueControlWithPath,{label:(0,T.__)("Margin","kubio"),path:"margin",...s,onReset:r("margin",{styledComponent:e})}),(0,ve.jsx)(Ve.SeparatorHorizontalLine,{}),(0,ve.jsx)(Ve.BordersAndRadiusWithPath,{path:"border",...s,withColor:!1,onReset:r("border",{styledComponent:e})}),(0,ve.jsx)(Ve.SeparatorHorizontalLine,{}),(0,ve.jsx)(Ve.BoxShadowWithPath,{path:"boxShadow",...s,onReset:r("boxShadow",{styledComponent:e})})]})})},So=({areaIdentifier:e})=>{const t=(0,E.useSelect)((t=>t(g.STORE_KEY).isEditorSidebarOpened(e)),[]),n=(0,E.useSelect)((e=>{var t,n;return(null===(t=e("kubio/edit-site"))||void 0===t||null===(n=t.getSettings())||void 0===n?void 0:n.isKubioTheme)||null}));return t&&(0,ve.jsxs)(ve.Fragment,{children:[(0,ve.jsx)(xo,{}),(0,ve.jsx)(ko,{styledElement:"form-button",title:(0,T.__)("Form button","kubio")}),(0,ve.jsx)(ko,{styledElement:"form-submit-button",title:(0,T.__)("Form submit button","kubio")}),(0,ve.jsx)(ko,{styledElement:"form-reset-button",title:(0,T.__)("Form reset button","kubio")}),!n&&(0,ve.jsx)(Ve.ControlNotice,{className:"notice-general-settings",content:(0,T.__)("These settings are applied to Kubio blocks and the blocks within.","kubio")})]})},Eo=({parentAreaIdentifier:e})=>(0,ve.jsx)(Oe,{title:(0,T.__)("Form Elements","kubio"),parentAreaIdentifier:e,areaIdentifier:`${e}/form-elements`,children:(0,ve.jsx)(So,{areaIdentifier:`${e}/form-elements`})}),wo={H1:"h1",H2:"h2",H3:"h3",H4:"h4",H5:"h5",H6:"h6"},To={headingType:{values:wo,options:[{value:wo.H1,label:"H1"},{value:wo.H2,label:"H2"},{value:wo.H3,label:"H3"},{value:wo.H4,label:"H4"},{value:wo.H5,label:"H5"},{value:wo.H6,label:"H6"}]}},jo=()=>{const[e,t]=(0,v.useGlobalDataSetting)("googleFonts.serveLocally");return(0,ve.jsxs)(ve.Fragment,{children:[(0,ve.jsx)(Ve.ToggleControl,{label:(0,T.__)("Serve Google Fonts locally","kubio"),value:e,onChange:t}),(0,ve.jsx)(Ve.ControlNotice,{className:"notice-general-settings no-padding",content:(0,T.__)("When this option is turned on the Google Fonts used in your site will be downloaded and served from your server instead of the Google server. This will minimize the DNS requests, reduce the Cumulative Layout Shift and serve your Google Fonts in a 100% GDPR compliant way.","kubio")})]})},{weightOptions:Io,sizeUnitsOptions:Co,sizeUnitsConfig:Po,styleOptions:Ao,transformOptions:Ro,decorationOptions:Oo}=Ve.TypographyConfig,No=e=>{const{globalStyle:t,getStyleDefaultGlobalValue:n,getStyleInitialDefaultGlobalValue:o}=(0,v.useGlobalDataStyle)();return((e,t,n,o)=>{const i={styledComponent:"body"};return{setTypography:(n,o,r={})=>{const s=r.state?`states.${r.state}`:null;r=(0,h.omit)(r,"state");const a=["typography","holders",t,s,n].filter(Boolean).join("."),l=m().merge({},i,r);e.setStyle(a,o,l)},getTypography:(n,o="",r={})=>{const s=r.state?`states.${r.state}`:null;r=(0,h.omit)(r,"state");const a=["typography","holders",t,s,n].filter(Boolean).join("."),l=m().merge({},i,r);return e.getStyle(a,o,l)},unsetTypography:(n,r={})=>{const s=r.state?`states.${r.state}`:null;r=(0,h.omit)(r,"state");const a=["typography","holders",t,s,n].filter(Boolean).join("."),l=m().merge({},i,r),c=o(a,l);e.setStyle(a,c,l)}}})(t,e,0,o)},Mo=({getTypography:e,setTypography:t,unsetTypography:n,showTransform:o=!1,showDecoration:i=!0})=>(0,ve.jsx)(Ve.PopoverOptionsButton,{label:(0,T.__)("Advanced","kubio"),popoverWidth:250,popupContent:(0,ve.jsxs)(ve.Fragment,{children:[o&&(0,ve.jsx)(Ve.GutentagSelectControl,{label:(0,T.__)("Transform","kubio"),options:Ro,value:e("transform"),onChange:e=>t("transform",e)}),i&&(0,ve.jsx)(Ve.GutentagSelectControl,{label:(0,T.__)("Decoration","kubio"),options:Oo,value:e("decoration",""),onChange:e=>t("decoration",e)}),(0,ve.jsx)(Ve.GutentagSelectControl,{label:(0,T.__)("Style","kubio"),options:Ao,value:e("style"),onChange:e=>t("style",e)}),(0,ve.jsx)(Ve.SeparatorHorizontalLine,{fit:!0}),(0,ve.jsx)(Ve.RangeWithUnitControl,{label:(0,T.__)("Line Height","kubio"),value:e("lineHeight"),onChange:e=>t("lineHeight",e),onReset:()=>n("lineHeight"),defaultUnit:"",min:0,max:10,step:.1}),(0,ve.jsx)(Ve.RangeWithUnitControl,{label:(0,T.__)("Letter Spacing","kubio"),value:e("letterSpacing",{value:"",unit:"px"}),onChange:e=>t("letterSpacing",e),onReset:()=>n("letterSpacing"),min:0,max:10,step:.1,units:Co})]})}),Bo=({element:e="h1"})=>{const{getTypography:t,setTypography:n,unsetTypography:o}=No(e),{getFontWeights:i}=(0,v.useGlobalDataFonts)(),r=i(t("family")),s=Io.filter((e=>-1!==r.indexOf(e.value)));return(0,ve.jsxs)(x.BaseControl,{children:[(0,ve.jsxs)(x.Flex,{className:"kubio-font-family-container general-typography",children:[(0,ve.jsx)(x.FlexBlock,{children:(0,ve.jsx)("span",{className:"kubio-font-family-label",children:(0,T.__)("Font family","kubio")})}),(0,ve.jsx)(x.FlexBlock,{className:"kubio-font-family-container__select",children:(0,ve.jsx)(Ve.FontPicker,{value:t("family"),onChange:e=>n("family",e)})})]}),(0,ve.jsx)(Ve.GutentagSelectControl,{className:"kubio-select-control-container",label:(0,T.__)("Font weight","kubio"),options:s,value:parseInt(t("weight")),onChange:e=>n("weight",e)}),(0,ve.jsx)(Ve.InlineLabeledControl,{label:(0,T.__)("Color","kubio"),children:(0,ve.jsx)(Ve.ColorIndicatorPopover,{color:t("color"),onChange:e=>n("color",e),onReset:()=>o("color"),showReset:!0})}),(0,ve.jsx)(Ve.RangeWithUnitControl,{label:(0,T.__)("Size","kubio"),units:Co,optionsByUnit:Po,onChange:e=>n("size",e),value:t("size"),onReset:()=>o("size")}),(0,ve.jsx)(Mo,{getTypography:t,setTypography:n,unsetTypography:o,showTransform:!0})]})},Lo=()=>{const[e,t]=(0,u.useState)(""),{getTypography:n,setTypography:o,unsetTypography:i}=No("a");return(0,ve.jsx)(ve.Fragment,{children:(0,ve.jsxs)(x.BaseControl,{children:[(0,ve.jsxs)(x.Flex,{className:"kubio-font-family-container",children:[(0,ve.jsx)(x.FlexBlock,{children:(0,ve.jsx)("span",{className:"kubio-font-family-label",children:(0,T.__)("Font family","kubio")})}),(0,ve.jsx)(x.FlexItem,{children:(0,ve.jsx)(Ve.FontPicker,{label:(0,T.__)("Font family","kubio"),value:n("family"),onChange:e=>o("family",e)})})]}),(0,ve.jsx)(Ve.GutentagSelectControl,{label:(0,T.__)("Font Weight","kubio"),options:Io,value:parseInt(n("weight")),onChange:e=>o("weight",e)}),(0,ve.jsx)(Ve.RangeWithUnitControl,{label:(0,T.__)("Size","kubio"),units:Co,value:n("size"),onChange:e=>o("size",e),onReset:()=>i("size")}),(0,ve.jsx)(x.BaseControl,{label:(0,T.__)("State","kubio"),children:(0,ve.jsx)(yo.StatesControl,{activeState:e,setActiveState:t,availableStates:["normal","hover","visited"]})}),(0,ve.jsx)(Ve.InlineLabeledControl,{label:(0,T.__)("Color","kubio"),children:(0,ve.jsx)(Ve.ColorIndicatorPopover,{color:n("color","",{state:e}),onChange:t=>o("color",t,{state:e}),onReset:()=>{i("color",{state:e})},showReset:!0})}),(0,ve.jsx)(Ve.GutentagSelectControl,{label:(0,T.__)("Decoration","kubio"),options:Oo,value:n("decoration","",{state:e}),onChange:t=>o("decoration",t,{state:e})}),(0,ve.jsx)(Ve.SeparatorHorizontalLine,{}),(0,ve.jsx)(Mo,{getTypography:n,setTypography:o,unsetTypography:i,showTransform:!0,showDecoration:!1})]})})},Do=()=>{const[e,t]=(0,u.useState)("h1"),n=(0,E.useSelect)((e=>{var t,n;return(null===(t=e("kubio/edit-site"))||void 0===t||null===(n=t.getSettings())||void 0===n?void 0:n.isKubioTheme)||null}));return(0,ve.jsxs)(ve.Fragment,{children:[(0,ve.jsxs)(x.PanelBody,{initialOpen:!1,title:(0,T.__)("Headings","kubio"),children:[(0,ve.jsx)(Ve.ToggleGroup,{label:(0,T.__)("Heading Type","kubio"),options:To.headingType.options,value:e,onChange:t}),(0,ve.jsx)(Bo,{element:e})]}),(0,ve.jsx)(x.PanelBody,{initialOpen:!1,title:(0,T.__)("Texts","kubio"),children:(0,ve.jsx)(Bo,{element:"p"})}),(0,ve.jsx)(x.PanelBody,{initialOpen:!1,title:(0,T.__)("Lead text","kubio"),children:(0,ve.jsx)(Bo,{element:"lead"})}),(0,ve.jsx)(x.PanelBody,{initialOpen:!1,title:(0,T.__)("Links","kubio"),children:(0,ve.jsx)(Lo,{})}),(0,ve.jsx)(x.PanelBody,{initialOpen:!1,title:(0,T.__)("Adobe TypeKit","kubio"),children:(0,ve.jsx)(Ve.TypeKitSetupInterface,{showNotice:!0})}),(0,ve.jsx)(x.PanelBody,{initialOpen:!1,title:(0,T.__)("Google Fonts Settings","kubio"),children:(0,ve.jsx)(jo,{showNotice:!0})}),!n&&(0,ve.jsx)(Ve.ControlNotice,{className:"notice-general-settings",content:(0,T.__)("These settings are applied to Kubio blocks and the blocks within.","kubio")})]})},Fo=({areaIdentifier:e})=>(0,E.useSelect)((t=>t(g.STORE_KEY).isEditorSidebarOpened(e)),[])?(0,ve.jsx)(Do,{}):(0,ve.jsx)(ve.Fragment,{}),Go=({parentAreaIdentifier:e})=>(0,ve.jsx)(Oe,{title:(0,T.__)("Typography","kubio"),parentAreaIdentifier:e,areaIdentifier:`${e}/typography`,children:(0,ve.jsx)(Fo,{areaIdentifier:`${e}/typography`})}),Uo=()=>{const{logoImage:e,alternateLogoImage:t,setLogoImage:n,setAlternateLogoImage:o}=(0,v.useSiteLogoImages)(),[i,r]=(0,S.useEntityProp)("root","site","title"),[s,a]=(0,S.useEntityProp)("root","site","description"),[l,c]=(0,S.useEntityProp)("root","site","site_icon"),{siteIconUrl:u}=(0,E.useSelect)((e=>{var t;const{getMedia:n}=e("core");return{siteIconUrl:(null===(t=n(l))||void 0===t?void 0:t.source_url)||""}}));return(0,ve.jsxs)(x.PanelBody,{title:(0,T.__)("Site Identity","kubio"),className:"kubio-site-identity-panel",children:[(0,ve.jsx)(x.BaseControl,{label:(0,T.__)("Site title","kubio"),id:"site-title-control",children:(0,ve.jsx)(Ve.InputControl,{value:i||"",onChange:e=>r(e)})}),(0,ve.jsx)(x.BaseControl,{label:(0,T.__)("Tagline","kubio"),id:"tagline-control",children:(0,ve.jsx)(Ve.InputControl,{value:s||"",onChange:e=>a(e)})}),(0,ve.jsx)(Ve.SeparatorHorizontalLine,{}),(0,ve.jsx)(x.BaseControl,{label:(0,T.__)("Logo image","kubio"),id:"logo-image-control",children:(0,ve.jsx)(Ve.MediaPicker,{value:e,type:"image",showButton:!0,onReset:()=>{n(null)},buttonLabel:(0,T.__)("Change image","kubio"),removeButtonLabel:(0,T.__)("Reset image","kubio"),onChange:e=>n(e.id)})}),(0,ve.jsx)(x.BaseControl,{label:(0,T.__)("Alternate logo image","kubio"),id:"alternate-logo-image-control",children:(0,ve.jsx)(Ve.MediaPicker,{value:t,type:"image",showButton:!0,showRemoveButton:!0,onReset:()=>{o(null)},buttonLabel:(0,T.__)("Change alternate image","kubio"),removeButtonLabel:(0,T.__)("Reset image","kubio"),onChange:e=>o(e.url)})}),(0,ve.jsx)(Ve.SeparatorHorizontalLine,{}),(0,ve.jsx)(x.BaseControl,{label:(0,T.__)("Site Icon","kubio"),id:"site-icon-control",help:(0,T.__)("Site Icons are what you see in browser tabs, bookmark bars, and within the WordPress mobile apps. Upload one here!","kubio"),children:(0,ve.jsx)(Ve.MediaPicker,{value:""!==u?u:null,type:"image",showButton:!0,showRemoveButton:!0,onReset:()=>{c(null)},buttonLabel:(0,T.__)("Set site icon","kubio"),onChange:e=>c(e.id)})})]})},Ho=({areaIdentifier:e})=>{const t=(0,E.useSelect)((e=>e(g.STORE_KEY).getEditorOpenedSidebar()),[]),n=null==t?void 0:t.endsWith(e);return(0,ve.jsx)(ve.Fragment,{children:n&&(0,ve.jsx)(Uo,{})})};function Vo({parentAreaIdentifier:e}){return(0,ve.jsx)(Oe,{title:(0,T.__)("Site Identity","kubio"),parentAreaIdentifier:e,areaIdentifier:`${e}/site-identity`,children:(0,ve.jsx)(Ho,{areaIdentifier:`${e}/site-identity`})})}const Ko=()=>{const{globalStyle:e,getPropDefaultGlobalValue:t,getStyleDefaultGlobalValue:n}=(0,v.useGlobalDataStyle)(),o=(t,n,o)=>e.getPropInMedia(t,n,{...o}),i=(t,n)=>o=>e.setPropInMedia(t,o,{...n}),r=(n,o={})=>()=>{const i=t(n,o);e.setPropInMedia(n,i,o)},s={styledComponent:"sectionSpacing"};return(0,ve.jsx)(ve.Fragment,{children:(0,ve.jsxs)(x.PanelBody,{initialOpen:!0,title:(0,T.__)("Spacing","kubio"),children:[(0,ve.jsx)(Ve.RangeWithUnitControl,{label:(0,T.__)("Horizontal space between buttons/links","kubio"),units:Ve.sizeUnitsOptions,onChange:i("hSpace"),value:o("hSpace",{unit:"px"}),onReset:r("hSpace")}),(0,ve.jsx)(Ve.RangeWithUnitControl,{label:(0,T.__)("Column contents vertical spacing","kubio"),units:Ve.sizeUnitsOptions,onChange:i("vSpace"),value:o("vSpace",{unit:"px"}),onReset:r("vSpace")}),(0,ve.jsx)(Ve.RangeWithUnitControl,{label:(0,T.__)("Section vertical spacing","kubio"),units:Ve.sizeUnitsOptions,value:e.getStyle("padding.top",{unit:"px"},s),onChange:t=>{e.setStyle("padding.top",t,s),e.setStyle("padding.bottom",t,s)},onReset:()=>{const t=n("padding.top",s);e.setStyle("padding.top",t,s);const o=n("padding.bottom",s);e.setStyle("padding.bottom",o,s)}})]})})},zo=({areaIdentifier:e})=>{const t=(0,E.useSelect)((t=>t(g.STORE_KEY).isEditorSidebarOpened(e)),[]),n=(0,E.useSelect)((e=>{var t,n;return(null===(t=e("kubio/edit-site"))||void 0===t||null===(n=t.getSettings())||void 0===n?void 0:n.isKubioTheme)||null}));return t&&(0,ve.jsxs)(ve.Fragment,{children:[(0,ve.jsx)(Ko,{}),!n&&(0,ve.jsx)(Ve.ControlNotice,{className:"notice-general-settings",content:(0,T.__)("These settings are applied to Kubio blocks and the blocks within.","kubio")})]})},$o=({parentAreaIdentifier:e})=>(0,ve.jsx)(Oe,{title:(0,T.__)("Global Spacing","kubio"),label:(0,T.__)("Spacing","kubio"),parentAreaIdentifier:e,areaIdentifier:`${e}/spacing`,children:(0,ve.jsx)(zo,{areaIdentifier:`${e}/spacing`})});function Yo({parentAreaIdentifier:e}){const t=`${e}/general-settings`;return(0,ve.jsx)(ve.Fragment,{children:(0,ve.jsxs)(Oe,{title:(0,T.__)("General Settings","kubio"),areaIdentifier:t,children:[(0,ve.jsx)(Vo,{parentAreaIdentifier:t}),(0,ve.jsx)(Go,{parentAreaIdentifier:t}),(0,ve.jsx)(Eo,{parentAreaIdentifier:t}),(0,ve.jsx)(bo,{parentAreaIdentifier:t}),(0,ve.jsx)($o,{parentAreaIdentifier:t}),(0,ve.jsx)(_o,{parentAreaIdentifier:t}),(0,ve.jsx)(Tn,{parentAreaIdentifier:t})]})})}const Wo=({addItem:e})=>{const[t,n]=(0,u.useState)(!1),[o,i]=(0,u.useState)((0,Xt.generateItemInitialData)()),r=(0,u.useRef)(null);return(0,ve.jsxs)("div",{ref:r,children:[(0,ve.jsx)(x.Button,{onClick:()=>n(!0),className:"kubio-button-100",isPrimary:!0,children:(0,T.__)("Add menu item","kubio")}),t&&(0,ve.jsx)(x.Popover,{position:"middle left",className:"kubio-options-popover",onClose:()=>{n(!1)},anchorRef:r.current,offset:6,children:(0,ve.jsx)(Ve.MenuItemOptions,{item:o,isAdd:!0,onChange:t=>{e(t),n(!1),i((0,Xt.generateItemInitialData)())},afterUpdateClick:()=>n(!1),updateLabel:(0,T.__)("Add item","kubio")})})]})},qo=({item:e,onItemChange:t,onRemoveItem:n,onTogglePopover:o})=>{const[i,r]=(0,u.useState)(e);(0,u.useEffect)((()=>{r(e)}),[e]);const s=e=>{const n={...i,...e};r(n),t(n)},a=(0,u.useRef)();return(0,ve.jsx)("div",{ref:a,children:(0,ve.jsxs)(x.Flex,{className:"kubio-inspector-menu-item-content",children:[(0,ve.jsx)(x.FlexBlock,{children:(0,ve.jsx)(x.Tooltip,{text:(0,Ke.stripTags)(i.label),children:(0,ve.jsx)("span",{className:"kubio-inspector-menu-item-label",children:(0,Ke.stripTags)(i.label)})})}),(0,ve.jsx)(x.FlexItem,{className:"kubio-inspector-menu-items-settings",children:(0,ve.jsxs)(x.Flex,{gap:1,children:[(0,ve.jsx)(x.FlexItem,{children:(0,ve.jsx)(x.Button,{className:"kubio-inspector-menu-remove-item",isSmall:!0,iconSize:18,onClick:()=>n(i),icon:ye.DeleteItemIcon})}),(0,ve.jsx)(x.FlexItem,{children:(0,ve.jsx)(Ve.PopoverOptionsButton,{iconSize:18,popoverClass:"kubio-menu-edit-popover",popoverAnchorRef:a,popupContent:e=>(0,ve.jsx)(Ve.MenuItemOptions,{item:i,onChange:s,afterUpdateClick:e}),onPopoverClose:()=>o(!1),onPopoverOpen:()=>o(!0)})})]})})]})})},Zo=(e=[],t=0)=>e.filter((e=>e.parent===t)).map((t=>({...t,children:t.id?Zo(e,t.id):[]}))),Xo=(e,t=0)=>e.map(((e,n)=>[{...(0,h.omit)(e,["children","block"]),order:n+1,parent:t},...Xo(e.children||[],e.id)])).reduce(((e,t)=>e.concat(t)),[]),Qo=({items:e=[],setItems:t,isResolving:n,hasResolved:o})=>{const[i,r]=(0,u.useState)(-1/0),s=(0,u.useMemo)((()=>Zo(e)),[e]),a=(0,u.useCallback)((e=>{t(e,!0)}),[t]),l=(0,u.useCallback)((t=>{let n=(0,h.cloneDeep)(e).filter((e=>e.id!==t.id)).map((e=>(e.parent===t.id&&(e.parent=t.parent),e))),o=0;n=n.map((e=>e.parent===t.parent?(o++,{...e,order:o}):e)),a(n)}),[a]),c=(0,u.useCallback)((e=>{const t=Xo(e);a(t)}),[a]),d=(0,u.useCallback)((t=>{if(!t.id)return void console.error("Can not update item without id");const n=(0,h.cloneDeep)(e).map((e=>e.id===t.id?{...e,...t}:e));a(n)}),[a]),p=(0,u.useCallback)((({item:e})=>(0,ve.jsx)(qo,{item:e,onItemChange:d,onRemoveItem:l,onTogglePopover:t=>{r(t?e.id:-1/0)}})),[r,d,l]),m=s.length>0,g=(0,u.useCallback)((e=>e.id===i),[i]);return(0,ve.jsx)(x.BaseControl,{children:(0,ve.jsxs)("div",{className:"kubio-inspector-menu-tree",children:[n&&(0,ve.jsx)(Ve.LoadingPlaceholder,{message:(0,T.__)("Loading menu …","kubio")}),o&&m&&(0,ve.jsx)(Ve.SortableTree,{items:s,renderItem:p,handler:!0,collapsable:!1,onChange:c,isActive:g}),o&&!m&&(0,ve.jsx)(Ve.SmallPlaceholder,{message:(0,T.__)("Empty menu","kubio")})]})})},Jo=({menu:e})=>{const{setItems:t,items:n=[],isResolving:o,hasResolved:i}=(0,Xt.useMenuBlockEditor)(e.id),r=(0,u.useCallback)((e=>{t([...n,{...e,order:n.length+1}],!0)}),[n]);return(0,ve.jsx)(ve.Fragment,{children:(0,ve.jsxs)(x.PanelBody,{title:(0,T.__)("Menu Structure","kubio"),children:[(0,ve.jsx)(Qo,{menuId:e.id,items:n,setItems:t,isResolving:o,hasResolved:i}),(0,ve.jsx)(Wo,{addItem:r})]})})},ei=({menu:e,areaIdentifier:t})=>{const n=(0,E.useSelect)((e=>e(g.STORE_KEY).getEditorOpenedSidebar()));return n&&-1!==n.indexOf(t)&&(0,ve.jsx)(Jo,{menu:e})},ti=({parentAreaIdentifier:e,menu:t})=>{const n=`${e}/menu-${t.id}`;return(0,ve.jsx)(Oe,{title:(0,T.sprintf)(// translators: %s is for the menu name
// translators: %s is for the menu name
(0,T.__)("Menu: %s","kubio"),t.name||(0,T.__)("Unnamed menu","kubio")),label:t.name||(0,T.__)("Unnamed menu","kubio"),parentAreaIdentifier:e,areaIdentifier:n,children:(0,ve.jsx)(ei,{areaIdentifier:n,menu:t})})},ni=()=>{const[e,t]=(0,u.useState)(!1),[n,o]=(0,u.useState)(!1),[i,r]=(0,u.useState)(""),s=(0,u.useRef)(),{saveMenu:a}=(0,E.useDispatch)("core"),{createErrorNotice:l,createInfoNotice:c}=(0,E.useDispatch)(p.store),d=(0,u.useCallback)((()=>{n?c((0,T.__)("Another menu creation is in progress","kubio"),{type:"snackbar"}):(t(!e),r(""))}),[e,t,n]),h=(0,u.useCallback)((async()=>{if(!n){o(!0);try{await a({name:i})}catch(e){l((0,T.__)("Menu creation failed","kubio"),{type:"snackbar"})}t(!1),o(!1)}}),[t,a,i,n,o]);return(0,ve.jsxs)(ve.Fragment,{children:[(0,ve.jsx)(x.BaseControl,{className:"kubio-create-menu-button",children:(0,ve.jsx)(x.Button,{onClick:d,isPrimary:!0,className:"kubio-button-100",ref:s,isBusy:n,children:(0,T.__)("Create menu","kubio")})}),e&&(0,ve.jsx)(x.Popover,{position:"middle left",className:"kubio-options-popover",anchorRef:s.current,onClose:()=>t(!1),offset:6,children:(0,ve.jsxs)("div",{children:[(0,ve.jsx)(x.BaseControl,{children:(0,ve.jsx)(Ve.InputControl,{label:(0,T.__)("Menu name","kubio"),onChange:r,value:i,disabled:n})}),(0,ve.jsx)(x.BaseControl,{children:(0,ve.jsx)(x.Button,{onClick:h,isPrimary:!0,disabled:n,isBusy:n,className:"kubio-button-100",children:(0,T.__)("Create menu","kubio")})})]})})]})},oi=({areaIdentifier:e})=>{const{menus:t}=(0,E.useSelect)((e=>{const{getMenus:t,isResolving:n,hasFinishedResolution:o}=e("core"),i=[{per_page:-1}];return{menus:t(...i),isResolvingMenus:n("getMenus",i),hasResolvedMenus:o("getMenus",i)}}));return(0,ve.jsx)(ve.Fragment,{children:null==t?void 0:t.map((t=>(0,ve.jsx)(ti,{parentAreaIdentifier:e,menu:t},t.id)))})};function ii({parentAreaIdentifier:e}){const t=`${e}/menus-settings`;return(0,ve.jsx)(ve.Fragment,{children:(0,ve.jsxs)(Oe,{title:(0,T.__)("Menus","kubio"),areaIdentifier:t,children:[(0,ve.jsx)(oi,{areaIdentifier:t}),(0,ve.jsx)(ni,{})]})})}const ri=function(){return(0,ve.jsx)(w.PostTypeSupportCheck,{supportKeys:["comments","trackbacks"],children:(0,ve.jsxs)(x.PanelBody,{title:(0,T.__)("Discussion","kubio"),children:[(0,ve.jsx)(w.PostTypeSupportCheck,{supportKeys:"comments",children:(0,ve.jsx)(x.PanelRow,{children:(0,ve.jsx)(w.PostComments,{})})}),(0,ve.jsx)(w.PostTypeSupportCheck,{supportKeys:"trackbacks",children:(0,ve.jsx)(x.PanelRow,{children:(0,ve.jsx)(w.PostPingbacks,{})})})]})})};var si=n(5358);const ai=(0,E.withSelect)((e=>{const{getCurrentPostType:t}=e(si.Ls),{getPostType:n}=e(S.store);return{postType:n(t())}})),li=(0,k.compose)(ai)((function({postType:e}){return(0,ve.jsx)(w.PostFeaturedImageCheck,{children:(0,ve.jsx)(x.PanelBody,{title:(0,h.get)(e,["labels","featured_image"],(0,T.__)("Featured image","kubio")),children:(0,ve.jsx)(w.PostFeaturedImage,{})})})})),ci=function(){const{postType:e}=(0,E.useSelect)((e=>{const{getCurrentPostType:t}=e(si.Ls),{getPostType:n}=e(S.store);return{postType:n(t())}}),[]);return e?(0,ve.jsx)(w.PageAttributesCheck,{children:(0,ve.jsxs)(x.PanelBody,{title:(0,h.get)(e,["labels","attributes"],(0,T.__)("Page attributes","kubio")),children:[(0,ve.jsx)(w.PageAttributesParent,{}),(0,ve.jsx)(x.PanelRow,{children:(0,ve.jsx)(w.PageAttributesOrder,{})})]})}):null},ui=function(){return(0,ve.jsx)(w.PostExcerptCheck,{children:(0,ve.jsx)(x.PanelBody,{title:(0,T.__)("Excerpt","kubio"),children:(0,ve.jsx)(w.PostExcerpt,{})})})},di=window.wp.url,pi=(0,k.compose)([(0,E.withSelect)((e=>{const{isPermalinkEditable:t,getCurrentPost:n,isCurrentPostPublished:o,getPermalinkParts:i,getEditedPostAttribute:r,getEditedPostSlug:s}=e(w.store),{getPostType:a}=e(S.store),{link:l}=n(),c=a(r("type")),u=i();return{postLink:l,isEditable:t(),isPublished:o(),isViewable:(0,h.get)(c,["viewable"],!1),postSlug:(0,di.safeDecodeURIComponent)(s()),postTypeLabel:(0,h.get)(c,["labels","view_item"]),hasPermalinkParts:!!u,permalinkPrefix:null==u?void 0:u.prefix,permalinkSuffix:null==u?void 0:u.suffix}})),(0,k.ifCondition)((({isEnabled:e,postLink:t,isViewable:n,hasPermalinkParts:o})=>e&&t&&n&&o))])((function({postLink:e,permalinkPrefix:t,permalinkSuffix:n,editPermalink:o,postSlug:i,postTypeLabel:r,isEditable:s}){const[a,l]=(0,u.useState)(!1);let c,d,p;return s&&(c=t&&(0,ve.jsx)("span",{className:"edit-post-post-link__link-prefix",children:t}),d=i&&(0,ve.jsx)("span",{className:"edit-post-post-link__link-post-name",children:i}),p=n&&(0,ve.jsx)("span",{className:"edit-post-post-link__link-suffix",children:n})),(0,ve.jsxs)(x.PanelBody,{title:(0,T.__)("Permalink","kubio"),children:[s&&(0,ve.jsxs)("div",{className:"editor-post-link",children:[(0,ve.jsx)(Ve.InputControl,{label:(0,T.__)("URL Slug","kubio"),value:a?"":i,onChange:e=>{o(e),e?a&&l(!1):a||l(!0)},onBlur:e=>{o((0,w.cleanForSlug)(e.target.value)),a&&l(!1)}}),(0,ve.jsxs)("p",{children:[(0,T.__)("The last part of the URL.","kubio")," ",(0,ve.jsx)(x.ExternalLink,{href:"https://wordpress.org/support/article/writing-posts/#post-field-descriptions",children:(0,T.__)("Read about permalinks","kubio")})]})]}),(0,ve.jsx)("h3",{className:"edit-post-post-link__preview-label",children:r||(0,T.__)("View post","kubio")}),(0,ve.jsx)("div",{className:"edit-post-post-link__preview-link-container",children:(0,ve.jsx)(x.ExternalLink,{className:"edit-post-post-link__link",href:e,target:"_blank",children:s?(0,ve.jsxs)(ve.Fragment,{children:[c,d,p]}):e})})]})})),hi=function({taxonomy:e,children:t}){const n=(0,h.get)(e,["labels","menu_name"]);return n?(0,ve.jsx)(x.PanelBody,{title:n,children:t}):null},mi=function(){return(0,ve.jsx)(w.PostTaxonomiesCheck,{children:(0,ve.jsx)(w.PostTaxonomies,{taxonomyWrapper:(e,t)=>(0,ve.jsx)(hi,{taxonomy:t,children:e})})})};function gi({layoutBlock:e}){const{dataHelper:t}=(0,l.useKubioDataHelper)(e),n=(0,ke.useQueryLayout)(t);return(0,ve.jsx)(Ve.SelectWithIconControl,{label:(0,T.__)("Layout","kubio"),...n})}const bi=(0,k.compose)([(0,E.withSelect)((e=>{const{getPage:t=m().noop}=e("kubio/edit-site")||{};return{currentPage:t()}}))])((function(e){const{currentPage:t}=e,{getBlocks:n}=(0,E.useSelect)("core/block-editor"),o=m().get(t,["context","postId"]),[i,r]=(0,u.useState)();return(0,u.useEffect)((()=>{const e=n(),t=(0,Ke.findBlockByName)(e,"kubio/query-layout");r(t)}),[o]),i?(0,ve.jsx)(x.PanelBody,{title:(0,T.__)("Blog layout","kubio"),initialOpen:!0,children:(0,ve.jsx)(gi,{...e,layoutBlock:i})}):null})),fi=function({onNewTemplate:e}){const[t,n]=(0,u.useState)(!1);return(0,ve.jsx)(ve.Fragment,{children:(0,ve.jsxs)("div",{className:"edit-post-template__actions",children:[(0,ve.jsx)(uo.ProItem,{tag:x.Button,isPrimary:!0,onClick:()=>n(!0),urlArgs:{source:"template",content:"create-new"},children:(0,T.__)("Create new template","kubio")}),t&&(0,ve.jsx)(Ve.TemplateWizard,{onNewTemplate:e,onClose:()=>{n(!1)}})]})})},vi=function(){const{currentPostType:e,currentTemplate:t,currentTemplateLabel:n,availableTemplates:o}=(0,E.useSelect)((e=>{var t;const{getCurrentPageTemplate:n,getCurrentPostType:o,getAvailablePageTemplates:i}=e(g.STORE_KEY),r=o();let s=n();r===s&&(s="");const a=i();return{currentPostType:r,currentTemplate:s,currentTemplateLabel:(null===(t=(0,h.find)(a,{value:s}))||void 0===t?void 0:t.label)||"",availableTemplates:a}}),[]),{onNewTemplate:i,assignTemplate:r,assignClassicTemplate:s}=(0,l.useTemplateData)("header"),a=(0,l.useDeepMemo)((()=>{const e=o.reduce(((e,t)=>{const n=t.source||"custom";return{...e,[n]:[...e[n]||[],t]}}),{});return g.templateGroupPriorities.map((t=>({label:g.templateGroups[t],items:e[t]}))).filter((e=>{var t;return null===(t=e.items)||void 0===t?void 0:t.length}))}),[o]);return"page"!==e||"front-page"===(null==t?void 0:t.replace(".php",""))?(0,ve.jsx)(ve.Fragment,{}):(0,ve.jsxs)(x.PanelBody,{title:(0,T.sprintf)(/* translators: %s: template title */ /* translators: %s: template title */(0,T.__)("Template: %s","kubio"),n),children:[(0,ve.jsx)(Ve.GutentagSelectControl,{hideLabelFromVision:!0,label:(0,T.__)("Template:","kubio"),value:t,onChange:async function(e){Object.values(l.defaultTemplatesByPostType).includes(e)&&(e="");const t=o.find((t=>t.value===e));t&&((null==t?void 0:t.isClassicTemplate)?s(e):r(e))},options:a}),(0,ve.jsx)(fi,{onNewTemplate:i})]})},_i=["page","post","product"],yi=({areaIdentifier:e})=>{const{currentSidebar:t,isInnerPage:n,isWooPage:o}=(0,E.useSelect)((e=>({isWooPage:e(g.STORE_KEY).getIsWooCommercePage(),currentSidebar:e(g.STORE_KEY).getEditorOpenedSidebar(),isInnerPage:e(g.STORE_KEY).getIsInnerPage()})),[]),i=null==t?void 0:t.endsWith(e),r=n&&!o;return(0,ve.jsx)("span",{className:"kubio-page-settings",children:i&&(0,ve.jsxs)(ve.Fragment,{children:[(0,ve.jsx)(bi,{}),r&&(0,ve.jsx)(vi,{}),(0,ve.jsx)(pi,{}),(0,ve.jsx)(mi,{}),(0,ve.jsx)(li,{}),(0,ve.jsx)(ui,{}),(0,ve.jsx)(ri,{}),(0,ve.jsx)(ci,{})]})})};function xi({parentAreaIdentifier:e}){const t=`${e}/page-settings`,{postType:n}=(0,E.useSelect)((e=>{const{getCurrentPostType:t}=e(g.STORE_KEY);return{postType:t()}}),[]);return _i.includes(n)?(0,ve.jsx)(ve.Fragment,{children:(0,ve.jsx)(Oe,{title:(0,T.__)("Page Settings","kubio"),areaIdentifier:t,children:(0,ve.jsx)(yi,{areaIdentifier:t})})}):null}const ki=window.wp.apiFetch;var Si=n.n(ki);const Ei=async()=>await Si()({path:"kubio/v1/3rd_party_themes/import_blog"}),wi=["home","index","single","search","archive","singular"],Ti=()=>{const e=(0,f.useGetGlobalSessionProp)("ready",!1),t=(0,f.useGetGlobalSessionProp)("urlBasedTemplatesMap",{}),n=(0,f.useSetGlobalSessionProp)("urlBasedTemplatesMap",{}),[o,i]=(0,u.useState)(!1),{getEntity:r,page:s,templateType:a,templateId:l}=(0,E.useSelect)((e=>{const{getEditedEntityRecord:t}=e("core"),{getPage:n,getEditedPostType:o,getEditedPostId:i}=e(g.STORE_KEY);return{getEntity:t,page:n(),templateType:o(),templateId:i()}}),[]);(0,u.useEffect)((()=>{e||i(!1)}),[e]);const c=(0,u.useCallback)((()=>{const e=r("postType",a,l),t=null==e?void 0:e.kubio_template_source;i(!["kubio","kubio-custom"].includes(t))}),[l,a]),d=(0,u.useCallback)((async()=>{if(null==s||!s.path)return;let e=t[null==s?void 0:s.path],o=!0;if(!e&&null!==e){const i=await window.fetch((0,di.addQueryArgs)(null==s?void 0:s.path,{"__kubio-classic-page-template-slug":1})).then((e=>e.json()));e=i.data||null,n({...t,[null==s?void 0:s.path]:e}),o=i.success}i(o&&wi.includes(e))}),[s,t]),p=(0,u.useCallback)(((e,t)=>{if(e&&t){var n;const t=null==e||null===(n=e.split("//"))||void 0===n?void 0:n.pop();wi.includes(t)?c():i(!1)}else d()}),[]);return(0,u.useEffect)((()=>{e&&p(l,a)}),[e,l,a]),o},ji=()=>{const[e,t]=(0,u.useState)(!1),[n,o]=(0,f.useGlobalSessionProp)("thirdPartyBlockInstalled",!1),i=Ti(),{createSuccessNotice:r,createErrorNotice:s}=(0,E.useDispatch)("core/notices"),a=(0,u.useCallback)((async()=>{t(!0);try{await Ei()}catch(e){return void s((0,T.__)("There was an error while importing the Kubio blog. Please try again","kubio"))}o(!0),r((0,T.__)("Kubio blog templates were imported successfully! Refresh the editor to enjoy the full site editing experience","kubio"),{isDismissible:!0,actions:[{label:(0,T.__)("Refresh page now","kubio"),onClick:()=>window.location.reload()}]}),t(!1)}),[]);return!i||i&&n?(0,ve.jsx)(ve.Fragment,{}):(0,ve.jsxs)("div",{className:"kubio-sidebar-blog-area-import",children:[(0,ve.jsx)("h2",{children:(0,T.__)("💫 Start with the Kubio blog!","kubio")}),(0,ve.jsxs)("p",{children:[(0,T.__)("Kubio comes with a fully customizable blog area for your site.","kubio"),(0,ve.jsx)("br",{}),(0,T.__)("Would you like to use the Kubio blog templates? ","kubio")]}),(0,ve.jsxs)(x.Button,{isPrimary:!0,isBusy:e,onClick:a,children:[!e&&(0,T.__)("Import Kubio blog","kubio"),e&&(0,T.__)("Importing Kubio blog…","kubio")]})]})};function Ii({beforeSectionsList:e,afterSectionsList:t}){const n=He(),{uiVersion:o}=(0,b.useUIVersion)();return(0,ve.jsxs)(Fe,{title:(0,ve.jsxs)(ve.Fragment,{children:[(0,ve.jsx)("span",{className:"preview-notice",children:(0,T.__)("You are editing","kubio")}),(0,ve.jsx)("span",{className:"panel-title site-title",children:(0,Ke.fromHtmlEntities)(n)})]}),areaIdentifier:"document",children:[e,1===o&&(0,ve.jsx)(xi,{parentAreaIdentifier:"document"}),(0,ve.jsx)(ji,{}),(0,ve.jsx)(Sn,{}),2===o&&(0,ve.jsx)(xi,{parentAreaIdentifier:"document"}),(0,ve.jsx)(Yo,{parentAreaIdentifier:"document"}),(0,ve.jsx)(ii,{parentAreaIdentifier:"document"}),(0,ve.jsx)(uo.UpgradeToPro,{urlArgs:{source:"sidebar",content:"pro-upgrade"}}),t]})}const{Slot:Ci,Fill:Pi}=(0,x.createSlotFill)("ColibriEditSiteBlockEditorSidebarInspector"),Ai=()=>{const{subsidebars:e}=(0,E.useSelect)((e=>({subsidebars:e(g.STORE_KEY).getSubSidebars()})));return(0,f.useGetGlobalSessionProp)("ready",!1)?(0,ve.jsxs)(ve.Fragment,{children:[(0,ve.jsx)(Ii,{}),(0,ve.jsx)(Ue,{children:(0,ve.jsx)(Ci,{bubblesVirtually:!0})}),(0,h.map)(e,((e,t)=>(0,ve.jsx)(u.Fragment,{children:e},t)))]}):null},Ri=Pi,Oi=function(){const{isEditorSidebarOpened:e}=(0,E.useSelect)((e=>{let t=e(g.STORE_KEY).isEditorSidebarOpened();return 2===e(g.STORE_KEY).getUIVersion()&&(t=!0),{isEditorSidebarOpened:t}}),[]);return e&&(0,ve.jsx)("div",{className:"kubio-sidebar",children:(0,ve.jsx)(pe.Slot,{scope:`${g.STORE_KEY}/sidebars`})})},Ni=window.kubio.inspectors,Mi={content:(0,ve.jsx)(Ni.ContentBlockInspector,{}),style:(0,ve.jsx)(Ni.StyleBlockInspector,{}),advanced:(0,ve.jsx)(Ni.AdvancedStyleBlockInspector,{})},Bi=(0,ke.getNamesOfBlocks)(),Li=[Bi.HEADER,Bi.FOOTER,Bi.QUERY_LAYOUT,Bi.HERO,Bi.SECTION,Bi.ROW,Bi.COLUMN,Bi.QUERY,Bi.LOOP,Bi.LOOP_ITEM],Di=[{name:"content",title:()=>{const e=(0,E.useSelect)((e=>{var t;return null===(t=e("core/block-editor").getSelectedBlock())||void 0===t?void 0:t.name}));let t=(0,T.__)("Layout","kubio");return-1===Li.indexOf(e)&&(t=(0,T.__)("Content","kubio")),(0,ve.jsxs)("span",{className:"kubio-tab-panel",children:[(0,ve.jsx)(xe,{icon:ye.LayoutIcon}),(0,ve.jsx)("span",{className:"kubio-tab-panel-text",children:t})]})},className:"tab-content"},{name:"style",title:()=>(0,ve.jsxs)("span",{className:"kubio-tab-panel",children:[(0,ve.jsx)(xe,{icon:ye.StyleIcon}),(0,ve.jsx)("span",{className:"kubio-tab-panel-text",children:(0,T.__)("Style","kubio")})]}),className:"tab-style"},{name:"advanced",title:()=>(0,ve.jsxs)("span",{className:"kubio-tab-panel",children:[(0,ve.jsx)(xe,{icon:ye.AdvancedIcon}),(0,ve.jsx)("span",{className:"kubio-tab-panel-text",children:(0,T.__)("Advanced","kubio")})]}),className:"tab-advanced"}],Fi=(0,k.compose)((0,E.withSelect)((e=>{const{getSelectedBlockClientId:t}=e("core/block-editor");return{selectedBlockClientId:t()}})))((({selectedBlockClientId:e})=>{const[t,n]=(0,Ni.useCurrentInspectorTab)();return e&&(0,ve.jsx)(ve.Fragment,{children:(0,ve.jsx)(Ve.TabPanel,{className:"kubio-advanced-block-inspector",currentTab:t,onSelect:n,tabs:Di,children:e=>(0,ve.jsxs)("div",{className:"kubio-block-inspector-tab-content",children:[(0,ve.jsx)(Ni.BlockInspectorTopControls.Slot,{bubblesVirtually:!0}),Mi[e.name]]})})})})),Gi=window.kubio.styleManager,Ui="editor-styles-wrapper",Hi="wp-editor-classic-layout-styles",Vi=e=>{if("BUTTON"===e.nodeName){const t=["forminator-ui","wpcf7-form ","wpforms-form","mc4wp-form"],n=e.closest("form"),o=t.some((e=>{var t;return null==n||null===(t=n.classList)||void 0===t?void 0:t.contains(e)}));if(n&&!n.getAttribute("action")&&!o)return}e.addEventListener("click",(e=>{e.preventDefault()}))},Ki=(0,u.forwardRef)((function({contentRef:e,children:t,head:n,headHTML:o,contentHolderSelector:i,assetsHolderSelector:r,src:s,onLoad:a=h.noop,execStylesheetCompat:c=!0,...d},p){const[m,b]=(0,u.useState)(),[v,_]=(0,u.useState)(),y=(0,f.useCurrentPageBodyClasses)(),x=(0,f.useSetGlobalSessionProp)("ownerDocument"),S=(0,f.useSetGlobalSessionProp)("blockEditorRootClasses",""),w=(0,u.useRef)(),j=(0,f.useGetGlobalSessionProp)("ready",!1),{currentTemplateSource:I,kubioThemesBaseURL:C}=(0,E.useSelect)((e=>{const{getCurrentKubioTemplateSource:t,getSettings:n}=e(g.STORE_KEY);return{currentTemplateSource:t(),kubioThemesBaseURL:n().kubioThemesBaseURL}}),[]);(0,u.useEffect)((()=>{!j&&s&&(b(null),_(null),x(window.document),(0,Gi.removeStyleManager)(m))}),[s,j,x,m]),(0,u.useEffect)((()=>{if(!j||!m)return;const e=j&&s&&m;["kubio-custom","kubio"].includes(I)?(e=>{let t=e.querySelector(".kubio-block-vars-reset");t||(t=e.createElement("style"),t.classList.add("kubio-block-vars-reset"),t.textContent="\n\t\t:root,\n\t\tbody,\n\t\tbody *,\n\t\t.editor-styles-wrapper .block-editor-block-list__layout.is-root-container > *\n\t\t{\n\t\t\t--wp--style--block-gap:0px;\n\t\t\t--gallery-block--gutter-size:0.5em;\n\t\t\t--global-content-width: unset;\n\t\t}",e.head.appendChild(t))})(m):(e=>{const t=e.querySelector(".kubio-block-vars-reset");var n;t&&(null==t||null===(n=t.remove)||void 0===n||n.call(t))})(m),m.querySelectorAll(["wp-reset-editor-styles-css","wp-editor-classic-layout-styles-css","common-css","forms-css"].map((e=>`link#${e}`))).forEach((t=>{t.sheet&&(t.sheet.disabled=e)}))}),[j,s,I,m,C]),(0,u.useEffect)((()=>{if(m&&y.length){const e=Array.from(m.body.classList);m.body.setAttribute("class",(0,h.uniq)(e.concat(y)).join(" "))}}),[m,y]);const[,P]=(0,f.useGlobalSessionProp)("blocksOwnerDocument",null,[]),[,A]=(0,f.useGlobalSessionProp)("currentPageHasBlocksContent",null,[]),R=(0,u.useCallback)((t=>{function n(){const{contentDocument:n}=t,{readyState:r,body:l}=n;if("complete"!==r)return!1;"function"==typeof e?e(l):e&&(e.current=l);const u=["a",'[type="submit"]',"form button"];new n.defaultView.MutationObserver((function(e){(0,h.each)(e,(function(e){e.target.querySelectorAll(u.join(",")).forEach(Vi)}))})).observe(n,{childList:!0,subtree:!0}),n.querySelectorAll(u.join(",")).forEach(Vi),c&&function(e){const t=new Map;Array.from(document.styleSheets).forEach((n=>{try{n.cssRules}catch(e){return}const{ownerNode:o,cssRules:i}=n;i&&Array.from(i).find((({selectorText:e})=>e&&(e.includes(`.${Ui}`)||e.includes(".wp-block"))))&&!t.has(o)&&(o.id&&-1!==o.id.indexOf(Hi)||o.href&&-1!==o.href.indexOf(Hi)?e.head.prepend(o.cloneNode(!0)):e.head.appendChild(o.cloneNode(!0)),t.set(o,!0))}))}(n),n.defaultView.isKubioBlockEditor=!0,n.defaultView.isInsideIframe=!0,n.defaultView.requestIdleCallback=n.defaultView.requestIdleCallback||function(e){const t=Date.now();return setTimeout((function(){e({didTimeout:!1,timeRemaining:()=>Math.max(0,50-(Date.now()-t))})}),1)},n.defaultView.cancelIdleCallback=n.defaultView.cancelIdleCallback||function(e){clearTimeout(e)},function(e,t){e.head.innerHTML="<style>/* head style start */</style>"+t+"<style>/* head style end */</style><style>*{scroll-behavior:  auto !important; } html#kubio {height:auto!important; margin-top:initial !important}</style>"+e.head.innerHTML}(n,o),function(e){const{defaultView:t}=e,{frameElement:n}=t;function o(e){const{keyCode:o,ctrlKey:i,metaKey:r}=e;if((65===o||95===o)&&(i||r)){const t=e.target.hasAttribute("contenteditable")?e.target:e.target.closest("[contenteditable]");if(t)return((e,t)=>(t.preventDefault(),t.stopPropagation(),t.stopImmediatePropagation(),e&&e.ownerDocument.execCommand("selectAll",!1,null),!1))(t,e)}const s=Object.getPrototypeOf(e).constructor.name,a=window[s],l={};for(const t in e)l[t]=e[t];if(e instanceof t.MouseEvent){const e=n.getBoundingClientRect();l.clientX+=e.left,l.clientY+=e.top}const c=new a(e.type,l);c.iframeEvent=!0,!n.dispatchEvent(c)&&e.preventDefault()}const i=["keydown","keypress","dragover"];for(const t of i)e.addEventListener(t,o)}(n),b(n),x(n);let d=i&&n.querySelector(i),p="";if(i&&d){const e=d.parentElement;1===e.children.length&&(d.remove(),d=e),p=d.getAttribute("class"),d.setAttribute("class","kubio-hybrid-template-content-edit")}S(p);let m=n.body;return d?(m=d,A(!0)):(s||i)&&(m.classList.add("kubio-hybrid-no-block-content"),A(!1)),m.classList.add(Ui),m.classList.add("wp-embed-responsive"),a(t,n),_(m),P(n),!0}t&&(t.contentDocument.body.parentElement.className="kubio-iframe",s?t.addEventListener("load",(()=>{n()})):n()||t.addEventListener("load",(()=>{n()})))}),[]),O=(0,u.useMemo)((()=>!!m&&(r&&m.querySelector(r)||m.head)),[r,m]),N=(0,u.useMemo)((()=>({ownerDocument:m||window.document})),[m]);return(0,ve.jsx)(l.OwnerDocumentContext.Provider,{value:N,children:(0,ve.jsxs)("iframe",{...d,ref:(0,k.useMergeRefs)([p,R,w]),tabIndex:"0",title:(0,T.__)("Editor canvas","kubio"),className:"kubio-iframe",name:"editor-canvas",src:s,children:[v&&(0,u.createPortal)(t,v),O&&(0,u.createPortal)(n,O)]})})})),zi=async(e,t)=>new Promise((n=>{if(-1!==Array.from(e.ownerDocument.querySelectorAll("script[src]")).map((e=>e.src)).indexOf(t))return;const o=e.ownerDocument.createElement("script");o.async=!0,o.src=t,e.appendChild(o),o.addEventListener("load",n)})),$i=(0,h.debounce)((async(e,t,n=h.noop)=>{for(n(),t=window.structuredClone(t);t.length;){const n=t.shift();await zi(e,n)}}),1e3),Yi=e=>{const{children:t,className:n}=e,o=(0,u.useRef)(),i=(0,u.useRef)(),[r,s]=(0,f.useGlobalSessionProp)("containerBgMediaUploadRef",{dataHelper:null,ref:null,blockId:null,value:null});(0,u.useEffect)((()=>{null!==i.current&&s({...r,ref:i})}),[i.current]);const a=(0,f.useGetGlobalSessionProp)("ready",!1);return(0,u.useLayoutEffect)((()=>{const e=o.current;if(e&&a){var t;const n=null===(t=e.ownerDocument.querySelector("#kubio-scripts-template"))||void 0===t?void 0:t.content.querySelectorAll("script");n&&$i(e.ownerDocument.head,Array.from(n).map((({src:e})=>e)).filter(Boolean))}}),[a]),(0,ve.jsxs)(ve.Fragment,{children:[(0,ve.jsx)("div",{ref:o}),(0,ve.jsxs)(y.WritingFlow,{children:[(0,ve.jsx)(y.BlockList,{className:C()(n,"edit-site-block-editor__block-list","kubio-block-editor__block-list"),renderAppender:ke.KubioBlockAppender}),t]}),(0,ve.jsx)(y.MediaUploadCheck,{children:(0,ve.jsx)(y.MediaUpload,{allowedTypes:["image","video"],value:r.value,onSelect:e=>{const{dataHelper:t}=r;if(!t)return;const n=t.getStyle("background");"image"===n.type&&"image"===e.type?n.image[0].source.url=e.url:"video"===n.type&&"video"===e.type&&(n.video.internal.url=e.url),t.setStyle("background",n)},render:({open:e})=>(0,ve.jsx)("div",{ref:i,onClick:e})})})]})};var Wi=n(9457),qi=n.n(Wi);const Zi=()=>(0,ve.jsx)("div",{className:"kubio-loading-logo",children:(0,ve.jsx)(x.Icon,{icon:ye.KubioLoader})}),Xi=(0,u.memo)((()=>{const e=(0,k.useRefEffect)((e=>{e.contentWindow.document.open(),e.contentWindow.document.write(qi()),e.contentWindow.document.close();const t=e.contentDocument||e.contentWindow.document,n=null==t?void 0:t.querySelector("#content");n&&(0,l.reactRender)((0,ve.jsx)(Zi,{}),n)}),[]);return(0,ve.jsx)("iframe",{title:"kubio-loader",ref:e,className:"kubio-loading-logo-iframe"})}));let Qi;const Ji=(e,t)=>{var n,o;e&&(null===(n=e.querySelector("#kubio-editor-view"))||void 0===n||null===(o=n.classList)||void 0===o||o.remove("device-change-animation"),t?Qi=e.defaultView.setTimeout((()=>{e.body.classList.add("kubio-iframe-holder--show"),e.body.classList.remove("kubio-iframe-holder--hide"),e.body.classList.remove("h-ui-disable-transitions")}),100):(e.defaultView.clearTimeout(Qi),e.body.classList.remove("kubio-iframe-holder--show"),e.body.classList.add("kubio-iframe-holder--hide"),e.body.classList.add("h-ui-disable-transitions")))},er=(0,k.pure)((({iframe:e,deviceType:t})=>{const n=(0,y.__experimentalUseResizeCanvas)(t,!0),o=(0,u.useRef)(),i=(0,u.useRef)(),r=(0,u.useRef)(),s=(0,k.useMergeRefs)([o,(0,y.__unstableUseTypingObserver)()]);return(0,f.useEditorIsLoadedChanged)((e=>{var t,n;Ji(null===(t=r.current)||void 0===t?void 0:t.ownerDocument,e),Ji(null===(n=o.current)||void 0===n?void 0:n.ownerDocument,e)})),(0,ve.jsx)(ve.Fragment,{children:(0,ve.jsx)(y.BlockTools,{className:"kubio-block-tools",__unstableContentRef:o,children:(0,ve.jsxs)("div",{id:"kubio-editor-view",ref:i,children:[(0,ve.jsx)("div",{id:"kubio-iframe-holder",className:"editor-styles-wrapper edit-site-block-editor__editor-styles-wrapper",style:n,ref:r,children:e(s)}),(0,ve.jsx)(Xi,{},"kubio-blinking-iframe")]})})})})),tr="<style>body{width:100%;max-width:100%;overflow-x:hidden;}</style>",nr=window.wp.htmlEntities,or=(e,t)=>`<a ${ir(e)}>${t}</a>`,ir=e=>`href="${e}" target="_blank" rel="noreferrer noopener"`,rr=e=>{const{title:t,foreign_landing_url:n,creator:o,creator_url:i,license:r,license_version:s,license_url:a}=e,l=((e,t)=>{let n=e.trim();return"pdm"!==e&&(n=e.toUpperCase().replace("SAMPLING","Sampling")),t&&(n+=` ${t}`),["pdm","cc0"].includes(e)||(n=`CC ${n}`),n})(r,s),c=(0,nr.decodeEntities)(o);let u;return u=c?t?(0,T.sprintf)(// translators: %1s: Title of a media work from Openverse; %2s: Name of the work's creator; %3s: Work's licence e.g: "CC0 1.0".
// translators: %1s: Title of a media work from Openverse; %2s: Name of the work's creator; %3s: Work's licence e.g: "CC0 1.0".
(0,T._x)('"%1$s" by %2$s/ %3$s',"caption","kubio"),or(n,(0,nr.decodeEntities)(t)),i?or(i,c):c,a?or(`${a}?ref=openverse`,l):l):(0,T.sprintf)(// translators: %1s: Link attributes for a given Openverse media work; %2s: Name of the work's creator; %3s: Works's licence e.g: "CC0 1.0".
// translators: %1s: Link attributes for a given Openverse media work; %2s: Name of the work's creator; %3s: Works's licence e.g: "CC0 1.0".
(0,T._x)("<a %1$s>Work</a> by %2$s/ %3$s","caption","kubio"),ir(n),i?or(i,c):c,a?or(`${a}?ref=openverse`,l):l):t?(0,T.sprintf)(// translators: %1s: Title of a media work from Openverse; %2s: Work's licence e.g: "CC0 1.0".
// translators: %1s: Title of a media work from Openverse; %2s: Work's licence e.g: "CC0 1.0".
(0,T._x)('"%1$s"/ %2$s',"caption","kubio"),or(n,(0,nr.decodeEntities)(t)),a?or(`${a}?ref=openverse`,l):l):(0,T.sprintf)(// translators: %1s: Link attributes for a given Openverse media work; %2s: Works's licence e.g: "CC0 1.0".
// translators: %1s: Link attributes for a given Openverse media work; %2s: Works's licence e.g: "CC0 1.0".
(0,T._x)("<a %1$s>Work</a>/ %3$s","caption","kubio"),ir(n),a?or(`${a}?ref=openverse`,l):l),u.replace(/\s{2}/g," ")},sr=async(e={})=>(await(0,E.resolveSelect)(S.store).getMediaItems({...e,orderBy:null!=e&&e.search?"relevance":"date"})).map((e=>{var t,n,o,i;return{...e,alt:e.alt_text,url:e.source_url,previewUrl:null===(t=e.media_details)||void 0===t||null===(n=t.sizes)||void 0===n||null===(o=n.medium)||void 0===o?void 0:o.source_url,caption:null===(i=e.caption)||void 0===i?void 0:i.raw}})),ar=[{name:"images",labels:{name:(0,T.__)("Images","kubio"),search_items:(0,T.__)("Search images","kubio")},mediaType:"image",fetch:async(e={})=>sr({...e,media_type:"image"})},{name:"videos",labels:{name:(0,T.__)("Videos","kubio"),search_items:(0,T.__)("Search videos","kubio")},mediaType:"video",fetch:async(e={})=>sr({...e,media_type:"video"})},{name:"audio",labels:{name:(0,T.__)("Audio","kubio"),search_items:(0,T.__)("Search audio","kubio")},mediaType:"audio",fetch:async(e={})=>sr({...e,media_type:"audio"})},{name:"openverse",labels:{name:(0,T.__)("Openverse","kubio"),search_items:(0,T.__)("Search Openverse","kubio")},mediaType:"image",async fetch(e={}){const t={...e,mature:!1,excluded_source:"flickr,inaturalist,wikimedia",license:"pdm,cc0"},n={per_page:"page_size",search:"q"},o=new URL("https://api.openverse.engineering/v1/images/");Object.entries(t).forEach((([e,t])=>{const i=n[e]||e;o.searchParams.set(i,t)}));const i=await window.fetch(o,{headers:{"User-Agent":"WordPress/inserter-media-fetch"}});return(await i.json()).results.map((e=>{var t;return{...e,title:null!==(t=e.title)&&void 0!==t&&t.toLowerCase().startsWith("file:")?e.title.slice(5):e.title,sourceId:e.id,id:void 0,caption:rr(e),previewUrl:e.thumbnail}}))},getReportUrl:({sourceId:e})=>`https://wordpress.org/openverse/image/${e}/report/`,isExternalResource:!0}];function lr(){var e,t;const{setOpenInserter:n}=(0,E.useDispatch)(g.STORE_KEY),{storedSettings:o,canvasMode:i,templateType:r,siteSettings:s}=(0,E.useSelect)((e=>{const{canUser:t,getEntityRecord:o}=e(S.store),{getSettings:i,getCanvasMode:r,getEditedPostType:s}=e(g.STORE_KEY);return{storedSettings:i(n),canvasMode:null==r?void 0:r(),templateType:s(),siteSettings:t("read","settings")?o("root","site"):void 0}}),[]),a=null!==(e=o.__experimentalAdditionalBlockPatterns)&&void 0!==e?e:o.__experimentalBlockPatterns,l=null!==(t=o.__experimentalAdditionalBlockPatternCategories)&&void 0!==t?t:o.__experimentalBlockPatternCategories,{restBlockPatterns:c,restBlockPatternCategories:d,templateSlug:p,userPatternCategories:h}=(0,E.useSelect)((e=>{const{getEditedPostType:t,getEditedPostId:n}=e(g.STORE_KEY),{getEditedEntityRecord:o,getUserPatternCategories:i}=e(S.store),r=o("postType",t(),n());return{restBlockPatterns:e(S.store).getBlockPatterns(),restBlockPatternCategories:e(S.store).getBlockPatternCategories(),templateSlug:r.slug,userPatternCategories:(null==i?void 0:i())||[]}}),[]),m=function(e){const t=null==e?void 0:e.match(/^(category|tag|taxonomy-([^-]+))$|^(((category|tag)|taxonomy-([^-]+))-(.+))$/);let n,o,i,r=!1;if(t)t[1]?n=t[2]?t[2]:t[1]:t[3]&&(n=t[6]?t[6]:t[4],o=t[7]),n="tag"===n?"post_tag":n;else{const t=null==e?void 0:e.match(/^(author)$|^author-(.+)$/);t&&(r=!0,t[2]&&(i=t[2]))}return(0,E.useSelect)((e=>{const{getEntityRecords:t,getTaxonomy:s,getAuthors:a}=e(S.store);let l,c;var u,d;if(n&&(l=null===(u=s(n))||void 0===u||null===(d=u.labels)||void 0===d?void 0:d.singular_name),o){const e=t("taxonomy",n,{slug:o,per_page:1});e&&e[0]&&(c=e[0].name)}if(r&&(l="Author",i)){const e=a({slug:i});e&&e[0]&&(c=e[0].name)}return{archiveTypeLabel:l,archiveNameLabel:c}}),[i,r,n,o])}(p),b=(0,u.useMemo)((()=>[...a||[],...c||[]].filter(((e,t,n)=>t===n.findIndex((t=>e.name===t.name)))).filter((({postTypes:e})=>!e||Array.isArray(e)&&e.includes(r)))),[a,c,r]),f=(0,u.useMemo)((()=>[...l||[],...d||[]].filter(((e,t,n)=>t===n.findIndex((t=>e.name===t.name))))),[l,d]);return(0,u.useMemo)((()=>{const{__experimentalAdditionalBlockPatterns:e,__experimentalAdditionalBlockPatternCategories:t,focusMode:n,...r}=o;return{...r,inserterMediaCategories:ar,__experimentalBlockPatterns:b,__experimentalBlockPatternCategories:f,__experimentalUserPatternCategories:h,focusMode:("view"!==i||!n)&&n,__experimentalArchiveTitleTypeLabel:m.archiveTypeLabel,__experimentalArchiveTitleNameLabel:m.archiveNameLabel,pageOnFront:null==s?void 0:s.page_on_front,pageForPosts:null==s?void 0:s.page_for_posts}}),[o,b,f,h,i,m.archiveTypeLabel,m.archiveNameLabel,null==s?void 0:s.page_on_front,null==s?void 0:s.page_for_posts])}const cr=(0,k.createHigherOrderComponent)((e=>t=>{const{templateType:n,page:o,deviceType:i,templateId:r}=(0,E.useSelect)((e=>{const{getTemplateType:t,getTemplateId:n,getPage:o,__experimentalGetPreviewDeviceType:i}=e(g.STORE_KEY);return{templateType:t(),templateId:n(),page:o(),deviceType:i()}}),[]),s={settings:lr(),templateType:n,page:o,deviceType:i,templateId:r};return o||n?(0,ve.jsx)(e,{...t,...s}):null}),"currentEditorEntity"),ur=(0,k.compose)(cr,k.pure)((function({settings:e,templateType:t,page:n,deviceType:o,templateId:i}){const[r,s,a]=(0,S.useEntityBlockEditor)("postType",t,{id:i}),{setPage:l}=(0,E.useDispatch)(g.STORE_KEY),c=(0,y.__unstableUseMouseMoveTypingReset)(),d=window.__kubioEditorStyles.html+tr,p=(0,E.useSelect)((e=>{const t=e(g.STORE_KEY).getCurrentKubioTemplateSource();return null==t?void 0:t.startsWith("kubio")}),[t,i]),h=(0,u.useMemo)((()=>e.styles),[p,e.styles]),m=(0,u.useCallback)((e=>(0,ve.jsx)(Ki,{headHTML:d,ref:c,head:(0,ve.jsx)(y.__unstableEditorStyles,{styles:h}),contentRef:e,children:(0,ve.jsx)(Yi,{})})),[c,d,h]);return(0,ve.jsxs)(y.BlockEditorProvider,{settings:e,value:r,onInput:s,onChange:a,useSubRegistry:!1,children:[(0,ve.jsx)(y.BlockEditorKeyboardShortcuts,{}),(0,ve.jsx)(y.__experimentalLinkControl.ViewerFill,{children:(0,u.useCallback)((e=>(0,ve.jsx)(_e,{...e,activePage:n,onActivePageChange:l})),[n])}),(0,ve.jsx)(Ri,{children:(0,ve.jsx)(Fi,{})}),(0,ve.jsx)(er,{deviceType:o,iframe:m})]})})),dr=function(){var e,t;const{setOpenInserter:n}=(0,E.useDispatch)(g.STORE_KEY),[o,i]=(0,u.useState)({}),{page:r,deviceType:s,classicTemplateId:a}=(0,E.useSelect)((e=>{const{getEntity:t,getPage:n,getClassicTemplateId:o,__experimentalGetPreviewDeviceType:i}=e(g.STORE_KEY);return{entity:t(),page:n(),classicTemplateId:o(),deviceType:i()}}),[n]),l=lr();(0,u.useEffect)((()=>{In()(r,o)||i(r)}),[r]);const[c,d,p]=(0,S.useEntityBlockEditor)("postType",null==o||null===(e=o.context)||void 0===e?void 0:e.postType,{id:null==o||null===(t=o.context)||void 0===t?void 0:t.postId}),{setPage:h}=(0,E.useDispatch)(g.STORE_KEY),m=(0,y.__unstableUseMouseMoveTypingReset)(),b=(0,f.useSetGlobalSessionProp)("ready"),v=(e,t)=>{t.body.id="kubio",b(!0)},_=window.__kubioEditorStyles.html+tr,x=(0,f.useGetGlobalSessionProp)("blockEditorRootClasses",""),k=(0,u.useCallback)((e=>(null==o?void 0:o.path)&&(0,ve.jsx)(Ki,{headHTML:_,ref:m,contentRef:e,src:(0,di.addQueryArgs)(null==o?void 0:o.path,{"__kubio-site-edit-iframe-preview":!0,"__kubio-site-edit-iframe-classic-template":a}),contentHolderSelector:"#kubio-site-edit-content-holder",assetsHolderSelector:"#kubio-site-edit-assets-holder",onLoad:v,execStylesheetCompat:!1,children:(0,ve.jsx)(Yi,{className:x,children:(0,ve.jsx)(Ve.LayoutPicker,{})})})),[null==o?void 0:o.path,m,_,_,l.styles,x]);return(0,ve.jsxs)(y.BlockEditorProvider,{settings:l,value:c,onInput:d,onChange:p,useSubRegistry:!1,children:[(0,ve.jsx)(y.BlockEditorKeyboardShortcuts,{}),(0,ve.jsx)(y.__experimentalLinkControl.ViewerFill,{children:(0,u.useCallback)((e=>(0,ve.jsx)(_e,{...e,activePage:o,onActivePageChange:h})),[o,h])}),(0,ve.jsx)(Ri,{children:(0,ve.jsx)(Fi,{})}),(0,ve.jsx)(er,{deviceType:s,iframe:k})]})},pr=()=>{const[e,t]=(0,u.useState)([]),n=(0,E.useSelect)((e=>{const{getEntityRecords:t}=e("core");return t("postType","kubio_section",{per_page:-1})}),[]),o="kubio-content/custom";return(0,u.useEffect)((()=>{let i=e;null==n||n.forEach((t=>{if(e.includes(t.id))return;const n={name:`${o}/custom-section/${t.id}`,title:t.title.rendered,categories:[o],description:(0,T.__)("Custom section","kubio"),screenshot:!1,fromColibri:!0,fromFirebase:!0,isCustomSection:!0,isProOnFree:!1,isGutentagPattern:!0,content:JSON.parse(t.content.raw)};(0,a.registerPattern)(n),i=[...i,t.id]})),t(i)}),[n,e]),null};function hr({record:e,checked:t,onChange:n,closePanel:o}){const{name:i,kind:r,title:s,key:a}=e,l=(0,E.useSelect)((e=>{var t;const{blocks:n=[]}=e("core").getEditedEntityRecord(r,i,a),o=e("core/block-editor").getBlockParents(null===(t=n[0])||void 0===t?void 0:t.clientId);return o[o.length-1]}),[]),c=(0,E.useSelect)((e=>{if("postType"!==r||"wp_template"!==i)return s;const t=e("core").getEditedEntityRecord(r,i,a);return e("core/editor").__experimentalGetTemplateInfo(t).title}),[i,r,s,a]),d=(0,E.useSelect)((e=>e("core/block-editor").getSelectedBlockClientId()===l),[l]),p=d?(0,T.__)("Selected","kubio"):(0,T.__)("Select","kubio"),{selectBlock:h}=(0,E.useDispatch)("core/block-editor"),m=(0,u.useCallback)((()=>h(l)),[l]),g=(0,u.useCallback)((()=>{h(l),o()}),[l]);return(0,ve.jsxs)(x.PanelRow,{children:[(0,ve.jsx)(x.CheckboxControl,{label:(0,ve.jsx)("strong",{children:c||(0,T.__)("Untitled","kubio")}),checked:t,onChange:n}),l?(0,ve.jsxs)(ve.Fragment,{children:[(0,ve.jsx)(x.Button,{onClick:m,className:"entities-saved-states__find-entity",disabled:d,children:p}),(0,ve.jsx)(x.Button,{onClick:g,className:"entities-saved-states__find-entity-small",disabled:d,children:p})]}):null]})}const mr={site:(0,ve.jsx)(A.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,ve.jsx)(A.Path,{d:"M18 5.5H6a.5.5 0 00-.5.5v3h13V6a.5.5 0 00-.5-.5zm.5 5H10v8h8a.5.5 0 00.5-.5v-7.5zm-10 0h-3V18a.5.5 0 00.5.5h2.5v-8zM6 4h12a2 2 0 012 2v12a2 2 0 01-2 2H6a2 2 0 01-2-2V6a2 2 0 012-2z"})}),page:(0,ve.jsxs)(A.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:[(0,ve.jsx)(A.Path,{d:"M15.5 7.5h-7V9h7V7.5Zm-7 3.5h7v1.5h-7V11Zm7 3.5h-7V16h7v-1.5Z"}),(0,ve.jsx)(A.Path,{d:"M17 4H7a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V6a2 2 0 0 0-2-2ZM7 5.5h10a.5.5 0 0 1 .5.5v12a.5.5 0 0 1-.5.5H7a.5.5 0 0 1-.5-.5V6a.5.5 0 0 1 .5-.5Z"})]})};function gr({list:e,unselectedEntities:t,setUnselectedEntities:n,closePanel:o}){const i=e[0],r=(0,E.useSelect)((e=>e("core").getEntity(i.kind,i.name)),[i.kind,i.name]),{name:s}=i,a=mr[s];return(0,ve.jsx)(x.PanelBody,{title:r.label,initialOpen:!0,icon:a,children:e.map((e=>(0,ve.jsx)(hr,{record:e,checked:!(0,h.some)(t,(t=>t.kind===e.kind&&t.name===e.name&&t.key===e.key)),onChange:t=>n(e,t),closePanel:o},e.key||`${e.kind}-${e.name}-${e.property}`)))})}const br={title:(0,T.__)("Title","kubio"),description:(0,T.__)("Tagline","kubio"),site_logo:(0,T.__)("Logo","kubio"),sitelogo:(0,T.__)("Logo","kubio"),show_on_front:(0,T.__)("Show on front","kubio"),page_on_front:(0,T.__)("Page on front","kubio")},fr={wp_template_part:e=>(0,T._n)("template part","template parts",e,"kubio"),wp_template:e=>(0,T._n)("template","templates",e,"kubio"),post:e=>(0,T._n)("post","posts",e,"kubio"),page:e=>(0,T._n)("page","pages",e,"kubio"),site:e=>(0,T._n)("site","sites",e,"kubio")},vr=(0,x.withFocusReturn)((function({isOpen:e,close:t}){const{dirtyEntityRecords:n}=(0,E.useSelect)((e=>{const t=e(S.store).__experimentalGetDirtyEntityRecords().filter((e=>!("root"===e.kind&&"site"===e.name))),n=e(S.store).getEntityRecordEdits("root","site"),o=[];for(const e in n)o.push({kind:"root",name:"site",title:br[e]||e,property:e});return{dirtyEntityRecords:[...t,...o]}}),[]),{saveEditedEntityRecord:o}=(0,E.useDispatch)("core"),i=Object.values((0,h.groupBy)(n,"name")),r=[];i.forEach((e=>{fr[e[0].name]&&r.push(fr[e[0].name](e.length))}));const[s,a]=(0,u.useState)([]),l=({kind:e,name:t,key:n},o)=>{a(o?s.filter((o=>o.kind!==e||o.name!==t||o.key!==n)):[...s,{kind:e,name:t,key:n}])},c=(0,u.useCallback)((()=>t()),[t]),d=(0,T.__)("Save","kubio");return e?(0,ve.jsxs)("div",{className:"entities-saved-states__panel kubio-entities-saved-states__panel",children:[(0,ve.jsxs)("div",{className:"entities-saved-states__panel-header",children:[(0,ve.jsx)(x.Button,{isPrimary:!0,disabled:n.length-s.length==0,onClick:()=>{const e=n.filter((({kind:e,name:t,key:n})=>!(0,h.some)(s,(o=>o.kind===e&&o.name===t&&o.key===n))));t(e),e.forEach((({kind:e,name:t,key:n})=>{o(e,t,n)}))},className:"editor-entities-saved-states__save-button",children:d}),(0,ve.jsx)(x.Button,{onClick:c,icon:Se,label:(0,T.__)("Close panel","kubio")})]}),(0,ve.jsxs)("div",{className:"entities-saved-states__text-prompt",children:[(0,ve.jsx)("strong",{children:(0,T.__)("Select the changes you want to save","kubio")}),(0,ve.jsx)("p",{children:(0,T.__)("Some changes may affect other areas of your site.","kubio")})]}),i.map((e=>(0,ve.jsx)(gr,{list:e,closePanel:c,unselectedEntities:s,setUnselectedEntities:l},e[0].name)))]}):null})),_r=(0,ve.jsx)(A.SVG,{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,ve.jsx)(A.Path,{d:"M3 6h11v1.5H3V6Zm3.5 5.5h11V13h-11v-1.5ZM21 17H10v1.5h11V17Z"})}),yr=(0,ve.jsxs)(A.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:[(0,ve.jsx)(A.Path,{d:"M14.5 5.5h-7V7h7V5.5ZM7.5 9h7v1.5h-7V9Zm7 3.5h-7V14h7v-1.5Z"}),(0,ve.jsx)(A.Path,{d:"M16 2H6a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V4a2 2 0 0 0-2-2ZM6 3.5h10a.5.5 0 0 1 .5.5v12a.5.5 0 0 1-.5.5H6a.5.5 0 0 1-.5-.5V4a.5.5 0 0 1 .5-.5Z"}),(0,ve.jsx)(A.Path,{d:"M20 8v11c0 .69-.31 1-.999 1H6v1.5h13.001c1.52 0 2.499-.982 2.499-2.5V8H20Z"})]}),xr=["index","singular","archive","single","page","home","404","search"],kr=["author","category","taxonomy","date","tag","attachment","single-post","front-page"],Sr=[...xr,...kr],Er=["page-home"],wr=["post-","author-","single-post-","tag-"],Tr=["page-"],jr=["front-page","single-post","page","archive","search","404","index"],Ir={singular:["single","page"],index:["archive","404","search","singular","home"],home:["front-page"]},Cr="root",Pr="template-parts",Ar="templates",Rr="templates-general",Or="templates-pages",Nr="templates-posts",Mr="kubio__custom-templates",Br="kubio__theme-templates",Lr="kubio__kubio-templates",Dr=75,Fr="template-parts-headers",Gr="template-parts-footers",Ur="template-parts-sidebars",Hr="template-parts-general",Vr="header",Kr="footer",zr="sidebar",$r="kubio-content-area-postType-page",Yr=[{area:Vr,menu:Fr,title:(0,T.__)("Headers","kubio")},{area:Kr,menu:Gr,title:(0,T.__)("Footers","kubio")},{area:zr,menu:Ur,title:(0,T.__)("Sidebars","kubio")},{area:"uncategorized",menu:Hr,title:(0,T.__)("General","kubio")}];function Wr({openEntitiesSavedStates:e}){const{saveEditedEntityRecord:t}=(0,E.useDispatch)("core"),{isSaving:n,isDirty:o}=(0,E.useSelect)((e=>{const{__experimentalGetDirtyEntityRecords:t,isSavingEntityRecord:n}=e("core"),o=t();return{isDirty:o.length>0,isSaving:(0,h.some)(o,(e=>n(e.kind,e.name,e.key)))}})),i=!o||n,r=(0,T.__)("Save","kubio"),{dirtyEntityRecords:s}=(0,E.useSelect)((e=>{const t=e(S.store).__experimentalGetDirtyEntityRecords().filter((e=>!("root"===e.kind&&"site"===e.name))),n=e(S.store).getEntityRecordEdits("root","site"),o=[];for(const e in n)o.push({kind:"root",name:"site",property:e});return{dirtyEntityRecords:[...t,...o]}}),[]);return(0,ve.jsxs)(ve.Fragment,{children:[(0,ve.jsx)(x.Button,{isPrimary:!0,className:"edit-site-save-button__button","aria-disabled":i,disabled:i,isBusy:n,onClick:i?void 0:()=>{s.forEach((({kind:e,name:n,key:o})=>{t(e,n,o)}))},children:r}),(0,ve.jsx)(x.Button,{isPrimary:!0,icon:ye.ArrowDown,iconSize:24,className:"edit-site-save-button__dropdown","aria-disabled":i,disabled:i,onClick:i?void 0:e})]})}window.kubio.adminPanel;const qr=(0,ve.jsx)(A.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,ve.jsx)(A.Path,{d:"M13 19h-2v-2h2v2zm0-6h-2v-2h2v2zm0-6h-2V5h2v2z"})}),Zr=(0,ve.jsx)(A.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,ve.jsx)(A.Path,{d:"M16.7 7.1l-6.3 8.5-3.3-2.5-.9 1.2 4.5 3.4L17.9 8z"})}),Xr=window.wp.a11y;function Qr({feature:e,label:t,info:n,messageActivated:o,messageDeactivated:i}){const r=(0,E.useSelect)((t=>t(g.STORE_KEY).isFeatureActive(e)),[]),{toggleFeature:s}=(0,E.useDispatch)(g.STORE_KEY);return(0,ve.jsx)(x.MenuItem,{icon:r&&Zr,isSelected:r,onClick:(0,h.flow)(s.bind(null,e),(()=>{r?(0,Xr.speak)(i||(0,T.__)("Feature deactivated","kubio")):(0,Xr.speak)(o||(0,T.__)("Feature activated","kubio"))})),role:"menuitemcheckbox",info:n,children:t})}const{Fill:Jr,Slot:es}=(0,x.createSlotFill)("ToolsMoreMenuGroup");Jr.Slot=({fillProps:e})=>(0,ve.jsx)(es,{fillProps:e,children:e=>!(0,h.isEmpty)(e)&&(0,ve.jsx)(x.MenuGroup,{label:(0,T.__)("Tools","kubio"),children:e})});const ts=Jr,ns={className:"edit-site-more-menu__content",position:"bottom left"},os={tooltipPosition:"bottom"},is=()=>{(0,E.useSelect)((e=>!!e(g.STORE_KEY)&&e(g.STORE_KEY).isGutentagDebug()));const{toggleGutentagDebug:e}=(0,E.useDispatch)(g.STORE_KEY);let t=(0,ve.jsx)(ve.Fragment,{});return(0,ve.jsx)(x.DropdownMenu,{className:"edit-site-more-menu",icon:qr,label:(0,T.__)("More tools & options","kubio"),popoverProps:ns,toggleProps:os,children:({onClose:e})=>(0,ve.jsxs)(ve.Fragment,{children:[(0,ve.jsxs)(x.MenuGroup,{label:(0,T._x)("View","noun","kubio"),children:[(0,ve.jsx)(Qr,{feature:"focusMode",label:(0,T.__)("Spotlight mode","kubio"),info:(0,T.__)("Focus on one block at a time","kubio"),messageActivated:(0,T.__)("Spotlight mode activated","kubio"),messageDeactivated:(0,T.__)("Spotlight mode deactivated","kubio")}),t,(0,ve.jsx)(re.Slot,{name:"kubio/edit-site/plugin-more-menu",label:(0,T.__)("Plugins","kubio"),as:[x.MenuGroup,x.MenuItem],fillProps:{onClick:e}})]}),(0,ve.jsx)(ts.Slot,{fillProps:{onClose:e}})]})})};var rs=n(1874),ss=n.n(rs);let as=null,ls=Math.random();function cs(e){const{previewBlinkingLogoHtml:t}=window.kubioUtilsData,n=null!=t?t:(0,u.renderToString)(ye.KubioLoader);let o=ss().replace("{message}",(0,T.__)("Generating preview…","kubio"));o=o.replace("{svg_image}",n),e.write(o),e.title=(0,T.__)("Generating preview…","kubio"),e.close()}function us(){as=window.open("",(0,T.__)("Generating preview…","kubio")+ls++)}const ds="preview",ps=[{kind:"kubio",name:"menu"},{kind:"root",name:"site"}];var hs=n(4670),ms=n.n(hs);const gs=()=>{const{isDirty:e}=(0,E.useSelect)((e=>{const{__experimentalGetDirtyEntityRecords:t}=e("core");return{isDirty:t().length>0}})),t=(()=>{const{getDirtyEntityRecords:e,getAutosaves:t,getEntityRecordEdits:n,getEditedEntityRecord:o}=(0,E.useSelect)((e=>({getDirtyEntityRecords:e("core").__experimentalGetDirtyEntityRecords,getAutosaves:e("core").getAutosaves,getEntityRecordEdits:e("core").getEntityRecordEdits,getEditedEntityRecord:e("core").getEditedEntityRecord}))),{saveEditedEntityRecord:i}=(0,E.useDispatch)("core");return async(r,{autosaveType:s=ds}={})=>{var a;let l=[];l=r||e();const c=l.filter((({kind:e,name:t})=>!(0,h.find)(ps,{kind:e,name:t}))),u=l.filter((({kind:e,name:t,key:n})=>!(0,h.find)(c,{kind:e,name:t,key:n}))),p=c.map((({kind:e,name:t,key:n})=>{const r=o(e,t,n);let a;if(null!=r&&r.blocks)a=(0,Ge.serialize)(r.blocks);else{if("string"!=typeof(null==r?void 0:r.content))return null;a=null==r?void 0:r.content}return-1!==["wp_template","wp_template_part","page","post","product"].indexOf(r.type)?((e,t="publish",{fieldsToOmit:n=["blocks"],type:o=ds}={})=>Si()({path:(0,g.getKubioUrlWithRestPrefix)("kubio/v1/save-entity"),method:"POST",data:{postData:(0,h.omit)({...e,id:e.id||e.wp_id},["selectionStart","selectionEnd"].concat(n)),type:o,status:t}}))({...r,content:a},"autosave",{type:s}):i(e,t,n,{isAutosave:!0})})),m=u.map((({kind:e,name:t,key:o})=>({kind:e,name:t,key:o,...n(e,t,o)}))),b=null===(a=e())||void 0===a?void 0:a.filter((({name:e})=>"page"===e||"post"===e)).reduce(((e,{key:t,name:n,kind:i})=>{const r=o(i,n,t);return{...e,[t]:null==r?void 0:r.template}}),{});return Promise.all(p).then((e=>{const n=c.map((({name:n,key:o},i)=>e[i]?{id:e[i].ID||e[i].id,parent:e[i].post_parent||e[i].parent,data:e[i]}:(0,h.last)(t(n,o))));return Promise.all(n).then((e=>{const t=e.filter(Boolean).map((({id:e,parent:t})=>({id:e,parent:t})));return{updatesRecords:e.map((e=>null==e?void 0:e.data)),autosaves:t,customEntities:m,pageTemplatesMap:b,customData:(0,d.applyFilters)("kubio/custom-preview-data",{})}}))}))}})(),{saveChangeset:n}=(()=>{const[e,t]=(0,f.useGlobalSessionProp)("previewChangest",{}),n=(0,E.useSelect)((e=>{var t;return null===(t=e("core/block-editor").getSettings())||void 0===t?void 0:t.changeset_uuid}));(0,u.useEffect)((()=>{e.id||!n||e.isLoading||(t({...e,isLoading:!0}),Si()({path:(0,di.addQueryArgs)("/wp/v2/kubio/preview-changeset/",{slug:n})}).then((e=>{e&&e.length&&t({...e[0],isLoading:!1})})))}),[e,t,n]);const o=(0,u.useCallback)((()=>{if(!e.id)return;const t=(0,g.getKubioUrlWithRestPrefix)("kubio-delete-changeset");window.navigator.sendBeacon&&window.navigator.sendBeacon(`${window.ajaxurl}?action=${t}&uuid=${e.slug}`)}),[e.id]);return(0,u.useEffect)((()=>(window.addEventListener("beforeunload",o),()=>window.removeEventListener("beforeunload",o))),[e.id]),{saveChangeset:async o=>{let i=e;return i.id||(i=await Si()({path:(0,di.addQueryArgs)("/wp/v2/kubio/preview-changeset/",{slug:n})}),t(i)),await Si()({path:`/wp/v2/kubio/preview-changeset/${i.id}`,method:"POST",data:{...(0,h.pick)(e,["title","slug","type"]),content:JSON.stringify((0,h.omit)(o,"updatesRecords"))}}),n}}})(),{currentPageURL:o,postId:i}=(0,E.useSelect)((e=>{var t;const n=e(g.STORE_KEY).getPage(),o=m().get(n,"link"),i=m().get(n,"path"),r=o||i;return{postId:null==n||null===(t=n.context)||void 0===t?void 0:t.postId,currentPageURL:(null!=r?r:"").replace(/\/$/,"")}}));return(0,ve.jsx)("div",{className:"kubio-preview-options",children:""!==o&&(0,ve.jsx)(x.Button,{onClick:async({})=>{const o=(()=>{as&&!as.closed||us();try{cs(as.document)}catch(e){us(),cs(as.document)}return setTimeout((function(){as.focus()}),100),as})();let i=(0,Ke.getBackendData)("previewUrl");if(e){const e=await t(),o=await n(e);i=(0,di.addQueryArgs)(i,{"iconvert-promoter-preview":o,"iconvert-promoter-random":`${ms().generate()}-${ms().generate()}`})}else i=(0,di.addQueryArgs)(i,{"iconvert-promoter-random":`${ms().generate()}-${ms().generate()}`});o.location=i},children:(0,T.__)("Preview","kubio")})})},bs=(0,ve.jsx)(A.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,ve.jsx)(A.Path,{d:"M15.6 6.5l-1.1 1 2.9 3.3H8c-.9 0-1.7.3-2.3.9-1.4 1.5-1.4 4.2-1.4 5.6v.2h1.5v-.3c0-1.1 0-3.5 1-4.5.3-.3.7-.5 1.3-.5h9.2L14.5 15l1.1 1.1 4.6-4.6-4.6-5z"})}),fs=window.wp.keycodes;function vs(){const e=(0,E.useSelect)((e=>e("core").hasRedo())),{redo:t}=(0,E.useDispatch)("core");return(0,ve.jsx)(x.Button,{icon:bs,label:(0,T.__)("Redo","kubio"),shortcut:fs.displayShortcut.primaryShift("z"),"aria-disabled":!e,onClick:e?t:void 0})}const _s=(0,ve.jsx)(A.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,ve.jsx)(A.Path,{d:"M18.3 11.7c-.6-.6-1.4-.9-2.3-.9H6.7l2.9-3.3-1.1-1-4.5 5L8.5 16l1-1-2.7-2.7H16c.5 0 .9.2 1.3.5 1 1 1 3.4 1 4.5v.3h1.5v-.2c0-1.5 0-4.3-1.5-5.7z"})});function ys(){const e=(0,E.useSelect)((e=>e("core").hasUndo())),{undo:t}=(0,E.useDispatch)("core");return(0,ve.jsx)(x.Button,{icon:_s,label:(0,T.__)("Undo","kubio"),shortcut:fs.displayShortcut.primary("z"),"aria-disabled":!e,onClick:e?t:void 0})}const xs=(0,ve.jsx)(A.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,ve.jsx)(A.Path,{d:"M20.5 16h-.7V8c0-1.1-.9-2-2-2H6.2c-1.1 0-2 .9-2 2v8h-.7c-.8 0-1.5.7-1.5 1.5h20c0-.8-.7-1.5-1.5-1.5zM5.7 8c0-.3.2-.5.5-.5h11.6c.3 0 .5.2.5.5v7.6H5.7V8z"})}),ks=(0,ve.jsx)(A.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,ve.jsx)(A.Path,{d:"M17 4H7c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h10c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm.5 14c0 .3-.2.5-.5.5H7c-.3 0-.5-.2-.5-.5V6c0-.3.2-.5.5-.5h10c.3 0 .5.2.5.5v12zm-7.5-.5h4V16h-4v1.5z"})}),Ss=(0,ve.jsx)(A.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,ve.jsx)(A.Path,{d:"M15 4H9c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h6c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm.5 14c0 .3-.2.5-.5.5H9c-.3 0-.5-.2-.5-.5V6c0-.3.2-.5.5-.5h6c.3 0 .5.2.5.5v12zm-4.5-.5h2V16h-2v1.5z"})}),Es=[{title:(0,T.__)("Desktop","kubio"),name:"Desktop",icon:xs},{title:(0,T.__)("Tablet","kubio"),name:"Tablet",icon:ks},{title:(0,T.__)("Mobile","kubio"),name:"Mobile",icon:Ss}],ws=({deviceType:e,setDeviceType:t})=>{const n=(0,E.useSelect)((e=>()=>{const{getSelectedBlockClientIds:t}=e(y.store);return t(),""})),o=(0,f.useBlocksOwnerDocument)(),i=e=>()=>{t(e)};return(0,u.useEffect)((()=>{const t=(0,Ke.getPreviewElementByModelId)(n(),o);t&&e&&(null==t||t.scrollIntoView({block:"center",behavior:"smooth"}))}),[e]),(0,ve.jsx)(ve.Fragment,{children:Es.map((({name:t,title:n,icon:o})=>(0,ve.jsx)(x.Button,{icon:o,isPressed:t===e,label:n,onClick:i(t)},t)))})};function Ts({openEntitiesSavedStates:e}){const{deviceType:t,isEditorSidebarOpened:n,shortcut:o,getBlockSelectionStart:i,isListViewOpen:r,listViewShortcut:s}=(0,E.useSelect)((e=>{const{__experimentalGetPreviewDeviceType:t,isFeatureActive:n,getEditedPostType:o,getEditedPostId:i,isInserterOpened:r,getTemplateId:s,getTemplatePartId:a,getEntity:l,getPage:c,getShowOnFront:u,isListViewOpened:d}=e(g.STORE_KEY),{getEntityRecord:p}=e("core"),{__experimentalGetTemplateInfo:h}=e("core/editor"),m=s(),b=a(),f=o(),v=p("postType",f,i());let _;var y;_="wp_template"===f?null!=v&&v.title?null==v||null===(y=v.title)||void 0===y?void 0:y.raw:h(v).title:null==v?void 0:v.slug;const{getShortcutRepresentation:x}=e("core/keyboard-shortcuts");return{isListViewOpen:d(),deviceType:t(),entityTitle:_,hasFixedToolbar:n("fixedToolbar"),template:v,templateType:f,isInserterOpen:r(),templateId:m,templatePartId:b,entity:l(),page:c(),showOnFront:u(),isEditorSidebarOpened:e(g.STORE_KEY).isEditorSidebarOpened(),shortcut:x("core/edit-post/toggle-sidebar"),getBlockSelectionStart:e("core/block-editor").getBlockSelectionStart,listViewShortcut:x("kubio/edit-site/toggle-list-view")}}),[]),{__experimentalSetPreviewDeviceType:a,openSidebar:l,closeSidebar:c}=(0,E.useDispatch)(g.STORE_KEY),d=(0,k.useViewportMatch)("medium"),p=n?()=>{c(),v(!1)}:()=>{l(i()?"block-inspector":"document"),v(!1)},h=He(),{isNavigationOpened:m}=(0,E.useSelect)(g.STORE_KEY),{setIsNavigationPanelOpened:b,openNavigationPanelToMenu:f,setIsListViewOpened:v}=(0,E.useDispatch)(g.STORE_KEY),_=(0,u.useCallback)((()=>{v(!r)}),[v,r]);return(0,ve.jsxs)("div",{className:"edit-site-header",children:[(0,ve.jsx)("div",{className:"edit-site-header_start",children:(0,ve.jsxs)("div",{className:"edit-site-header__toolbar",children:[d&&(0,ve.jsxs)(ve.Fragment,{children:[(0,ve.jsx)(Ae,{}),(0,ve.jsx)(y.ToolSelector,{}),(0,ve.jsx)(ys,{}),(0,ve.jsx)(vs,{}),(0,ve.jsx)(x.Button,{className:"edit-site-header-toolbar__list-view-toggle",icon:_r,isPressed:r/* translators: button label text should, if possible, be under 16 characters. */,label:(0,T.__)("List View","kubio"),onClick:_,shortcut:s})]}),!1]})}),(0,ve.jsx)("div",{className:"edit-site-header_center",children:(0,ve.jsx)("div",{className:"edit-site-document-actions",children:(0,ve.jsx)("div",{className:"edit-site-document-actions__title-wrapper",children:(0,ve.jsx)(x.Button,{className:"edit-site-document-actions__title",onClick:()=>{m()?b(!1):f(Cr)},isPressed:m(),iconPosition:"right",showTooltip:!0,label:m()?(0,T.__)("Close the site content panel","kubio"):(0,T.__)("Open the site content panel","kubio"),children:(0,ve.jsxs)(x.Flex,{align:"center",children:[(0,ve.jsx)(x.FlexItem,{className:"edit-site-document-entity-title",children:(0,ve.jsx)("span",{children:(0,Ke.fromHtmlEntities)(null!=h?h:(0,T.__)("Page","kubio"))})}),(0,ve.jsx)(x.FlexItem,{children:(0,ve.jsx)(x.Icon,{icon:yr,size:20})})]})})})})}),(0,ve.jsx)("div",{className:"edit-site-header_end",children:(0,ve.jsxs)("div",{className:"edit-site-header__actions",children:[(0,ve.jsx)(ws,{deviceType:t,setDeviceType:a}),(0,ve.jsx)(gs,{}),(0,ve.jsx)(Wr,{openEntitiesSavedStates:e}),(0,ve.jsx)(x.Button,{icon:ze,label:(0,T.__)("Settings","kubio"),onClick:p,isPressed:n,"aria-expanded":n,className:"kubio-secondary-panel-toggler",shortcut:o}),(0,ve.jsx)(ce.Slot,{scope:"kubio/edit-site"}),(0,ve.jsx)(is,{})]})})]})}function js({openEntitiesSavedStates:e}){const{__experimentalGetDirtyEntityRecords:t,isSavingEntityRecord:n}=(0,E.useSelect)(S.store),{redo:o,undo:i}=(0,E.useDispatch)(S.store);return(0,ge.useShortcut)("kubio/edit-site/save",(o=>{o.preventDefault();const i=t(),r=!!i.length;!i.some((e=>n(e.kind,e.name,e.key)))&&r&&e()})),(0,ge.useShortcut)("kubio/edit-site/undo",(e=>{i(),e.preventDefault()})),(0,ge.useShortcut)("kubio/edit-site/redo",(e=>{o(),e.preventDefault()})),null}js.Register=function(){const{registerShortcut:e}=(0,E.useDispatch)(ge.store);return(0,u.useEffect)((()=>{e({name:"kubio/edit-site/save",category:"global",description:(0,T.__)("Save your changes.","kubio"),keyCombination:{modifier:"primary",character:"s"}}),e({name:"kubio/edit-site/undo",category:"global",description:(0,T.__)("Undo your last changes.","kubio"),keyCombination:{modifier:"primary",character:"z"}}),e({name:"kubio/edit-site/redo",category:"global",description:(0,T.__)("Redo your last undo.","kubio"),keyCombination:{modifier:"primaryShift",character:"z"}}),e({name:"kubio/edit-site/toggle-list-view",category:"global",description:(0,T.__)("Open the block list view.","kubio"),keyCombination:{modifier:"access",character:"o"}})}),[e]),null};const Is=js,Cs=({children:e,templateId:t,templateType:n,page:o})=>{const[i,r]=(0,u.useState)(!1),[s,a]=(0,u.useState)(!1),l=Ti(),[c,d]=(0,f.useGlobalSessionProp)("thirdPartyBlockInstalled",!1),{createSuccessNotice:p}=(0,E.useDispatch)("core/notices");(0,u.useEffect)((()=>{r(l)}),[l,t,n,o]);const h=(0,u.useCallback)((()=>{s||r(!1)}),[s]),m=(0,u.useCallback)((async()=>{a(!0);try{await Ei()}catch(e){}d(!0),p((0,T.__)("Kubio blog templates were imported successfully! Refresh the editor to enjoy the full site editing experience","kubio"),{isDismissible:!0,actions:[{label:(0,T.__)("Refresh page now","kubio"),onClick:()=>window.location.reload()}]}),r(!1)}),[]);return(0,ve.jsxs)(ve.Fragment,{children:[i&&!c&&(0,ve.jsxs)(x.Modal,{title:(0,T.__)("💫 Start with the Kubio blog!","kubio"),onRequestClose:h,shouldCloseOnEsc:!1,shouldCloseOnClickOutside:!1,isDismissible:!s,children:[(0,ve.jsxs)("p",{children:[(0,T.__)("Kubio comes with a fully customizable blog area for your site.","kubio"),(0,ve.jsx)("br",{}),(0,T.__)("Would you like to use the Kubio blog templates? ","kubio")]}),(0,ve.jsxs)(x.ButtonGroup,{className:"h-template-part-modal__button-group",children:[!s&&(0,ve.jsx)(x.Button,{isLink:!0,onClick:h,children:(0,T.__)("Maybe later","kubio")}),(0,ve.jsxs)(x.Button,{isPrimary:!0,isBusy:s,onClick:m,children:[!s&&(0,T.__)("Import Kubio blog","kubio"),s&&(0,T.__)("Importing Kubio blog…","kubio")]})]})]}),e]})},Ps="__experimentalMainDashboardButton",{Fill:As,Slot:Rs}=(0,x.createSlotFill)(Ps),Os=As;Os.Slot=({children:e})=>(0,l.useSlotHasFills)(Ps)?(0,ve.jsx)(Rs,{bubblesVirtually:!0}):e;const Ns=Os,Ms=(0,ve.jsx)(A.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,ve.jsx)(A.Path,{d:"M12 4L4 7.9V20h16V7.9L12 4zm6.5 14.5H14V13h-4v5.5H5.5V8.8L12 5.7l6.5 3.1v9.7z"})}),Bs=(0,ve.jsx)(A.SVG,{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,ve.jsx)(A.Path,{d:"M18 5.5H6a.5.5 0 0 0-.5.5v12a.5.5 0 0 0 .5.5h12a.5.5 0 0 0 .5-.5V6a.5.5 0 0 0-.5-.5ZM6 4h12a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2Zm1 5h1.5v1.5H7V9Zm1.5 4.5H7V15h1.5v-1.5ZM10 9h7v1.5h-7V9Zm7 4.5h-7V15h7v-1.5Z"})}),Ls=(0,ve.jsx)(A.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,ve.jsx)(A.Path,{fillRule:"evenodd",clipRule:"evenodd",d:"M12 5.5A2.25 2.25 0 0 0 9.878 7h4.244A2.251 2.251 0 0 0 12 5.5ZM12 4a3.751 3.751 0 0 0-3.675 3H5v1.5h1.27l.818 8.997a2.75 2.75 0 0 0 2.739 2.501h4.347a2.75 2.75 0 0 0 2.738-2.5L17.73 8.5H19V7h-3.325A3.751 3.751 0 0 0 12 4Zm4.224 4.5H7.776l.806 8.861a1.25 1.25 0 0 0 1.245 1.137h4.347a1.25 1.25 0 0 0 1.245-1.137l.805-8.861Z"})}),Ds=({post:e,onCloseModal:t,onClickDuplicate:n})=>{const[o,i]=(0,u.useState)(!1),{createErrorNotice:r,createSuccessNotice:s}=(0,l.useKubioNotices)(),[a,c]=(0,u.useState)(""),{saveEntityRecord:d}=(0,E.dispatch)("core"),p=async(t,o,l)=>{i(!0);const c={title:l||a,status:"publish",content:null==e?void 0:e.content,excerpt:null==e?void 0:e.excerpt,meta:{...(null==e?void 0:e.meta)||{},saved_in_kubio:!0},template:null==e?void 0:e.template};let u=!1;try{u=await d(t,o,c),s((0,T.sprintf)((0,T.__)("%s saved successfully!","kubio"),c.title))}catch(e){console.error(e),r((0,T.sprintf)((0,T.__)("An error occurred. %s was not saved!","kubio"),c.title))}u&&n(u)};return(0,ve.jsx)(x.Modal,{title:(0,T.__)("Duplicate page","kubio"),onRequestClose:e=>{e.stopPropagation(),t()},className:"block-editor-block-new-entity-modal",shouldCloseOnEsc:!o,shouldCloseOnClickOutside:!o,isDismissible:!o,children:(0,ve.jsxs)("div",{className:"popover__content",children:[(0,ve.jsx)(Ve.InputControl,{value:a,onChange:e=>c(e),label:(0,T.__)("Title","kubio"),autoFocus:!0,onKeyPress:t=>{"Enter"===t.key&&p("postType",e.type,t.target.value)}}),(0,ve.jsx)(x.__experimentalSpacer,{margin:3}),(0,ve.jsx)(x.Button,{isPrimary:!0,isBusy:o,disabled:""===a,onClick:()=>{p("postType",e.type)},className:"add-button",children:(0,T.__)("Duplicate page","kubio")})]})})},Fs=({post:e,onCloseModal:t})=>{var n,o;const[i,r]=(0,u.useState)(!1),{createErrorNotice:s,createSuccessNotice:a}=(0,l.useKubioNotices)();return(0,ve.jsxs)(x.Modal,{title:(0,T.__)("Delete ","kubio")+(null==e||null===(n=e.title)||void 0===n?void 0:n.raw)+(0,T.__)(" page?","kubio"),onRequestClose:e=>{e.stopPropagation(),t()},className:"block-editor-block-new-entity-modal",shouldCloseOnEsc:!i,shouldCloseOnClickOutside:!i,isDismissible:!i,children:[(0,ve.jsxs)("p",{children:[(0,ve.jsx)("span",{dangerouslySetInnerHTML:{__html:(0,T.sprintf)(// translators: %s: page name
// translators: %s: page name
(0,T.__)("The <strong>%s</strong> page will be moved in the trash.","kubio"),null==e||null===(o=e.title)||void 0===o?void 0:o.raw)}}),(0,ve.jsx)("br",{}),(0,T.__)("You can recover it later from WP Admin -> Pages -> Trash","kubio")]}),(0,ve.jsxs)(x.ButtonGroup,{className:"h-template-part-modal__button-group",children:[(0,ve.jsx)(x.Button,{isLink:!0,onClick:t,children:(0,T.__)("Cancel","kubio")}),(0,ve.jsx)(x.Button,{isPrimary:!0,onClick:async()=>{r(!0),await Gs(e,s,a),t()},children:(0,T.__)("Delete","kubio")})]})]})},Gs=(e,t,n)=>{var o;const i=e.id,r=null==e||null===(o=e.title)||void 0===o?void 0:o.raw;try{(0,E.dispatch)("core").deleteEntityRecord("postType",e.type,parseInt(i)),n(r+(0,T.__)(" moved to trash!","kubio"))}catch(e){t((0,T.sprintf)(//translators: $s is the page name
//translators: $s is the page name
(0,T.__)("An error occurred. %s was not saved","kubio"),r))}},Us=["attachment","kubio_changeset"],Hs=({onComplete:e=h.noop,closeModal:t=h.noop,entityName:n=(0,T.__)("other","kubio"),ModalComponent:o=x.Modal,modalProps:i={},changeReadyState:r=!0})=>{const s=(0,l.useUnloadStoreEntities)(),a=(0,l.useResetUndoStack)(),c=(0,f.useSetGlobalSessionProp)("ready"),[p,m]=(0,u.useState)(!1),{hasDirtyEntities:g,entitiesToSave:b}=(0,E.useSelect)((e=>{const{__experimentalGetDirtyEntityRecords:t}=e("core");return{hasDirtyEntities:t().filter((({kind:e,name:t})=>"postType"===e&&!Us.includes(t))).length>0,entitiesToSave:t()}})),{saveEditedEntityRecord:v}=(0,E.useDispatch)("core"),{setIsNavigationPanelOpened:_}=(0,E.useDispatch)(be),y=(0,u.useCallback)((()=>{_(!1),r&&c(!1);const{requestIdleCallback:t}=window;t((()=>{s(),a(),(0,l.removeCachedAllMergedAttributes)(),t(e)})),(0,d.doAction)("kubio.editor.page-changed")}),[r,s,a,e,c]);return(0,u.useEffect)((()=>{g||y()}),[]),(0,ve.jsx)(ve.Fragment,{children:g&&(0,ve.jsxs)(o,{title:(0,T.__)("You have unsaved changes","kubio"),onRequestClose:t,...i,children:[(0,ve.jsxs)("p",{children:[(0,ve.jsx)("span",{dangerouslySetInnerHTML:{__html:(0,T.sprintf)(// translators: %s: page name
// translators: %s: page name
(0,T.__)("You are being redirected to <strong>%s</strong> page.","kubio"),n)}}),(0,ve.jsx)("br",{}),(0,T.__)("Would you like to save these changes or discard them?","kubio")]}),(0,ve.jsxs)(x.ButtonGroup,{className:"h-template-part-modal__button-group",children:[(0,ve.jsx)(x.Button,{isLink:!0,onClick:()=>{y()},children:(0,T.__)("Discard changes","kubio")}),(0,ve.jsx)(x.Button,{isPrimary:!0,onClick:()=>{m(!0),(()=>{const e=b.map((({kind:e,name:t,key:n})=>v(e,t,n)));return Promise.all(e)})().then((()=>{y(),m(!1)}))},isBusy:p,disabled:p,children:(0,T.__)("Save changes","kubio")})]})]})})};function Vs({item:e}){const{setPage:t,setIsNavigationPanelOpened:n}=(0,E.useDispatch)(be),{page_for_posts:o,page_on_front:i,show_on_front:r,wooCommercePagesIds:s,isActive:a}=(0,E.useSelect)((t=>{var n,o,i,r,s;const{page_for_posts:a,page_on_front:l,show_on_front:c}=t("core").getEditedEntityRecord("root","site"),u=null===(n=t("core/block-editor").getSettings())||void 0===n||null===(o=n.kubioBasicWooCommerce)||void 0===o?void 0:o.pagesIds,{getPage:d,getTemplateId:p,getTemplatePartId:h}=t(be),m=[null===(i=d())||void 0===i||null===(r=i.context)||void 0===r||null===(s=r.postId)||void 0===s?void 0:s.toString(),p(),h()].filter(Boolean);return{page_for_posts:a,page_on_front:l,show_on_front:c,wooCommercePagesIds:Object.values(u||{}),isActive:m.includes(e.id.toString())}}),[]),{duplicateContainerRef:l,delContainerRef:c}=(0,u.useRef)(),[d,p]=(0,u.useState)(!1),[h,m]=(0,u.useState)(!1),[g,b]=(0,u.useState)(!1),[f,v]=(0,u.useState)({}),_=(0,u.useCallback)((()=>{const{type:o,slug:i,link:r,id:s}=null!=f&&f.id?f:e;t({type:o,slug:i,path:(0,di.getPathAndQueryString)(r),context:{postType:o,postId:s}}),n(!1)}),[t,e,f]),y=(0,u.useCallback)((()=>{a||b(!0)}),[b]),k=(0,u.useCallback)((()=>{p(!0)})),S=(0,u.useCallback)((()=>{m(!0)}));if(!e)return null;const w=(e=>{var t;const n=e.taxonomy?e.name:null==e||null===(t=e.title)||void 0===t?void 0:t.rendered,o=document.createElement("div");return o.innerHTML=n,o.textContent||o.innerText||""})(e)||(0,T.__)("(no title)","kubio"),j=w;let I,P;"page"===r&&i===e.id&&(I=(0,ve.jsx)(x.Icon,{title:(0,T.__)("Homepage","kubio"),icon:Ms,size:18})),"page"===r&&o===e.id&&(I=(0,ve.jsx)(x.Icon,{title:(0,T.__)("Posts page","kubio"),icon:Bs,size:18})),-1!==s.indexOf(e.id)&&(I=(0,ve.jsx)(x.Icon,{title:(0,T.__)("Posts page","kubio"),icon:ye.WooCommerceSmallLogo,size:18}));const A=i!==e.id&&!a;"page"===r&&"page"===e.type&&o!==e.id&&(P=(0,ve.jsxs)(ve.Fragment,{children:[(0,ve.jsx)(x.DropdownMenu,{className:"kubio-more-menu",icon:qr,label:(0,T.__)("More tools & options","kubio"),popoverProps:{className:"edit-site-kubio-more-menu__content edit-site-more-menu__content",position:"bottom left",isAlternate:!0},toggleProps:{tooltipPosition:"bottom"},children:({onClose:e})=>(0,ve.jsx)(ve.Fragment,{children:(0,ve.jsxs)(x.MenuGroup,{children:[(0,ve.jsx)(x.MenuItem,{icon:ye.DuplicateItemIcon,ref:l,onClick:t=>{t.preventDefault(),k(t),e()},role:"menuitemcheckbox",children:(0,T.__)("Duplicate","kubio")}),A&&(0,ve.jsx)(x.MenuItem,{icon:Ls,ref:c,onClick:t=>{t.preventDefault(),S(t),e()},role:"menuitemcheckbox",children:(0,T.__)("Delete","kubio")})]})})}),d&&(0,ve.jsx)(Ds,{post:e,onCloseModal:()=>{p(!1)},onClickDuplicate:e=>{v(e),p(!1),b(!0)}}),h&&(0,ve.jsx)(Fs,{post:e,onCloseModal:()=>{m(!1)}})]}));const R=C()("edit-site-navigation-panel__content-item",{"kubio-navigation-item-active":a});return(0,ve.jsxs)(ve.Fragment,{children:[(0,ve.jsxs)(x.__experimentalNavigationItem,{className:R,item:`${e.taxonomy||e.type}-${e.id}`,title:j,children:[(0,ve.jsxs)(x.Button,{onClick:y,children:[I&&(0,ve.jsx)("span",{className:"components-navigation__item-badge",children:I}),(0,ve.jsx)("span",{className:"components-truncate components-text components-navigation__item-title",children:j})]}),P]}),g&&(0,ve.jsx)(Hs,{onComplete:_,closeModal:()=>b(!1),entityName:j})]})}const Ks=e=>(0,h.deburr)(e).replace(/^\//,"").toLowerCase(),zs=(e,t)=>-1!==Ks(e).indexOf(Ks(t));function $s({item:e,icon:t}){const{title:n,description:o,isActive:i}=(0,E.useSelect)((t=>{var n,o,i,r;const{getPage:s,getTemplateId:a,getTemplatePartId:l}=t(be),c=[null===(n=s())||void 0===n||null===(o=n.context)||void 0===o||null===(i=o.postId)||void 0===i?void 0:i.toString(),a(),l()].filter(Boolean);return{..."wp_template"===e.type?t("core/editor").__experimentalGetTemplateInfo(e):{title:(null==e||null===(r=e.title)||void 0===r?void 0:r.rendered)||(null==e?void 0:e.slug),description:""},isActive:c.includes(e.id.toString())}}),[]),{setTemplate:r,setTemplatePart:s,setIsNavigationPanelOpened:a,setPage:l}=(0,E.useDispatch)(be),[c,d]=(0,u.useState)(!1),p=(0,u.useCallback)((()=>{i||d(!0)}),[d,i]);if(!e)return null;const h=C()("edit-site-navigation-panel__template-item",{"kubio-navigation-item-active":i});return(0,ve.jsxs)(x.__experimentalNavigationItem,{className:h,item:`${e.type}-${e.id}`,title:n,icon:t,children:[(0,ve.jsx)(x.Button,{onClick:p,children:(0,ve.jsxs)("span",{className:"edit-site-navigation-panel__info-wrapper",children:[(0,ve.jsxs)("div",{className:"edit-site-navigation-panel__template-item-title",children:["draft"===e.status&&(0,ve.jsx)("em",{children:(0,T.__)("[Draft]","kubio")}),n]}),o&&(0,ve.jsx)("div",{className:"edit-site-navigation-panel__template-item-description",children:o})]})}),c&&(0,ve.jsx)(Hs,{onComplete:()=>{"wp_template"===e.type?r(e.id,e.slug,!0):s(e.id),a(!1)},closeModal:()=>d(!1),entityName:n})]})}function Ys({items:e,search:t}){const n=(null==e?void 0:e.length)>0?e[0].type:null,o=(0,E.useSelect)((t=>{if("wp_template"===n){const{__experimentalGetTemplateInfo:n}=t("core/editor");return e.map((e=>({slug:e.slug,...n(e)})))}return(e||[]).map((e=>{var t,n;return{slug:e.slug,title:null===(t=e.title)||void 0===t?void 0:t.rendered,description:null===(n=e.excerpt)||void 0===n?void 0:n.rendered}}))}),[e,n]),i=(0,u.useMemo)((()=>null===e||0===t.length?[]:e.filter((({slug:e})=>{const{title:n,description:i}=o.find((t=>t.slug===e));return zs(e,t)||zs(n,t)||zs(i,t)}))),[e,o,t]),r="wp_template"===n||"wp_template_part"===n?$s:Vs;return(0,ve.jsx)(x.__experimentalNavigationGroup,{title:(0,T.__)("Search results","kubio"),children:(0,h.map)(i,(e=>(0,ve.jsx)(r,{item:e},`${e.type}-${e.id}`)))})}function Ws(){const[e,t]=(0,u.useState)(""),[n,o]=(0,u.useState)(""),[i,r]=(0,u.useState)(!1);(0,u.useEffect)((()=>{r(!1)}),[n]);const s=(0,u.useCallback)((0,h.debounce)(o,Dr),[o]);return{search:e,searchQuery:n,isDebouncing:i,onSearch:(0,u.useCallback)((e=>{t(e),s(e),r(!0)}),[t,r,s])}}const qs=({kind:e="postType",entity:t,title:n,hasSearch:o=!0,parentMenu:i=Cr})=>{const{search:r,searchQuery:s,onSearch:a,isDebouncing:c}=Ws(),d=(0,E.useRegistry)(),{resetSelection:p}=d.dispatch(y.store),{setPage:b,setIsNavigationPanelOpened:v}=(0,E.useDispatch)(g.STORE_KEY),{saveEntityRecord:_}=(0,E.dispatch)("core"),{items:k,showOnFront:S,pageForPosts:w,pageOnFront:j,isResolved:I,siteURL:C}=(0,E.useSelect)((n=>{const{getEntityRecords:o,getEditedEntityRecord:i,hasFinishedResolution:r,getEntityRecord:a}=n("core"),l=[e,t,{search:s,status:"publish,private",per_page:50}],c=r("getEntityRecords",l),{page_for_posts:u,page_on_front:d}=n("core").getEditedEntityRecord("root","site");let p=o(...l);return"postType"===e&&"page"===t&&(0,h.isArray)(p)&&(p=[a("postType","page",d),a("postType","page",u),...p].filter(Boolean),p=(0,h.uniqBy)(p,(e=>parseInt(null==e?void 0:e.id)))),{items:p,isResolved:c,showOnFront:i("root","site").show_on_front,siteURL:n("core/block-editor").getSettings().siteUrl||"/",pageForPosts:u,pageOnFront:d,getEntityRecord:a}}),[s,t,e]),[P,A]=(0,u.useState)(""),[R,O]=(0,u.useState)(!1),[N,M]=(0,u.useState)(!1),[B,L]=(0,u.useState)(!1),[D,F]=(0,u.useState)({}),G=(0,u.useCallback)((()=>{O(!1),M(!0)}),[M]),U=async(e,t)=>{L(!0);const n={title:P,status:"publish",template:$,meta:{saved_in_kubio:!0}},o=await _(e,t,n);o&&(F(o),G(),L(!1),A(""))},{availableTemplates:H,isKubioTheme:V}=(0,E.useSelect)((e=>{const t=e(g.STORE_KEY),{getSettings:n}=e(y.store);return{availableTemplates:t.getAvailablePageTemplates(),isKubioTheme:n().isKubioTheme}}),[]),{templates:K,defaultTemplate:z}=(0,l.useDeepMemo)((()=>{let e,t=H;return V?(e=m().find(t,{value:"kubio-full-width"})?"kubio-full-width":"full-width",t=H):(e="",(0,h.find)(t,{value:e})||(e=m().find(t,{value:"kubio-full-width"})?"kubio-full-width":"full-width")),{defaultTemplate:e,templates:t}}),[H,V]),[$,Y]=(0,u.useState)(z),W=(0,l.useDeepMemo)((()=>{const e=K.reduce(((e,t)=>{const n=t.source||"custom";return{...e,[n]:[...e[n]||[],t]}}),{}),t=[];return m().forEach(g.templateGroupPriorities,(function(n){var o;null!==(o=e[n])&&void 0!==o&&o.length&&(t.push({value:"template-group-"+n,label:g.templateGroups[n],disabled:!0}),m().forEach(e[n],(function(e){t.push(e)})))})),t}),[K]),[q,Z]=(0,u.useState)(!1),X=(0,u.useCallback)((()=>{Z(!1),b({type:"page",path:C,context:{queryContext:{page:1}}}),v(!1)}),[b]),Q=(0,f.useSetGlobalSessionProp)("ready"),J=(0,u.useCallback)((()=>{D&&(b({type:D.type,slug:D.slug,path:(0,di.getPathAndQueryString)(D.link),context:{postType:D.type,postId:D.id}}),L(!1),v(!1),setTimeout((()=>Q(!0)),5e3))}),[b,D]),ee=!I||r&&c;let te=(0,ve.jsx)(ve.Fragment,{});"postType"===e&&"page"===t&&(te=(0,ve.jsxs)(ve.Fragment,{children:[(0,ve.jsx)(x.Button,{isPrimary:!0,icon:we,iconPosition:"right",onClick:()=>{O(!0)},className:"kubio-new-page-btn",label:(0,T.__)("New","kubio"),children:(0,T.__)("New","kubio")}),R&&(0,ve.jsx)(ve.Fragment,{children:(0,ve.jsx)(x.Modal,{title:(0,T.__)("Add page","kubio"),onRequestClose:()=>{O(!1)},className:"block-editor-block-new-entity-modal",shouldCloseOnEsc:!B,shouldCloseOnClickOutside:!B,isDismissible:!B,children:(0,ve.jsxs)("div",{className:"popover__content",children:[(0,ve.jsx)(x.__experimentalInputControl,{value:P,onChange:e=>A(e),label:(0,T.__)("Title","kubio"),autoFocus:!0,onKeyPress:n=>{"Enter"===n.key&&U(e,t)}}),(0,ve.jsx)(x.__experimentalSpacer,{margin:3}),(0,ve.jsx)(x.SelectControl,{value:$,onChange:e=>Y(e),label:(0,T.__)("Template","kubio"),options:W}),(0,ve.jsx)(x.__experimentalSpacer,{margin:6}),(0,ve.jsx)(x.Button,{isPrimary:!0,isBusy:B,disabled:B||""===P.trim(),onClick:()=>{p(0,0,null),U(e,t)},className:"add-button",children:(0,T.__)("Add page","kubio")})]})})}),N&&(0,ve.jsx)(Hs,{onComplete:J,closeModal:()=>M(!1),entityName:P})]}));const ne=m().sortBy(k,(e=>"page"!==S||w!==e.id&&j!==e.id?1:0));return(0,ve.jsxs)(x.__experimentalNavigationMenu,{menu:`kubio-content-area-${e}-${t}`,title:n,parentMenu:i,hasSearch:o,onSearch:a,search:r,isSearchDebouncing:c||!I,titleAction:te,className:"kubio-nav-menu-heading",children:[r&&!c&&(0,ve.jsx)(Ys,{items:ne,search:r,disableFilter:!0}),!r&&(0,ve.jsxs)(ve.Fragment,{children:["posts"===S&&(0,ve.jsx)(x.__experimentalNavigationItem,{item:"post-/",title:(0,T.__)("All Posts","kubio"),onClick:()=>Z(!0),children:(0,ve.jsx)(x.Button,{className:"components-button css-1g713f0 ejwewyf3",children:(0,ve.jsxs)(x.Flex,{align:"center",children:[(0,ve.jsx)(x.FlexItem,{children:(0,ve.jsx)(x.Icon,{icon:Ms,size:18})}),(0,ve.jsx)(x.FlexBlock,{children:(0,ve.jsx)("span",{children:(0,T.__)("All Posts","kubio")})}),q&&(0,ve.jsx)(Hs,{onComplete:X,closeModal:()=>M(!1),entityName:P})]})})}),null==ne?void 0:ne.map((e=>(0,ve.jsx)(Vs,{item:e},`${e.type||e.taxonomy}-${e.id}`)))]}),ee&&(0,ve.jsx)(x.__experimentalNavigationItem,{title:(0,T.__)("Loading…","kubio"),isText:!0})]})};function Zs({onActivateMenu:e,activeMenu:t}){var n,o;const{page:i}=(0,E.useSelect)((e=>({page:e(g.STORE_KEY).getPage()})),[]),r=(0,u.useMemo)((()=>{var e,t;return[{kind:"postType",entity:"page",title:(0,T.__)("Pages","kubio")},{kind:"postType",entity:"post",title:(0,T.__)("Posts","kubio")},{kind:"taxonomy",entity:"category",title:(0,T.__)("Categories","kubio")},...(null===(e=window)||void 0===e||null===(t=e.kubioEditSiteSettings)||void 0===t?void 0:t.postTypes.filter((e=>"kubio_section"!==e.entity)))||[]]}),[null===(n=window)||void 0===n||null===(o=n.kubioEditSiteSettings)||void 0===o?void 0:o.postTypes]);return(0,ve.jsxs)(x.__experimentalNavigation,{activeItem:i&&`content-${i.path}`,activeMenu:t,onActivateMenu:t=>{e(t)},children:[t===Cr&&(0,ve.jsx)(Ns.Slot,{children:(0,ve.jsx)(x.__experimentalNavigationBackButton,{backButtonLabel:(0,T.__)("Dashboard","kubio"),className:"edit-site-navigation-panel__back-to-dashboard",href:"index.php"})}),(0,ve.jsx)(x.__experimentalNavigationMenu,{title:(0,T.__)("Site Content","kubio"),children:null==r?void 0:r.map((({kind:e,entity:t,title:n})=>(0,ve.jsx)(x.__experimentalNavigationItem,{title:n,navigateToMenu:`kubio-content-area-${e}-${t}`},`${e}-${t}`)))}),null==r?void 0:r.map((e=>(0,P.createElement)(qs,{...e,key:`${e.kind}-${e.entity}`})))]})}function Xs({menu:e,title:t,templateParts:n}){return(0,ve.jsx)(x.__experimentalNavigationMenu,{menu:e,title:t,parentMenu:Pr,isEmpty:!n||0===n.length,children:(0,h.map)(n,(e=>(0,ve.jsx)($s,{item:e},`wp_template_part-${e.id}`)))})}function Qs(){const[e,t]=(0,u.useState)(""),n=(0,u.useCallback)((e=>{t(e)})),{isLoading:o,templateParts:i,templatePartsByArea:r}=(0,E.useSelect)((e=>{const t=e(S.store).getEntityRecords("postType","wp_template_part"),n=t||[],o=(0,h.groupBy)(n.map((e=>({...e,area:e.area||"uncategorized"}))),"area");return{isLoading:null===t,templateParts:n,templatePartsByArea:o}}),[]);return(0,ve.jsxs)(ve.Fragment,{children:[(0,ve.jsxs)(x.__experimentalNavigationMenu,{menu:Pr,title:(0,T.__)("Template Parts","kubio"),parentMenu:Cr,hasSearch:!0,onSearch:n,search:e,children:[e&&(0,ve.jsx)(Ys,{items:i,search:e}),!e&&Yr.map((({title:e,menu:t})=>(0,ve.jsx)(x.__experimentalNavigationItem,{navigateToMenu:t,title:e,hideIfTargetMenuEmpty:!0},`template-parts-navigate-to-${t}`))),!e&&o&&(0,ve.jsx)(x.__experimentalNavigationItem,{title:(0,T.__)("Loading…","kubio"),isText:!0})]}),Yr.map((({area:e,menu:t,title:n})=>(0,ve.jsx)(Xs,{menu:t,title:n,templateParts:r[e]},`template-parts-menu-${t}`)))]})}function Js(){const{defaultTemplateTypes:e,templates:t,classicThemePrimaryTemplates:n}=(0,E.useSelect)((e=>{const{getSettings:t}=e(be),n=e("core").getEntityRecords("postType","wp_template");return{defaultTemplateTypes:t().defaultTemplateTypes,classicThemePrimaryTemplates:t().classicThemePrimaryTemplates,templates:n}}),[]),{addTemplate:o}=(0,E.useDispatch)(be),i=(0,h.map)(t,"slug"),r=(0,h.filter)(e,(e=>(0,h.includes)((0,h.uniq)([...jr,...n]),e.slug)&&!(0,h.includes)(i,e.slug)));return r.length?(0,ve.jsx)(x.DropdownMenu,{className:"edit-site-navigation-panel__new-template-dropdown",icon:null,label:(0,T.__)("Add Template","kubio"),popoverProps:{noArrow:!1},toggleProps:{children:(0,ve.jsx)(x.Button,{isPrimary:!0,icon:we,iconPosition:"right",className:"kubio-new-page-btn",label:(0,T.__)("New","kubio"),children:(0,T.__)("New","kubio")})},children:({onClose:t})=>(0,ve.jsx)(x.NavigableMenu,{className:"edit-site-navigation-panel__new-template-popover",children:(0,ve.jsx)(x.MenuGroup,{label:(0,T.__)("Add Template","kubio"),children:(0,h.map)(r,(({title:n,description:i,slug:r})=>(0,ve.jsx)(x.MenuItem,{info:i,onClick:()=>{(t=>{const{title:n,description:i}=(0,h.find)(e,{slug:t});o({content:"__KUBIO_REPLACE_WITH_APPROPRIATE_CONTENT__",excerpt:i,slug:t.toString(),status:"publish",title:n,kubio_template_source:"kubio-custom"})})(r),t()},children:n},r)))})})}):null}function ea({menu:e,title:t,templates:n,parentMenu:o}){const i=!n||0===n.length;return!i&&(0,ve.jsx)(x.__experimentalNavigationMenu,{menu:e,title:t,parentMenu:o,isEmpty:i,children:(0,h.map)(n,(e=>(0,ve.jsx)($s,{item:e},`wp_template-${e.id}`)))})}const ta=(e,t="custom")=>!!e&&(null==e?void 0:e.filter((({kubio_template_source:e="custom"})=>e===t)));function na({title:e,templates:t,menu:n,hasAdd:o=!0,parentMenu:i=Ar}){const r=(0,u.useMemo)((()=>{const e={},n=ta(t,"kubio"),o=ta(t,"theme"),i=!!t&&(0,h.difference)(t,[...n,...o]);return n&&n.length&&(e.kubio=n),o&&o.length&&(e.theme=o),i&&i.length&&(e.custom=o),e}),[t]),s=Object.keys(r).length<=1;return(0,ve.jsxs)(ve.Fragment,{children:[(0,ve.jsxs)(x.__experimentalNavigationMenu,{menu:n,title:e,titleAction:o&&(0,ve.jsx)(Js,{}),parentMenu:i,children:[s&&(0,ve.jsx)(ve.Fragment,{children:(0,h.map)(t,(e=>(0,ve.jsx)($s,{item:e,icon:ye.KubioLogo},`wp_template-${e.id}`)))}),!s&&(0,ve.jsxs)(ve.Fragment,{children:[(0,ve.jsx)(x.__experimentalNavigationItem,{navigateToMenu:`${n}--${Lr}`,title:(0,T.__)("Kubio templates","kubio"),hideIfTargetMenuEmpty:!0}),(0,ve.jsx)(x.__experimentalNavigationItem,{navigateToMenu:`${n}--${Br}`,title:(0,T.__)("Theme templates","kubio"),hideIfTargetMenuEmpty:!0}),(0,ve.jsx)(x.__experimentalNavigationItem,{navigateToMenu:`${n}--${Mr}`,title:(0,T.__)("Custom templates","kubio"),hideIfTargetMenuEmpty:!0})]})]}),(0,ve.jsx)(ea,{menu:`${n}--${Lr}`,title:(0,T.__)("Kubio templates","kubio"),templates:r.kubio,parentMenu:n}),(0,ve.jsx)(ea,{menu:`${n}--${Br}`,title:(0,T.__)("Theme templates","kubio"),templates:r.theme,parentMenu:n}),(0,ve.jsx)(ea,{menu:`${n}--${Mr}`,title:(0,T.__)("Custom templates","kubio"),templates:r.custom,parentMenu:n})]})}function oa(){var e,t,n,o,i,r;const[s,a]=(0,u.useState)(""),c=(0,u.useCallback)((e=>{a(e)})),{templates:d}=(0,E.useSelect)((e=>{const{getEntityRecords:t}=e(S.store);return{templates:t("postType","wp_template",{per_page:-1})}}),[]),p=(0,u.useMemo)((()=>(d||[]).reduce(((e,t)=>{let n="general";const o=t.slug;return(0,l.currentTemplateIsPage)(o)&&(n="page"),(0,l.currentTemplateIsPost)(o)&&(n="post"),{...e,[n]:[...e[n]||[],t]}}),{})),[d]);return(0,ve.jsxs)(ve.Fragment,{children:[(0,ve.jsxs)(x.__experimentalNavigationMenu,{menu:Ar,title:(0,T.__)("Templates","kubio"),titleAction:(0,ve.jsx)(Js,{}),parentMenu:Cr,hasSearch:!0,onSearch:c,search:s,children:[s&&(0,ve.jsx)(Ys,{items:d,search:s}),!s&&(0,ve.jsxs)(ve.Fragment,{children:[!(null===(e=p.page)||void 0===e||!e.length)&&(0,ve.jsx)(x.__experimentalNavigationItem,{navigateToMenu:Or,title:(0,T.__)("Page templates","kubio"),hideIfTargetMenuEmpty:!0}),!(null===(t=p.post)||void 0===t||!t.length)&&(0,ve.jsx)(x.__experimentalNavigationItem,{navigateToMenu:Nr,title:(0,T.__)("Post templates","kubio"),hideIfTargetMenuEmpty:!0}),!(null===(n=p.general)||void 0===n||!n.length)&&(0,ve.jsx)(x.__experimentalNavigationItem,{navigateToMenu:Rr,title:(0,T.__)("General templates","kubio"),hideIfTargetMenuEmpty:!0})]}),!s&&null===d&&(0,ve.jsx)(x.__experimentalNavigationItem,{title:(0,T.__)("Loading…","kubio"),isText:!0})]}),!(null===(o=p.page)||void 0===o||!o.length)&&(0,ve.jsx)(na,{menu:Or,title:(0,T.__)("Page templates","kubio"),templates:p.page,hasAdd:!1,category:"page"}),!(null===(i=p.post)||void 0===i||!i.length)&&(0,ve.jsx)(na,{menu:Nr,title:(0,T.__)("Post templates","kubio"),templates:p.post,category:"post",hasAdd:!1}),!(null===(r=p.general)||void 0===r||!r.length)&&(0,ve.jsx)(na,{menu:Rr,title:(0,T.__)("General templates","kubio"),templates:p.general,hasAdd:!1,category:"general"})]})}function ia({activeMenu:e,onActivateMenu:t}){const{postId:n,postType:o}=(0,E.useSelect)((e=>{const{getEditedPostType:t,getEditedPostId:n}=e(be);return{postId:n(),postType:t()}}),[]);return(0,ve.jsx)(x.__experimentalNavigation,{activeItem:`${o}-${n}`,activeMenu:e,onActivateMenu:e=>{t(e)},children:(0,ve.jsxs)(x.__experimentalNavigationMenu,{title:(0,T.__)("Advanced","kubio"),children:[(0,ve.jsx)(x.__experimentalNavigationItem,{title:(0,T.__)("Templates","kubio"),navigateToMenu:Ar}),(0,ve.jsx)(x.__experimentalNavigationItem,{title:(0,T.__)("Template Parts","kubio"),navigateToMenu:Pr}),(0,ve.jsx)(oa,{activeMenu:e}),(0,ve.jsx)(Qs,{})]})})}const ra=({isOpen:e})=>{const[t,n]=(0,u.useState)(Cr),[o,i]=(0,u.useState)(Cr),{siteTitle:r,openedMenu:s}=(0,E.useSelect)((e=>{const{getEntityRecord:t}=e("core");return{siteTitle:(t("root","__unstableBase",void 0)||{}).name,openedMenu:e(be).getNavigationMenu()}}),[]),a=(0,u.useRef)();(0,u.useEffect)((()=>{e&&a.current.focus()}),[o]);const l=(0,k.usePrevious)(e);(0,u.useEffect)((()=>{s&&e&&!l&&n(s)}),[t,e,s]);const{setIsNavigationPanelOpened:c}=(0,E.useDispatch)(be);return(0,ve.jsx)("div",{className:C()("edit-site-navigation-panel",{"is-open":e}),ref:a,tabIndex:"-1",onKeyDown:e=>{e.keyCode===fs.ESCAPE&&(e.stopPropagation(),c(!1))},children:(0,ve.jsxs)("div",{className:"edit-site-navigation-panel__inner",children:[(0,ve.jsx)("div",{className:"edit-site-navigation-panel__site-title-container",children:(0,ve.jsxs)(x.Flex,{children:[(0,ve.jsx)(x.FlexBlock,{children:(0,ve.jsx)("div",{className:"edit-site-navigation-panel__site-title",children:r})}),(0,ve.jsx)(x.FlexItem,{children:(0,ve.jsx)(x.Tooltip,{text:(0,T.__)("Close panel","kubio"),children:(0,ve.jsx)(x.Button,{className:"kubio-edit-site-navigation-panel__close-button",icon:Se,onClick:()=>c(!1)})})})]})}),(0,ve.jsxs)("div",{className:"edit-site-navigation-panel__scroll-container",children:[o===Cr&&(0,ve.jsx)(Zs,{onActivateMenu:n,activeMenu:t}),t===Cr&&(0,ve.jsx)(ia,{activeMenu:o,onActivateMenu:i})]})]})})},sa=function({isOpen:e}){const{isActive:t}=(0,E.useSelect)((e=>{const{isFeatureActive:t}=e(g.STORE_KEY);return{isActive:t("fullscreenMode")}}),[]),{setIsNavigationPanelOpened:n}=(0,E.useDispatch)(g.STORE_KEY);if(!t)return null;const o=(0,ve.jsx)(x.Icon,{size:"36px",icon:ye.HamburgerMenu});return(0,ve.jsx)("div",{className:"edit-site-navigation-toggle"+(e?" is-open":""),children:(0,ve.jsx)(x.Button,{className:"edit-site-navigation-toggle__button has-icon",label:(0,T.__)("Toggle navigation","kubio"),onClick:()=>n(!e),showTooltip:!0,children:o})})},{Fill:aa,Slot:la}=(0,x.createSlotFill)("EditSiteNavigationPanelPreview");function ca(){const e=(0,E.useSelect)((e=>e(be).isNavigationOpened()));return(0,ve.jsxs)(ve.Fragment,{children:[(0,ve.jsx)(sa,{isOpen:e}),e&&(0,ve.jsx)(ra,{isOpen:e}),(0,ve.jsx)(la,{})]})}const ua=()=>{const e=(0,E.useSelect)((e=>e(p.store).getNotices().filter((e=>"snackbar"===e.type)).map((e=>({...e,className:`is-${e.status}`})))),[]),{removeNotice:t}=(0,E.useDispatch)(p.store);return(0,ve.jsx)(x.SnackbarList,{className:"components-editor-notices__snackbar edit-site-notices",notices:e,onRemove:t})};function da(){const{setIsListViewOpened:e}=(0,E.useDispatch)(g.STORE_KEY),{clearSelectedBlock:t,selectBlock:n}=(0,E.useDispatch)(y.store),o=(0,k.useFocusOnMount)("firstElement"),i=(0,k.useFocusReturn)(),r=`edit-site-editor__list-view-panel-label-${(0,k.useInstanceId)(da)}`;return(0,ve.jsxs)("div",{"aria-labelledby":r,className:"edit-site-editor__list-view-panel",onKeyDown:function(t){t.keyCode!==fs.ESCAPE||t.defaultPrevented||e(!1)},children:[(0,ve.jsxs)("div",{className:"edit-site-editor__list-view-panel-header",children:[(0,ve.jsx)("strong",{id:r,children:(0,T.__)("List view","kubio")}),(0,ve.jsx)(x.Button,{icon:Ee,label:(0,T.__)("Close list view sidebar","kubio"),onClick:()=>e(!1)})]}),(0,ve.jsx)("div",{className:"edit-site-editor__list-view-panel-content",ref:(0,k.useMergeRefs)([i,o]),children:(0,ve.jsx)(y.__experimentalListView,{onSelect:async function(e){await t(),n(e,-1)},showNestedBlocks:!0,__experimentalFeatures:!0,__experimentalPersistentListViewFeatures:!0})})]})}function pa(){const{setTemplate:e,setTemplatePart:t,showHomepage:n,setPage:o}=(0,E.useDispatch)(g.STORE_KEY),{siteUrl:i,state:r}=window.kubioEditSiteSettings;(0,u.useEffect)((()=>{var s,a,l,c;const u=window.location.href;let p=(0,di.getQueryArg)(u,"postId")||(null==r||null===(s=r.entity)||void 0===s||null===(a=s.context)||void 0===a?void 0:a.postId);p=isNaN(parseInt(p))?p:parseInt(p);const h=(0,di.getQueryArg)(u,"pageURL");if(!p&&!h)return void n();const m=(0,di.getQueryArg)(u,"postType")||(null==r||null===(l=r.entity)||void 0===l||null===(c=l.context)||void 0===c?void 0:c.postType);if(h)o({path:h});else if("wp_template"===m)e(p);else if("wp_template_part"===m)t(p);else if(m){var g,b,f;const e=(null==r||null===(g=r.entity)||void 0===g||null===(b=g.context)||void 0===b?void 0:b.postId)===p?null==r||null===(f=r.entity)||void 0===f?void 0:f.path:`${i}?p=${p}`;o({context:{postType:m,postId:p},path:e})}else n();(0,d.doAction)("kubio.afterEntitySet")}),[]);const s=function(){const e=(0,u.useRef)(),t=(0,E.useSelect)((e=>{var t,n;const{getEditedPostType:o,getEditedPostId:i,getPage:r}=e(g.STORE_KEY),s=r();let a=i(),l=o();return null!=s&&null!==(t=s.context)&&void 0!==t&&t.postId&&null!=s&&null!==(n=s.context)&&void 0!==n&&n.postType&&(a=s.context.postId,l=s.context.postType),a&&l?{postId:a,postType:l,page:s}:{page:s}}));return In()(e.current,t)||(e.current=t),e.current}();return(0,u.useEffect)((()=>{const e=(0,di.removeQueryArgs)(window.location.href,"postType","postId","pageURL"),{page:t,...n}=s||{};if(m().isEmpty(null==t?void 0:t.context))return;const o=s?(0,di.addQueryArgs)(e,n):e;window.history.replaceState({},"",o)}),[s]),null}const ha=(0,u.createContext)({}),ma=[(0,ke.getNamesOfBlocks)().HEADER,(0,ke.getNamesOfBlocks)().FOOTER,(0,ke.getNamesOfBlocks)().SIDEBAR,"core/template-part","core/post-content"],ga=({children:e,blockContext:t,templateId:n,templateType:o,page:i})=>{const r=(0,u.useRef)([]),[s,a]=(0,u.useState)(!1),l=(0,f.useSetGlobalSessionProp)("ready"),c=(0,f.useGetGlobalSessionProp)("ready",!1),p=(0,u.useRef)(c),{entitiesFinished:m,postLoaded:g,isEmptyPost:b,isPost:v,postEntity:_,isChangingPage:y}=(0,E.useSelect)((e=>{const{getEditedEntityRecord:t,hasFinishedResolution:i}=e("core"),{getCurrentPostType:s,getCurrentPostId:a}=e(si.Ls),l=!(!c&&n&&o)||r.current.reduce(((e,{theme:n,slug:o,content:i})=>{let r=!0;var s;return i||(r=!n||!o||!(0,h.isUndefined)(null===(s=t("postType","wp_template_part",`${n}//${o}`))||void 0===s?void 0:s.content)),e&&r}),!0);let u=!0;const d=s(),p=a();let m,g=!1,b=!1;var f;return d&&p&&(["wp_template","wp_template_part"].includes(d)||(g=!0,b=t("postType",d,p),m=null===(f=b)||void 0===f?void 0:f.content,u=!(0,h.isUndefined)(m)&&i("getEditedEntityRecord",["postType",d,p]))),{entitiesFinished:l||u,postLoaded:u,postEntity:b,isEmptyPost:d&&p&&!(0,h.isUndefined)(m)&&(0,h.isString)(m)&&!(m.includes("\x3c!-- wp:")||m.includes("\x3c!--wp:")),isPost:g,isChangingPage:!1}}),[r.current.length,c,t,n,n]),x=(0,k.useDebounce)((0,u.useCallback)((()=>{a(!0)}),[]),200),S=(0,u.useCallback)((e=>{if(l(e),e){if(l(e),top.kubioStartTime){const e=Math.floor(performance.now()-top.kubioStartTime)/1e3;console.log("Kubio ready in: "+e+" seconds"),top.kubioStartTime=null}(0,d.doAction)("kubio.editorIsReady")}}),[l]),w=(0,u.useCallback)((e=>{p.current!==e&&e&&(0,Gi.updateAllStyleManagers)((()=>{S(e)}))}),[S]),T=(0,k.useDebounce)(w,500),j=(0,k.useDebounce)((0,u.useCallback)((()=>{w(!0),a(!0)}),[]),2e3),I=(0,k.useDebounce)((0,u.useCallback)((()=>{w(!0),a(!0)}),[]),1e4);(0,u.useEffect)((()=>{(0,h.debounce)(w,15e3)}),[]);const{editEntityRecord:C}=(0,E.useDispatch)("core");(0,u.useEffect)((()=>{const e=_.content;v&&e&&"function"!=typeof e&&!_.blocks&&C("postType",_.type,_.id,{blocks:(0,Ge.parse)(e)},{undoIgnore:!0})}),[v,_,b,C]);const P=(0,k.usePrevious)(c);(0,u.useEffect)((()=>{p.current=c,P&&!c&&(a(!1),r.current=[])}),[c,P]),(0,u.useLayoutEffect)((()=>{if(!y&&!c)if(m){if(I.cancel(),j.cancel(),T.cancel(),v&&g&&b)return void j(!0);if(v)return void T(s);T(!0)}else j.cancel(),I(!0)}),[g,v,b,m,s,c,i,n,o,I,j,T,y]);const A=(0,u.useCallback)(((e,{theme:t,slug:n})=>{ma.includes(e)&&(t&&n?(0,h.find)(r.current,{theme:t,slug:n})||r.current.push({theme:t,slug:n}):"core/post-content"===e&&r.current.push({content:!0})),x()}),[x]),R=(0,u.useMemo)((()=>({isReady:c,markAsLoaded:A})),[c,A]);return(0,ve.jsx)(ha.Provider,{value:R,children:e})},ba=(0,k.createHigherOrderComponent)((e=>t=>{const{markAsLoaded:n,isReady:o}=(0,u.useContext)(ha);return(0,u.useLayoutEffect)((()=>{o||n(t.name,t.attributes)}),[o,n,t.attributes,t.name]),(0,ve.jsx)(e,{...t})}),"BlockListEditorStateReady");function fa(){return function(){const[e,t]=(0,_.useGlobalStylesOutput)(),{getSettings:n}=(0,E.useSelect)(be),{updateSettings:o}=(0,E.useDispatch)(be);(0,u.useEffect)((()=>{var i;if(m().isEmpty(e)||m().isEmpty(t))return;const r=n(),s=(null==r||null===(i=r.styles)||void 0===i?void 0:i.filter((e=>!e.isGlobalStyles||"base-layout"===e.__unstableType)))||[],a=(0,Ke.mergeNoArrays)({},r,{styles:[...s,...e],__experimentalFeatures:t});o(a)}),[e,t])}(),null}(0,d.addFilter)("editor.BlockListBlock","kubio/style/BlockListEditorStateReady",(0,k.compose)([ba]),1);const va=()=>{const[e,t]=(0,u.useState)({}),[,n]=(0,Ni.useCurrentInspectorTab)(),o=(0,E.useSelect)((e=>{const t=e("core/block-editor").getSelectedBlock();return{clientId:null==t?void 0:t.clientId,name:null==t?void 0:t.name}}));(0,u.useEffect)((()=>{(null==e?void 0:e.clientId)!==(null==o?void 0:o.clientId)&&(null==e?void 0:e.name)!==(null==o?void 0:o.name)&&(n("content"),t(o))}),[o,e,t,n])},_a={secondarySidebar:(0,T.__)("Block Library","kubio"),drawer:(0,T.__)("Navigation Sidebar","kubio")},ya=(0,k.createHigherOrderComponent)((e=>({initialSettings:t})=>{var n,o,i,r;const{isFullscreenActive:s,sidebarIsOpened:a,settings:c,templateId:d,templateType:p,page:b,isNavigationOpen:f,isInserterOpen:v,isListViewOpen:_,isFSETemplate:y}=(0,E.useSelect)((e=>{const{isFeatureActive:t,getSettings:n,getEditedPostType:o,getEditedPostId:i,getPage:r,isNavigationOpened:s,isListViewOpened:a}=e(g.STORE_KEY),l=o(),c=i();return{isFullscreenActive:t("fullscreenMode"),sidebarIsOpened:e(g.STORE_KEY).isEditorSidebarOpened(),settings:n(),templateType:l,page:r(),templateId:c,isNavigationOpen:s(),isInserterOpen:e(g.STORE_KEY).getOpenedInserter(),isFSETemplate:!!c&&!!l,isListViewOpen:a()}}),[]),{postId:x,post:k,currentTemplateId:S,isKubioTheme:j}=(0,E.useSelect)((e=>{const t=m().get(b,["context","postId"]),n=m().get(b,["context","postType"]),{getEntityRecords:o,getEntityRecord:i}=e("core"),{getTemplateId:r=m().noop}=e("kubio/edit-site");if(!t||!n)return{postId:null,currentTemplateId:null,isKubioTheme:null,post:{}};let s;if(["wp_template","wp_template_part"].includes(n)){const e=o("postType",n,{wp_id:t});s=null==e?void 0:e[0]}else s=i("postType",n,parseInt(t));const a=r(),{getEditorSettings:l}=e(w.store);return{postId:t,currentTemplateId:a,isKubioTheme:l().supportsTemplateMode,post:s}}),[null==b||null===(n=b.context)||void 0===n?void 0:n.postId,null==b||null===(o=b.context)||void 0===o?void 0:o.postType]),{openSidebar:I}=(0,E.useDispatch)(g.STORE_KEY),{createInfoNotice:C}=(0,E.useDispatch)("core/notices");(0,u.useEffect)((()=>{I("document")}),[]);const{editEntityRecord:P}=(0,E.useDispatch)("core"),{updateEditorSettings:A,setupEditorState:R}=(0,E.useDispatch)("core/editor"),{defaultTemplateTypes:O}=c;(0,u.useEffect)((()=>{A({...t,defaultTemplateTypes:O})}),[O,t,A]),(0,u.useLayoutEffect)((()=>{const e=m().get(b,["context","postId"]),t=m().get(b,["context","postType"]);e&&t&&R({id:e,type:t})}),[null==b||null===(i=b.context)||void 0===i?void 0:i.postId,null==b||null===(r=b.context)||void 0===r?void 0:r.postType]),(0,u.useLayoutEffect)((()=>{var e;if(k&&"page"===k.type&&(null===(e=k.meta)||void 0===e||!e.saved_in_kubio)&&(0,h.isString)(S)){const e=j?"full-width":"kubio-full-width",t=S.includes(e),n=m().get(k,["content","raw"]),o=m().get(k,"template"),i=m().get(k,"id"),r=m().get(k,"type");!n&&t&&""===o&&((0,l.markLastChangeAsPersistent)(),P("postType",r,i,{template:e}),C((0,T.__)('New empty page detected. Page template was set to "Full Width"',"kubio"),{type:"snackbar"}))}}),[S,P,j,k,x]);const N={isListViewOpen:_,isFullscreenActive:s,sidebarIsOpened:a,templateId:d,templateType:p,page:b,isNavigationOpen:f,isInserterOpen:v,isFSETemplate:y,__experimentalGlobalStylesBaseStyles:c.__experimentalGlobalStylesBaseStyles,__experimentalGlobalStylesUserEntityId:c.__experimentalGlobalStylesUserEntityId};return(0,ve.jsxs)(ve.Fragment,{children:[(0,ve.jsx)(e,{...N}),(0,ve.jsx)(pa,{})]})}),"WithEditorCurrentEntity"),xa=(0,k.compose)(ya,k.pure)((function(e){const{__experimentalGlobalStylesUserEntityId:t,sidebarIsOpened:n,templateId:o,templateType:i,page:r,isNavigationOpen:s,isInserterOpen:c,isListViewOpen:d,isFSETemplate:p}=e,{setPage:h}=(0,E.useDispatch)("core/editor"),m=(0,l.useActiveMedia)(),[k,j]=(0,u.useState)(!1),I=(0,u.useCallback)((()=>j(!0)),[]),P=(0,u.useCallback)((()=>{j(!1)}),[]);fe(),va();const A=(0,f.useGetGlobalSessionProp)("ready",!1),R=(0,u.useMemo)((()=>({...null==r?void 0:r.context,queryContext:[(null==r?void 0:r.context.queryContext)||{page:1},e=>h({...r,context:{...null==r?void 0:r.context,queryContext:{...null==r?void 0:r.context.queryContext,...e}}})]})),[JSON.stringify(null==r?void 0:r.context)]);(0,u.useEffect)((()=>{s?document.body.classList.add("is-navigation-sidebar-open"):document.body.classList.remove("is-navigation-sidebar-open")}),[s]),(0,u.useEffect)((()=>(0,a.initializeGutentagPatterns)()),[]);const{uiVersion:O}=(0,b.useUIVersion)(),N=C()("kubio-sidebar",{"kubio-sidebar-hidden":(!n||c||d)&&1===O}),M=C()("kubio-secondary-sidebar",{"kubio-secondary-sidebar-hidden":!(c||d)&&1===O}),{createErrorNotice:B}=(0,E.useDispatch)("core/notices");let L=(0,ve.jsx)(ve.Fragment,{}),D=(0,ve.jsx)(ve.Fragment,{});A&&(2===O?D=(0,ve.jsxs)("div",{className:"kubio-sidebar-v2-wrapper",children:[d&&(0,ve.jsx)("div",{className:"kubio-sidebar-list-view",children:(0,ve.jsx)(da,{})}),(0,ve.jsx)("div",{className:N,children:(0,ve.jsx)(pe.Slot,{scope:`${g.STORE_KEY}/sidebars`})}),(0,ve.jsx)("div",{className:M,children:c&&(0,ve.jsx)(Ie,{})})]}):(L=(0,ve.jsx)("div",{className:N,children:(0,ve.jsx)(pe.Slot,{scope:`${g.STORE_KEY}/sidebars`})}),D=(0,ve.jsxs)("div",{className:M,children:[c&&(0,ve.jsx)(Ie,{}),d&&(0,ve.jsx)(da,{})]})));const F=(0,ve.jsx)(ga,{blockContext:R,templateId:o,templateType:i,page:r,children:(0,ve.jsx)(v.KubioGlobalDataContextProvider,{children:(0,ve.jsx)(Wt,{children:(0,ve.jsx)(_.GlobalStylesProvider,{children:(0,ve.jsxs)(y.BlockContextProvider,{value:R,children:[(0,ve.jsx)(fa,{}),(0,ve.jsx)(Is.Register,{}),(0,ve.jsx)(Ai,{}),(0,ve.jsx)(me,{labels:_a,drawer:(0,ve.jsx)(ca,{}),sidebar:L,secondarySidebar:D,header:(0,ve.jsx)(Ts,{openEntitiesSavedStates:I}),notices:(0,ve.jsx)(ua,{}),content:(0,ve.jsxs)(ve.Fragment,{children:[(0,ve.jsx)(w.EditorNotices,{}),p&&(0,ve.jsx)(ur,{}),!p&&(0,ve.jsx)(dr,{}),(0,ve.jsx)(Is,{openEntitiesSavedStates:I}),(0,ve.jsx)("div",{id:"kubio-toolbar-boundary"})]}),actions:(0,ve.jsx)(ve.Fragment,{children:(0,ve.jsx)(vr,{isOpen:k,close:P})}),footer:(0,ve.jsx)(y.BlockBreadcrumb,{})}),(0,u.createPortal)((0,ve.jsxs)("div",{className:"kubio-popover-slot-container",children:[(0,ve.jsx)(x.Popover.Slot,{}),(0,ve.jsx)(x.Popover.Slot,{name:"kubio-popover-slot"})]}),document.body),(0,ve.jsx)(J.PluginArea,{onError:function(e){B((0,T.sprintf)(/* translators: %s: plugin name */ /* translators: %s: plugin name */(0,T.__)('The "%s" plugin has encountered an error and cannot be rendered.',"kubio"),e))}})]})})})})});return(0,ve.jsxs)("div",{className:C()("kubio-editor-wrapper",`kubio-editor-wrapper--media-${m}`),children:[(0,ve.jsx)(he,{isActive:!0}),(0,ve.jsx)(w.UnsavedChangesWarning,{}),(0,ve.jsx)(ge.ShortcutProvider,{children:(0,ve.jsx)(x.SlotFillProvider,{children:(0,ve.jsxs)(S.EntityProvider,{kind:"root",type:"site",children:[p&&(0,ve.jsx)(S.EntityProvider,{kind:"postType",type:i,id:o,children:(0,ve.jsx)(S.EntityProvider,{kind:"postType",type:"wp_global_styles",id:t,children:F})}),!p&&F]})})}),(0,ve.jsx)("div",{id:"vue-main-instance"}),A&&(0,ve.jsxs)(ve.Fragment,{children:[(0,ve.jsx)(pr,{}),(0,ve.jsx)(Cs,{blockContext:R,templateId:o,templateType:i,page:r})]})]})})),ka=window.wp.mediaUtils;(0,d.addFilter)("editor.MediaUpload","kubio/edit-site/components/media-upload",(()=>ka.MediaUpload)),(0,d.addFilter)("editor.BlockEdit","kubio/advancedPanel",yo.withInspectorControlsAdvancedPanel);const Sa=window.wp.dataControls,Ea={fullscreenMode:!0},wa=(0,E.combineReducers)({features:(e=Ea,t)=>"TOGGLE_FEATURE"===t.type?{...e,[t.feature]:!e[t.feature]}:e}),Ta=(0,E.combineReducers)({preferences:wa,deviceType:function(e="Desktop",t){return"SET_PREVIEW_DEVICE_TYPE"===t.type?t.deviceType:e},settings:function(e={},t){switch(t.type){case"UPDATE_SETTINGS":return{...e,...t.settings};case"UPDATE_UI_VERSION":return Si()({path:(0,di.addQueryArgs)("/kubio/v1/update-ui-version",{version:t.version})}),{...e,kubioGlobalSettings:{...e.kubioGlobalSettings||{},editorUIVersion:t.version}}}return e},editedPost:function(e={},t){switch(t.type){case"SET_TEMPLATE":case"SET_PAGE":return{type:"wp_template",id:t.templateId,page:t.page};case"SET_PAGE_CONTENT":return{page:t.page};case"SET_TEMPLATE_PART":return{type:"wp_template_part",id:t.templatePartId,page:{context:{}}}}return e},homeTemplateId:function(e,t){return"SET_HOME_TEMPLATE"===t.type?t.homeTemplateId:e},navigationPanel:function(e={menu:Cr,isOpen:!1},t){switch(t.type){case"OPEN_NAVIGATION_PANEL_TO_MENU":return{...e,isOpen:!0,menu:t.menu};case"SET_IS_NAVIGATION_PANEL_OPENED":return{...e,menu:t.isOpen?e.menu:Cr,isOpen:t.isOpen};case"SET_IS_INSERTER_OPENED":return{...e,menu:e.isOpen&&t.isOpen?Cr:e.menu,isOpen:!t.isOpen&&e.isOpen}}return e},blockInserterPanel:function(e=!1,t){switch(t.type){case"OPEN_NAVIGATION_PANEL_TO_MENU":return!1;case"SET_IS_NAVIGATION_PANEL_OPENED":return!t.isOpen&&e;case"SET_IS_INSERTER_OPENED":return t.isOpen}return e},currentAncestor:function(e="",t){return"SET_CURRENT_ANCESTOR"===t.type?t.currentAncestor:e},templateId:function(e,t){switch(t.type){case"SET_TEMPLATE":case"ADD_TEMPLATE":case"SET_PAGE":case"SET_ENTITY":return t.templateId;case"SET_TEMPLATE_PART":return}return e},templatePartId:function(e,t){return"SET_TEMPLATE_PART"===t.type?t.templatePartId:e},templateType:function(e,t){switch(t.type){case"SET_TEMPLATE":case"ADD_TEMPLATE":case"SET_PAGE":case"SET_ENTITY":return"wp_template";case"SET_TEMPLATE_PART":return"wp_template_part"}return e},templateIds:function(e=[],t){switch(t.type){case"ADD_TEMPLATE":return[...e,t.templateId];case"REMOVE_TEMPLATE":return e.filter((e=>e!==t.templateId))}return e},templatePartIds:function(e=[]){return e},page:function(e={},t){switch(t.type){case"SET_PAGE":case"SET_PAGE_CONTENT":case"SET_TEMPLATE":return t.page;case"SET_TEMPLATE_PART":return{context:{}}}return e},entity:function(e={},t){return"SET_ENTITY"===t.type?t.entity:e},showOnFront:function(e){return e},subSidebars:function(e={},t){switch(t.type){case"ADD_SUBSIDEBAR":return e[t.areaIdentifier]?e:{...e,[t.areaIdentifier]:t.sidebar};case"REMOVE_SUBSIDEBAR":return{...e,[t.areaIdentifier]:!1}}return e},globalStyleEditing:function(e={value:void 0,previousEntity:null},t){return"TOGGLE_GLOBAL_STYLE_EDITING"===t.type?{...e,value:t.value,previousEntity:t.previousEntity}:e},openedInserter:function(e=!1,t){return"TOGGLE_IS_INSERTER_OPEN"===t.type?(t.options=t.options||{},In()(e,t)?e:{value:null==t?void 0:t.value,clientId:null==t?void 0:t.rootClientId,options:(null==t?void 0:t.options)||{}}):e},isGutentagDebug:function(e=!1,t){return"TOGGLE_GUTENTAG_DEBUG"===t.type?null==t?void 0:t.value:e},classicTemplate:function(e,t){switch(t.type){case"SET_PAGE":case"SET_PAGE_CONTENT":return{...e,id:null==t?void 0:t.classicTemplateId}}return e},listViewPanel:function(e=!1,t){switch(t.type){case"OPEN_NAVIGATION_PANEL_TO_MENU":return!1;case"SET_IS_NAVIGATION_PANEL_OPENED":return!t.isOpen&&e;case"SET_IS_INSERTER_OPENED":return!t.value&&e;case"SET_IS_LIST_VIEW_OPENED":return t.isOpen}return e}}),{select:ja,dispatch:Ia}=E.controls;function Ca(e){return{type:"TOGGLE_FEATURE",feature:e}}function Pa(e){return{type:"SET_PREVIEW_DEVICE_TYPE",deviceType:e}}function*Aa(e,t,n=!1){const o={templateSlug:t};if(!t){const t=yield E.controls.resolveSelect("core","getEntityRecord","postType","wp_template",e);o.templateSlug=null==t?void 0:t.slug}return{type:"SET_TEMPLATE",templateId:e,page:{context:n?{}:o}}}function*Ra(e){const t=yield E.controls.dispatch("core","saveEntityRecord","postType","wp_template",e);return{type:"SET_TEMPLATE",templateId:t.id,page:{context:{templateSlug:t.slug}}}}function*Oa(e){yield(0,Sa.apiFetch)({path:`/wp/v2/templates/${e}`,method:"DELETE"});const t=yield E.controls.select(g.STORE_KEY,"getPage");yield E.controls.dispatch(g.STORE_KEY,"setPage",t)}function Na(e){return{type:"SET_TEMPLATE_PART",templatePartId:e}}function Ma(e){return{type:"SET_HOME_TEMPLATE",homeTemplateId:e}}function*Ba(e,t,n=!0){var o;if(null===e)return{type:"SET_PAGE",page:null,templateId:null,changingPage:!0};if(!e.path&&null!==(o=e.context)&&void 0!==o&&o.postId){const t=yield E.controls.resolveSelect("core","getEntityRecord","postType",e.context.postType||"post",e.context.postId);e.path=(0,di.getPathAndQueryString)(t.link)}if(!n)return void(yield{type:"SET_PAGE_CONTENT",page:e,classicTemplateId:""!==t?t:"page.php"});let i;if(!t&&n){const t=(0,di.addQueryArgs)(e.path,{_:Date.now()});try{const e=yield(0,Sa.apiFetch)({url:(0,di.addQueryArgs)(t,{"_wp-find-template":!0})});i=null==e?void 0:e.data}catch(e){console.error(e)}if(!i)return void(yield{type:"SET_PAGE",page:e,templateId:null})}const r=t||i,{id:s,slug:a}=r;return yield{type:"SET_PAGE",page:a?{...e,context:{...e.context,templateSlug:a}}:e,templateId:s},s}function*La(){const{show_on_front:e,page_on_front:t}=yield E.controls.resolveSelect("core","getEntityRecord","root","site"),{siteUrl:n}=yield E.controls.select(g.STORE_KEY,"getSettings"),o={path:n,context:"page"===e?{postType:"page",postId:t}:{}},i=yield*Ba(o);if(!i)return{type:"GUTENTAG_NO_ACTION"};yield Ma(i)}function Da(e){return{type:"OPEN_NAVIGATION_PANEL_TO_MENU",menu:e}}function Fa(e){return{type:"SET_IS_NAVIGATION_PANEL_OPENED",isOpen:e}}function Ga(e){return{type:"UPDATE_SETTINGS",settings:e}}function*Ua(e){return yield Ia("core/interface","enableComplementaryArea",`${g.STORE_KEY}/sidebars`,`${g.STORE_KEY}/sidebar/${e}`)}function*Ha(){return yield Ia("core/interface","enableComplementaryArea",`${g.STORE_KEY}/sidebars`,`${g.STORE_KEY}/sidebar/block-inserter`)}function*Va({areaIdentifier:e,sidebar:t}){return{type:"ADD_SUBSIDEBAR",sidebar:t,areaIdentifier:e}}function*Ka({areaIdentifier:e}){return{type:"REMOVE_SUBSIDEBAR",areaIdentifier:e}}function*za(){yield Ia("core/interface","disableComplementaryArea",`${g.STORE_KEY}/sidebars`)}function*$a(e,t=null){return{type:"TOGGLE_GLOBAL_STYLE_EDITING",value:e,previousEntity:t}}function*Ya(e){return{type:"TOGGLE_GUTENTAG_DEBUG",value:e}}function*Wa(e,t=!1,n={}){return{type:"TOGGLE_IS_INSERTER_OPEN",value:e,rootClientId:t||!1,options:{closeOnSelect:!1,replace:!1,...n}}}function qa(e){return{type:"SET_CURRENT_ANCESTOR",currentAncestor:e}}function Za(e){return{type:"SET_IS_LIST_VIEW_OPENED",isOpen:e}}function Xa(e){return{type:"UPDATE_UI_VERSION",version:e}}function Qa(e){return{type:"UPDATE_EDITOR_MODE",value:e}}function Ja(e){return{type:"TOGGLE_AI_CAPABILITIES",value:e}}function el(e){return{type:"UPDATE_AI_INFO",value:e}}function tl(e){return{type:"UPDATE_EXCLUDED_SECTION_CATEGORIES",value:e}}function nl({path:e,value:t}){return{type:"UPDATE_FLAG_SETTINGS",path:e,value:t}}var ol,il;function rl(e){return[e]}function sl(e){return!!e&&"object"==typeof e}function al(){var e={clear:function(){e.head=null}};return e}function ll(e,t,n){var o;if(e.length!==t.length)return!1;for(o=n;o<e.length;o++)if(e[o]!==t[o])return!1;return!0}function cl(e,t){var n,o;function i(){n=il?new WeakMap:al()}function r(){var n,i,r,s,a,l=arguments.length;for(s=new Array(l),r=0;r<l;r++)s[r]=arguments[r];for(a=t.apply(null,s),(n=o(a)).isUniqueByDependants||(n.lastDependants&&!ll(a,n.lastDependants,0)&&n.clear(),n.lastDependants=a),i=n.head;i;){if(ll(i.args,s,1))return i!==n.head&&(i.prev.next=i.next,i.next&&(i.next.prev=i.prev),i.next=n.head,i.prev=null,n.head.prev=i,n.head=i),i.val;i=i.next}return i={val:e.apply(null,s)},s[0]=null,i.args=s,n.head&&(n.head.prev=i,i.next=n.head),n.head=i,i.val}return t||(t=rl),o=il?function(e){var t,o,i,r,s=n,a=!0;for(t=0;t<e.length;t++){if(!sl(o=e[t])){a=!1;break}s.has(o)?s=s.get(o):(i=new WeakMap,s.set(o,i),s=i)}return s.has(ol)||((r=al()).isUniqueByDependants=a,s.set(ol,r)),s.get(ol)}:function(){return n},r.getDependants=t,r.clear=i,i(),r}ol={},il="undefined"!=typeof WeakMap;const ul=Object.values(l.defaultTemplatesByPostType).map((e=>`${e}.php`));function dl(e,t){return"fullscreenMode"===t||"fixedToolbar"!==t&&(0,h.get)(e.preferences.features,[t],!1)}function pl(e){return e.deviceType}const hl=(0,E.createRegistrySelector)((e=>()=>e("core").canUser("create","media"))),ml=cl(((e,t)=>{const n={...e.settings,outlineMode:!0,focusMode:dl(e,"focusMode"),hasFixedToolbar:dl(e,"fixedToolbar"),__experimentalSetIsInserterOpened:t};return hl(e)?(n.mediaUpload=({onError:t,...n})=>{(0,ka.uploadMedia)({wpAllowedMimeTypes:e.settings.allowedMimeTypes,onError:({message:e})=>t(e),...n})},n):n}),(e=>[hl(e),e.settings,dl(e,"focusMode"),dl(e,"fixedToolbar")]));function gl(e){return e.homeTemplateId}function bl(e){return e.editedPost.type}function fl(e){return e.editedPost.id}function vl(e){return e.editedPost.page}function _l(e){return e.navigationPanel.isOpen}function yl(e){var t;return null===(t=e.navigationPanel)||void 0===t?void 0:t.menu}function xl(e){return e.blockInserterPanel}function kl(e){return e.templateId}function Sl(e){return e.templatePartId}function El(e){return e.templateType}function wl(e){return e.templateIds}function Tl(e){return e.templatePartIds}function jl(e){return e.entity}function Il(e){return e.showOnFront}const Cl=(0,E.createRegistrySelector)((e=>(t,n=null)=>{const o=e("core/interface").getActiveComplementaryArea(`${g.STORE_KEY}/sidebars`);return n?o===`${g.STORE_KEY}/sidebar/${n}`:!(0,h.isEmpty)(o)}));function Pl(e){var t;return null===(t=e.openedInserter)||void 0===t?void 0:t.value}function Al(e){var t;return null===(t=e.openedInserter)||void 0===t?void 0:t.clientId}function Rl(e){var t,n;return!(null===(t=e.openedInserter)||void 0===t||null===(n=t.options)||void 0===n||!n.replace)}function Ol(e){var t,n;return!(null===(t=e.openedInserter)||void 0===t||null===(n=t.options)||void 0===n||!n.closeOnSelect)}function Nl(e){return e.currentAncestor}function Ml(){return(0,E.select)("core/interface").getActiveComplementaryArea(`${g.STORE_KEY}/sidebars`)}function Bl(e){return e.subSidebars}function Ll(e){return e.globalStyleEditing.value}function Dl(e){return e.globalStyleEditing.previousEntity}function Fl(e){return e.isGutentagDebug}function Gl(e){const{rootClientId:t,insertionIndex:n}=e.blockInserterPanel;return{rootClientId:t,insertionIndex:n}}function Ul(e){return e.listViewPanel}const Hl=e=>{var t;const{templateId:n,templateType:o}=e;return n&&o&&(null===(t=(0,E.select)("core").getEditedEntityRecord("postType",o,n))||void 0===t?void 0:t.kubio_template_source)||null},Vl=e=>{var t;const n=null==e||null===(t=e.page)||void 0===t?void 0:t.context;let o=null;var i,r,s;o=null!=n&&n.postType&&null!=n&&n.postId?null!==(i=(0,E.select)("core").getEditedEntityRecord("postType",null==n?void 0:n.postType,null==n?void 0:n.postId).template)&&void 0!==i?i:null:null!==(r=null===(s=e.templateId)||void 0===s?void 0:s.split("//").pop())&&void 0!==r?r:null;const a=(0,E.select)("core").getEditedEntityRecord("root","site");if("page"===a.show_on_front&&a.page_on_front===parseInt(null==n?void 0:n.postId)){const e=((0,E.select)("core").getEntityRecords("postType","wp_template",{per_page:-1})||[]).map((({id:e})=>e.split("//").pop())).includes("front-page"),{classicHasFrontPageTemplate:t}=(0,E.select)("core/block-editor").getSettings();if(e||t)return"front-page"}return""===o&&(o="page"===(null==n?void 0:n.postType)?"page":"single"),o},Kl=e=>{const t=Vl(e),n=(0,E.select)("core").getEntityRecords("postType","wp_template",{per_page:-1});return!!t&&(n||[]).map((({id:e})=>e.split("//").pop())).includes(t)},zl=e=>{var t;const n=null==e||null===(t=e.page)||void 0===t?void 0:t.context;return(null==n?void 0:n.postType)||null},$l=e=>{var t;const n=null==e||null===(t=e.page)||void 0===t?void 0:t.context;return(null==n?void 0:n.postId)||null},Yl=e=>{var t;const n=null==e||null===(t=e.page)||void 0===t?void 0:t.context,o=(0,E.select)("core").getEditedEntityRecord("root","site"),i=null==o?void 0:o.page_for_posts;return parseInt(i)===parseInt(n.postId)},Wl=e=>{var t,n;const o=vl(e),i="front-page"===(null==o||null===(t=o.context)||void 0===t?void 0:t.templateSlug),r=(0,E.select)("core").getEditedEntityRecord("root","site"),s=null==r?void 0:r.page_on_front,a=null==o||null===(n=o.context)||void 0===n?void 0:n.postId,l="page"===r.show_on_front&&parseInt(s)===parseInt(a);return i||l},ql=e=>{const t=(0,E.select)("core").getEditedEntityRecord("root","site"),n=vl(e),o=m().get(n,"context",{}),{postType:i,postId:r}=o,s="page"===(null==t?void 0:t.show_on_front),a=null==t?void 0:t.page_on_front,l=s&&parseInt(a)===parseInt(r),c=s&&parseInt(null==t?void 0:t.page_for_posts)===parseInt(r);return"page"===i&&!c&&!l},Zl=()=>{var e,t;const n=(null===(e=(0,E.select)("core").getEntityRecords("postType","wp_template",{per_page:-1}))||void 0===e?void 0:e.filter((({slug:e})=>(0,l.currentTemplateIsPage)(e))))||[],o=(null===(t=(0,E.select)("core/block-editor").getSettings())||void 0===t?void 0:t.classicThemeTemplates)||[],i=n.map((({title:e,slug:t,kubio_template_source:n="custom"})=>({value:t,label:"kubio"===n?e.rendered.replace("Kubio","").trim():e.rendered,source:n})));return Object.keys(o).forEach((e=>{const t=o[e];(0,h.find)(n,{slug:e.replace(".php","")})||i.push({value:ul.includes(e)?e.replace(".php",""):e,label:t,isClassicTemplate:!0,source:"theme"})})),i.forEach((e=>{"page"===e.value&&(e.value="")})),m().sortBy(i,["source","label"])};function Xl(e){var t;return null==e||null===(t=e.classicTemplate)||void 0===t?void 0:t.id}function Ql(e){var t,n;const o=vl(e),i=m().get(o,"context",{}),{postType:r,postId:s}=i,a=null===(t=(0,E.select)("core/block-editor").getSettings())||void 0===t||null===(n=t.kubioBasicWooCommerce)||void 0===n?void 0:n.pagesIds;return"product"===r||Object.values(a||{}).includes(parseInt(s))}const Jl=cl((e=>{var t;const n=null===(t=e.settings)||void 0===t?void 0:t.kubioGlobalSettings;return(null==n?void 0:n.editorUIVersion)||1}),(e=>[e.settings])),ec={reducer:Ta,actions:r,selectors:s,controls:Sa.controls,persist:["preferences"]};async function tc(e){return(0,E.registerStore)(be,{...ec,initialState:e})}function nc({template:e,onClose:t}){const{title:n,description:o}=(0,E.useSelect)((t=>t("core/editor").__experimentalGetTemplateInfo(e)),[]),{openNavigationPanelToMenu:i}=(0,E.useDispatch)(g.STORE_KEY);return e?(0,ve.jsxs)(ve.Fragment,{children:[(0,ve.jsxs)("div",{className:"edit-site-template-details",children:[(0,ve.jsx)(x.__experimentalText,{variant:"sectionheading",children:(0,T.__)("Template details","kubio")}),n&&(0,ve.jsx)(x.__experimentalText,{variant:"body",children:(0,T.sprintf)(/* translators: %s: Name of the template. */ /* translators: %s: Name of the template. */(0,T.__)("Name: %s","kubio"),n)}),o&&(0,ve.jsx)(x.__experimentalText,{variant:"body",children:(0,T.sprintf)(/* translators: %s: Description of the template. */ /* translators: %s: Description of the template. */(0,T.__)("Description: %s","kubio"),o)})]}),(0,ve.jsx)(x.Button,{className:"edit-site-template-details__show-all-button",onClick:()=>{t(),i(Ar)},"aria-label":(0,T.__)("Browse all templates. This will open the template menu in the navigation side panel.","kubio"),children:(0,T.__)("Browse all templates","kubio")})]}):null}function oc({clientId:e}){const{innerBlocks:t}=(0,E.useSelect)((t=>t("core/block-editor").__unstableGetBlockWithBlockTree(e)),[e]),{replaceBlocks:n}=(0,E.useDispatch)("core/block-editor");return(0,ve.jsx)(y.BlockSettingsMenuControls,{children:({onClose:o})=>(0,ve.jsx)(x.MenuGroup,{className:"kubio-block-settings-control",children:(0,ve.jsx)(x.MenuItem,{onClick:()=>{n(e,t),o()},children:(0,T.__)("Detach blocks from template part","kubio")})})})}function ic({clientIds:e,blocks:t}){const{replaceBlocks:n}=(0,E.useDispatch)("core/block-editor");return(0,ve.jsx)(y.BlockSettingsMenuControls,{children:({onClose:o})=>(0,ve.jsx)(x.MenuGroup,{className:"kubio-block-settings-control",children:(0,ve.jsx)(x.MenuItem,{onClick:()=>{n(e,(0,Ge.createBlock)("core/template-part",{},t.map((e=>(0,Ge.createBlock)(e.name,e.attributes,e.innerBlocks))))),o()},children:(0,T.__)("Make template part","kubio")})})})}function rc(){var e,t;const{clientIds:n,blocks:o}=(0,E.useSelect)((e=>{const{getSelectedBlockClientIds:t,getBlocksByClientId:n}=e("core/block-editor"),o=t();return{clientIds:o,blocks:n(o)}})),{HEADER:i,FOOTER:r}=(0,ke.getNamesOfBlocks)(),s=["core/template-part","core/post-content",i,r];return 1===o.length&&"core/template-part"===(null===(e=o[0])||void 0===e?void 0:e.name)?(0,ve.jsx)(oc,{clientId:n[0]}):1===o.length&&null!==(t=o[0])&&void 0!==t&&t.name&&-1===s.indexOf(s)?(0,ve.jsx)(ic,{clientIds:n,blocks:o}):(0,ve.jsx)(ve.Fragment,{})}const sc={MoreMenu:is,MediaControls:ws,PreviewOptions:gs,RedoButton:vs,UndoButton:ys},ac={KubioEditorStateProvider:ga,GlobalStylesRenderer:fa,useSidebarTabAutochange:va},lc={BlockArea:Ue,DocumentArea:Ii,SubSidebarArea:Oe,SidebarArea:Fe,SectionsList:Sn,GeneralSettingsArea:Yo,AdditionalCSS:Tn,ColorSchemeArea:bo,GlobalEffectsArea:_o,GlobalTypography:Go},cc={ContentNavigationItem:Vs,SearchResults:Ys,useDebouncedSearch:Ws},uc=(0,ve.jsx)(A.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"-2 -2 24 24",children:(0,ve.jsx)(A.Path,{d:"M20 10c0-5.51-4.49-10-10-10C4.48 0 0 4.49 0 10c0 5.52 4.48 10 10 10 5.51 0 10-4.48 10-10zM7.78 15.37L4.37 6.22c.55-.02 1.17-.08 1.17-.08.5-.06.44-1.13-.06-1.11 0 0-1.45.11-2.37.11-.18 0-.37 0-.58-.01C4.12 2.69 6.87 1.11 10 1.11c2.33 0 4.45.87 6.05 2.34-.68-.11-1.65.39-1.65 1.58 0 .74.45 1.36.9 2.1.35.61.55 1.36.55 2.46 0 1.49-1.4 5-1.4 5l-3.03-8.37c.54-.02.82-.17.82-.17.5-.05.44-1.25-.06-1.22 0 0-1.44.12-2.38.12-.87 0-2.33-.12-2.33-.12-.5-.03-.56 1.2-.06 1.22l.92.08 1.26 3.41zM17.41 10c.24-.64.74-1.87.43-4.25.7 1.29 1.05 2.71 1.05 4.25 0 3.29-1.73 6.24-4.4 7.78.97-2.59 1.94-5.2 2.92-7.78zM6.1 18.09C3.12 16.65 1.11 13.53 1.11 10c0-1.3.23-2.48.72-3.59C3.25 10.3 4.67 14.2 6.1 18.09zm4.03-6.63l2.58 6.98c-.86.29-1.76.45-2.71.45-.79 0-1.57-.11-2.29-.33.81-2.38 1.62-4.74 2.42-7.1z"})}),dc=function({icon:e}){if(!(0,E.useSelect)((e=>e(g.STORE_KEY).isFeatureActive("fullscreenMode")),[]))return null;const t=e||uc;return(0,ve.jsx)(x.Button,{className:"edit-site-fullscreen-mode-close",icon:t,iconSize:36,href:"index.php",label:(0,T.__)("Back","kubio")})};function pc(e,t){if(!document.querySelector(`.${e}`))return;(t=cloneDeep(t)).__experimentalFetchLinkSuggestions=l.fetchLinkSuggestions,t.__experimentalSpotlightEntityBlocks=["core/template-part"];const n=new URLSearchParams(window.location.search);t.isGutentagDebug=!!n.get("kubio-debug");const o=t.state;delete t.state,o.settings=t,(0,d.doAction)("kubio.editor.initialize"),(0,c.registerCoreBlocks)(),(0,a.initFirebaseData)(),(0,h.isFunction)(c.__experimentalRegisterExperimentalCoreBlocks)&&(0,c.__experimentalRegisterExperimentalCoreBlocks)({enableFSEBlocks:!0});const i=xa;t.wpVersion&&document.body.classList.add("kubio-wp-"+t.wpVersion.replace(".","-")),tc(o),(0,l.reactRender)((0,ve.jsx)(u.StrictMode,{children:(0,ve.jsx)(i,{initialSettings:o.settings})}),document.getElementById(id)),window.kubioToggleDebug=e=>{wp.data.dispatch("kubio/edit-site").toggleGutentagDebug(e)},top.kubioStartTime=performance.now(),(0,d.addAction)("kubio.editor.page-changed","kubio/editor/page-changed/restart-performance-timer",(()=>{top.kubioStartTime=performance.now()}))}})(),(window.kubio=window.kubio||{}).editor=o})();
